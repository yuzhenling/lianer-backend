{"timestamp": "2025-04-22T02:36:23.305585", "level": "ERROR", "message": "Error in generate_ai_melody_question : 'Request' object has no attribute 'difficulty'\nTraceback: Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/api/v1/melody_api.py\", line 49, in generate_ai_melody_question\n    return await ai_melody_service.generate_melody_question(request)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 36, in generate_melody_question\n    correct_melody = await self._generate_ai_melody(request)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 86, in _generate_ai_melody\n    prompt = self._build_melody_prompt(request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 101, in _build_melody_prompt\n    if request.difficulty == RhythmDifficulty.HIGH:\n       ^^^^^^^^^^^^^^^^^^\nAttributeError: 'Request' object has no attribute 'difficulty'\n", "module": "melody_api", "function": "generate_ai_melody_question", "line": 52}
{"timestamp": "2025-04-22T02:37:18.555306", "level": "ERROR", "message": "Error in generate_ai_melody_question : Expecting value: line 1 column 1 (char 0)\nTraceback: Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/api/v1/melody_api.py\", line 49, in generate_ai_melody_question\n    return await ai_melody_service.generate_melody_question(melody_question_request)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 36, in generate_melody_question\n    correct_melody = await self._generate_ai_melody(request)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 92, in _generate_ai_melody\n    melody = self._parse_ai_response(response, request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 160, in _parse_ai_response\n    melody_data = json.loads(response[\"choices\"][0][\"message\"][\"content\"])\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 355, in raw_decode\n    raise JSONDecodeError(\"Expecting value\", s, err.value) from None\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n", "module": "melody_api", "function": "generate_ai_melody_question", "line": 52}
{"timestamp": "2025-04-22T02:42:33.131332", "level": "ERROR", "message": "Error in generate_ai_melody_question : Expecting value: line 1 column 1 (char 0)\nTraceback: Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/api/v1/melody_api.py\", line 49, in generate_ai_melody_question\n    return await ai_melody_service.generate_melody_question(melody_question_request)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 39, in generate_melody_question\n    correct_melody = await self._generate_ai_melody(request)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 107, in _generate_ai_melody\n    melody = self._parse_ai_response(response, request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 185, in _parse_ai_response\n    melody_data = json.loads(response[\"choices\"][0][\"message\"][\"content\"])\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 355, in raw_decode\n    raise JSONDecodeError(\"Expecting value\", s, err.value) from None\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n", "module": "melody_api", "function": "generate_ai_melody_question", "line": 52}
{"timestamp": "2025-04-22T05:44:07.146130", "level": "ERROR", "message": "Error in generate_ai_melody_question : Expecting value: line 1 column 1 (char 0)\nTraceback: Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/api/v1/melody_api.py\", line 49, in generate_ai_melody_question\n    return await ai_melody_service.generate_melody_question(melody_question_request)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 39, in generate_melody_question\n    correct_melody = await self._generate_ai_melody(request)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 107, in _generate_ai_melody\n    melody = self._parse_ai_response(response, request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 187, in _parse_ai_response\n    melody_data = json.loads(response[\"choices\"][0][\"message\"][\"content\"])\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 355, in raw_decode\n    raise JSONDecodeError(\"Expecting value\", s, err.value) from None\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n", "module": "melody_api", "function": "generate_ai_melody_question", "line": 52}
{"timestamp": "2025-04-22T05:44:07.166911", "level": "ERROR", "message": "Error in generate_melody_question : tuple indices must be integers or slices, not RhythmDifficulty\nTraceback: Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/api/v1/melody_api.py\", line 30, in generate_melody_question\n    response = melody_service.generate_question(melody_question_request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/melody_service.py\", line 29, in generate_question\n    correct_melody = self.generate_melody(\n                     ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/melody_service.py\", line 88, in generate_melody\n    rhythm = rhythm_service.generate_rhythm(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/rhythm_service.py\", line 237, in generate_rhythm\n    patterns = self.rhythm_patterns[difficulty][time_signature]\n               ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\nTypeError: tuple indices must be integers or slices, not RhythmDifficulty\n", "module": "melody_api", "function": "generate_melody_question", "line": 33}
{"timestamp": "2025-04-22T05:44:07.177350", "level": "ERROR", "message": "Error in generate_melody_question : tuple indices must be integers or slices, not RhythmDifficulty\nTraceback: Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/api/v1/melody_api.py\", line 30, in generate_melody_question\n    response = melody_service.generate_question(melody_question_request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/melody_service.py\", line 29, in generate_question\n    correct_melody = self.generate_melody(\n                     ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/melody_service.py\", line 88, in generate_melody\n    rhythm = rhythm_service.generate_rhythm(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/rhythm_service.py\", line 237, in generate_rhythm\n    patterns = self.rhythm_patterns[difficulty][time_signature]\n               ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\nTypeError: tuple indices must be integers or slices, not RhythmDifficulty\n", "module": "melody_api", "function": "generate_melody_question", "line": 33}
{"timestamp": "2025-04-22T05:44:44.497423", "level": "ERROR", "message": "Error in generate_melody_question : tuple indices must be integers or slices, not RhythmDifficulty\nTraceback: Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/api/v1/melody_api.py\", line 30, in generate_melody_question\n    response = melody_service.generate_question(melody_question_request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/melody_service.py\", line 29, in generate_question\n    correct_melody = self.generate_melody(\n                     ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/melody_service.py\", line 88, in generate_melody\n    rhythm = rhythm_service.generate_rhythm(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/rhythm_service.py\", line 237, in generate_rhythm\n    patterns = self.rhythm_patterns[difficulty][time_signature]\n               ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\nTypeError: tuple indices must be integers or slices, not RhythmDifficulty\n", "module": "melody_api", "function": "generate_melody_question", "line": 33}
{"timestamp": "2025-04-22T05:50:04.435631", "level": "ERROR", "message": "Error in generate_melody_question : tuple indices must be integers or slices, not RhythmDifficulty\nTraceback: Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/api/v1/melody_api.py\", line 30, in generate_melody_question\n    response = melody_service.generate_question(melody_question_request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/melody_service.py\", line 29, in generate_question\n    correct_melody = self.generate_melody(\n                     ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/melody_service.py\", line 88, in generate_melody\n    rhythm = rhythm_service.generate_rhythm(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/rhythm_service.py\", line 237, in generate_rhythm\n    patterns = self.rhythm_patterns[difficulty][time_signature]\n               ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\nTypeError: tuple indices must be integers or slices, not RhythmDifficulty\n", "module": "melody_api", "function": "generate_melody_question", "line": 33}
{"timestamp": "2025-04-22T05:52:12.604037", "level": "ERROR", "message": "Error in generate_melody_question : tuple indices must be integers or slices, not str\nTraceback: Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/api/v1/melody_api.py\", line 30, in generate_melody_question\n    response = melody_service.generate_question(melody_question_request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/melody_service.py\", line 29, in generate_question\n    correct_melody = self.generate_melody(\n                     ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/melody_service.py\", line 88, in generate_melody\n    rhythm = rhythm_service.generate_rhythm(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/rhythm_service.py\", line 237, in generate_rhythm\n    patterns = self.rhythm_patterns[difficulty.value][time_signature.value]\n               ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^\nTypeError: tuple indices must be integers or slices, not str\n", "module": "melody_api", "function": "generate_melody_question", "line": 33}
{"timestamp": "2025-04-22T05:52:19.188706", "level": "ERROR", "message": "Error in generate_melody_question : tuple indices must be integers or slices, not str\nTraceback: Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/api/v1/melody_api.py\", line 30, in generate_melody_question\n    response = melody_service.generate_question(melody_question_request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/melody_service.py\", line 29, in generate_question\n    correct_melody = self.generate_melody(\n                     ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/melody_service.py\", line 88, in generate_melody\n    rhythm = rhythm_service.generate_rhythm(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/rhythm_service.py\", line 237, in generate_rhythm\n    patterns = self.rhythm_patterns[difficulty.value][time_signature.value]\n               ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^\nTypeError: tuple indices must be integers or slices, not str\n", "module": "melody_api", "function": "generate_melody_question", "line": 33}
{"timestamp": "2025-04-22T05:53:19.084650", "level": "ERROR", "message": "Error in generate_melody_question : tuple indices must be integers or slices, not RhythmDifficulty\nTraceback: Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/api/v1/melody_api.py\", line 30, in generate_melody_question\n    response = melody_service.generate_question(melody_question_request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/melody_service.py\", line 29, in generate_question\n    correct_melody = self.generate_melody(\n                     ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/melody_service.py\", line 88, in generate_melody\n    rhythm = rhythm_service.generate_rhythm(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/rhythm_service.py\", line 237, in generate_rhythm\n    patterns = self.rhythm_patterns[difficulty][time_signature]\n               ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\nTypeError: tuple indices must be integers or slices, not RhythmDifficulty\n", "module": "melody_api", "function": "generate_melody_question", "line": 33}
{"timestamp": "2025-04-22T06:45:29.193398", "level": "ERROR", "message": "Error in generate_ai_melody_question : Expecting value: line 1 column 1 (char 0)\nTraceback: Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/api/v1/melody_api.py\", line 49, in generate_ai_melody_question\n    return await ai_melody_service.generate_melody_question(melody_question_request)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 39, in generate_melody_question\n    correct_melody = await self._generate_ai_melody(request)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 107, in _generate_ai_melody\n    melody = self._parse_ai_response(response, request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 187, in _parse_ai_response\n    melody_data = json.loads(response[\"choices\"][0][\"message\"][\"content\"])\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 355, in raw_decode\n    raise JSONDecodeError(\"Expecting value\", s, err.value) from None\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n", "module": "melody_api", "function": "generate_ai_melody_question", "line": 52}
{"timestamp": "2025-04-22T07:40:55.699215", "level": "ERROR", "message": "Error in generate_ai_melody_question : Expecting value: line 1 column 1 (char 0)\nTraceback: Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/api/v1/melody_api.py\", line 49, in generate_ai_melody_question\n    return await ai_melody_service.generate_melody_question(melody_question_request)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 42, in generate_melody_question\n    correct_melody = await self._generate_ai_melody(request)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 110, in _generate_ai_melody\n    melody = self._parse_ai_response(response, request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 217, in _parse_ai_response\n    melody_data = json.loads(response[\"choices\"][0][\"message\"][\"content\"])\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 355, in raw_decode\n    raise JSONDecodeError(\"Expecting value\", s, err.value) from None\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n", "module": "melody_api", "function": "generate_ai_melody_question", "line": 52}
{"timestamp": "2025-04-22T08:05:22.053129", "level": "ERROR", "message": "Error parsing AI response: Expecting value: line 2 column 13 (char 13)", "module": "ai_melody_service", "function": "_parse_ai_response", "line": 381, "exception": {"type": "JSONDecodeError", "message": "Expecting value: line 2 column 13 (char 13)", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 340, in _parse_ai_response\n    melody_data = json.loads(data)\n                  ^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 355, in raw_decode\n    raise JSONDecodeError(\"Expecting value\", s, err.value) from None\njson.decoder.JSONDecodeError: Expecting value: line 2 column 13 (char 13)"}}
{"timestamp": "2025-04-22T08:05:24.287148", "level": "ERROR", "message": "Error generating AI melody: Expecting value: line 2 column 13 (char 13)", "module": "ai_melody_service", "function": "_generate_ai_melody", "line": 115, "exception": {"type": "JSONDecodeError", "message": "Expecting value: line 2 column 13 (char 13)", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 110, in _generate_ai_melody\n    melody = self._parse_ai_response({}, request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 340, in _parse_ai_response\n    melody_data = json.loads(data)\n                  ^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 355, in raw_decode\n    raise JSONDecodeError(\"Expecting value\", s, err.value) from None\njson.decoder.JSONDecodeError: Expecting value: line 2 column 13 (char 13)"}}
{"timestamp": "2025-04-22T08:05:24.294795", "level": "ERROR", "message": "Error generating AI melody question: Expecting value: line 2 column 13 (char 13)", "module": "ai_melody_service", "function": "generate_melody_question", "line": 92, "exception": {"type": "JSONDecodeError", "message": "Expecting value: line 2 column 13 (char 13)", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 41, in generate_melody_question\n    correct_melody = await self._generate_ai_melody(request)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 110, in _generate_ai_melody\n    melody = self._parse_ai_response({}, request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 340, in _parse_ai_response\n    melody_data = json.loads(data)\n                  ^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 355, in raw_decode\n    raise JSONDecodeError(\"Expecting value\", s, err.value) from None\njson.decoder.JSONDecodeError: Expecting value: line 2 column 13 (char 13)"}}
{"timestamp": "2025-04-22T08:05:24.296331", "level": "ERROR", "message": "Error in generate_ai_melody_question : Expecting value: line 2 column 13 (char 13)\nTraceback: Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/api/v1/melody_api.py\", line 49, in generate_ai_melody_question\n    return await ai_melody_service.generate_melody_question(melody_question_request)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 41, in generate_melody_question\n    correct_melody = await self._generate_ai_melody(request)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 110, in _generate_ai_melody\n    melody = self._parse_ai_response({}, request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 340, in _parse_ai_response\n    melody_data = json.loads(data)\n                  ^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 355, in raw_decode\n    raise JSONDecodeError(\"Expecting value\", s, err.value) from None\njson.decoder.JSONDecodeError: Expecting value: line 2 column 13 (char 13)\n", "module": "melody_api", "function": "generate_ai_melody_question", "line": 52}
{"timestamp": "2025-04-22T08:06:16.043278", "level": "ERROR", "message": "Error parsing AI response: 1 validation error for MelodyNotePitch\npitch\n  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[<app.models.pitch.Pitch ...ject at 0x7734d2fd0250>], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.10/v/model_attributes_type", "module": "ai_melody_service", "function": "_parse_ai_response", "line": 379, "exception": {"type": "ValidationError", "message": "1 validation error for MelodyNotePitch\npitch\n  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[<app.models.pitch.Pitch ...ject at 0x7734d2fd0250>], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.10/v/model_attributes_type", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 357, in _parse_ai_response\n    melody_note = MelodyNotePitch(\n                  ^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/pydantic/main.py\", line 214, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\npydantic_core._pydantic_core.ValidationError: 1 validation error for MelodyNotePitch\npitch\n  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[<app.models.pitch.Pitch ...ject at 0x7734d2fd0250>], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.10/v/model_attributes_type"}}
{"timestamp": "2025-04-22T08:06:16.045959", "level": "ERROR", "message": "Error generating AI melody: 1 validation error for MelodyNotePitch\npitch\n  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[<app.models.pitch.Pitch ...ject at 0x7734d2fd0250>], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.10/v/model_attributes_type", "module": "ai_melody_service", "function": "_generate_ai_melody", "line": 115, "exception": {"type": "ValidationError", "message": "1 validation error for MelodyNotePitch\npitch\n  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[<app.models.pitch.Pitch ...ject at 0x7734d2fd0250>], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.10/v/model_attributes_type", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 110, in _generate_ai_melody\n    melody = self._parse_ai_response({}, request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 357, in _parse_ai_response\n    melody_note = MelodyNotePitch(\n                  ^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/pydantic/main.py\", line 214, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\npydantic_core._pydantic_core.ValidationError: 1 validation error for MelodyNotePitch\npitch\n  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[<app.models.pitch.Pitch ...ject at 0x7734d2fd0250>], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.10/v/model_attributes_type"}}
{"timestamp": "2025-04-22T08:06:16.049193", "level": "ERROR", "message": "Error generating AI melody question: 1 validation error for MelodyNotePitch\npitch\n  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[<app.models.pitch.Pitch ...ject at 0x7734d2fd0250>], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.10/v/model_attributes_type", "module": "ai_melody_service", "function": "generate_melody_question", "line": 92, "exception": {"type": "ValidationError", "message": "1 validation error for MelodyNotePitch\npitch\n  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[<app.models.pitch.Pitch ...ject at 0x7734d2fd0250>], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.10/v/model_attributes_type", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 41, in generate_melody_question\n    correct_melody = await self._generate_ai_melody(request)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 110, in _generate_ai_melody\n    melody = self._parse_ai_response({}, request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 357, in _parse_ai_response\n    melody_note = MelodyNotePitch(\n                  ^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/pydantic/main.py\", line 214, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\npydantic_core._pydantic_core.ValidationError: 1 validation error for MelodyNotePitch\npitch\n  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[<app.models.pitch.Pitch ...ject at 0x7734d2fd0250>], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.10/v/model_attributes_type"}}
{"timestamp": "2025-04-22T08:06:16.050626", "level": "ERROR", "message": "Error in generate_ai_melody_question : 1 validation error for MelodyNotePitch\npitch\n  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[<app.models.pitch.Pitch ...ject at 0x7734d2fd0250>], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.10/v/model_attributes_type\nTraceback: Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/api/v1/melody_api.py\", line 49, in generate_ai_melody_question\n    return await ai_melody_service.generate_melody_question(melody_question_request)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 41, in generate_melody_question\n    correct_melody = await self._generate_ai_melody(request)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 110, in _generate_ai_melody\n    melody = self._parse_ai_response({}, request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 357, in _parse_ai_response\n    melody_note = MelodyNotePitch(\n                  ^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/pydantic/main.py\", line 214, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\npydantic_core._pydantic_core.ValidationError: 1 validation error for MelodyNotePitch\npitch\n  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[<app.models.pitch.Pitch ...ject at 0x7734d2fd0250>], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.10/v/model_attributes_type\n", "module": "melody_api", "function": "generate_ai_melody_question", "line": 52}
{"timestamp": "2025-04-22T08:07:36.763362", "level": "ERROR", "message": "Error parsing AI response: 1 validation error for MelodyNotePitch\npitch\n  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[<app.models.pitch.Pitch ...ject at 0x7734d2fd0250>], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.10/v/model_attributes_type", "module": "ai_melody_service", "function": "_parse_ai_response", "line": 379, "exception": {"type": "ValidationError", "message": "1 validation error for MelodyNotePitch\npitch\n  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[<app.models.pitch.Pitch ...ject at 0x7734d2fd0250>], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.10/v/model_attributes_type", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 357, in _parse_ai_response\n    melody_note = MelodyNotePitch(\n                  ^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/pydantic/main.py\", line 214, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\npydantic_core._pydantic_core.ValidationError: 1 validation error for MelodyNotePitch\npitch\n  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[<app.models.pitch.Pitch ...ject at 0x7734d2fd0250>], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.10/v/model_attributes_type"}}
{"timestamp": "2025-04-22T08:08:21.848311", "level": "ERROR", "message": "Error generating AI melody: 1 validation error for MelodyNotePitch\npitch\n  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[<app.models.pitch.Pitch ...ject at 0x7734d2fd0250>], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.10/v/model_attributes_type", "module": "ai_melody_service", "function": "_generate_ai_melody", "line": 115, "exception": {"type": "ValidationError", "message": "1 validation error for MelodyNotePitch\npitch\n  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[<app.models.pitch.Pitch ...ject at 0x7734d2fd0250>], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.10/v/model_attributes_type", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 110, in _generate_ai_melody\n    melody = self._parse_ai_response({}, request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 357, in _parse_ai_response\n    melody_note = MelodyNotePitch(\n                  ^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/pydantic/main.py\", line 214, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\npydantic_core._pydantic_core.ValidationError: 1 validation error for MelodyNotePitch\npitch\n  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[<app.models.pitch.Pitch ...ject at 0x7734d2fd0250>], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.10/v/model_attributes_type"}}
{"timestamp": "2025-04-22T08:08:21.857742", "level": "ERROR", "message": "Error generating AI melody question: 1 validation error for MelodyNotePitch\npitch\n  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[<app.models.pitch.Pitch ...ject at 0x7734d2fd0250>], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.10/v/model_attributes_type", "module": "ai_melody_service", "function": "generate_melody_question", "line": 92, "exception": {"type": "ValidationError", "message": "1 validation error for MelodyNotePitch\npitch\n  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[<app.models.pitch.Pitch ...ject at 0x7734d2fd0250>], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.10/v/model_attributes_type", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 41, in generate_melody_question\n    correct_melody = await self._generate_ai_melody(request)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 110, in _generate_ai_melody\n    melody = self._parse_ai_response({}, request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 357, in _parse_ai_response\n    melody_note = MelodyNotePitch(\n                  ^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/pydantic/main.py\", line 214, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\npydantic_core._pydantic_core.ValidationError: 1 validation error for MelodyNotePitch\npitch\n  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[<app.models.pitch.Pitch ...ject at 0x7734d2fd0250>], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.10/v/model_attributes_type"}}
{"timestamp": "2025-04-22T08:08:21.861179", "level": "ERROR", "message": "Error in generate_ai_melody_question : 1 validation error for MelodyNotePitch\npitch\n  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[<app.models.pitch.Pitch ...ject at 0x7734d2fd0250>], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.10/v/model_attributes_type\nTraceback: Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/api/v1/melody_api.py\", line 49, in generate_ai_melody_question\n    return await ai_melody_service.generate_melody_question(melody_question_request)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 41, in generate_melody_question\n    correct_melody = await self._generate_ai_melody(request)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 110, in _generate_ai_melody\n    melody = self._parse_ai_response({}, request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 357, in _parse_ai_response\n    melody_note = MelodyNotePitch(\n                  ^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/pydantic/main.py\", line 214, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\npydantic_core._pydantic_core.ValidationError: 1 validation error for MelodyNotePitch\npitch\n  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[<app.models.pitch.Pitch ...ject at 0x7734d2fd0250>], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.10/v/model_attributes_type\n", "module": "melody_api", "function": "generate_ai_melody_question", "line": 52}
{"timestamp": "2025-04-22T08:09:24.312400", "level": "ERROR", "message": "Error generating AI melody question: 'AIMelodyService' object has no attribute '_is_unique_melody'", "module": "ai_melody_service", "function": "generate_melody_question", "line": 92, "exception": {"type": "AttributeError", "message": "'AIMelodyService' object has no attribute '_is_unique_melody'", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 51, in generate_melody_question\n    if self._is_unique_melody(wrong_melody, unique_wrong_options) and self._is_unique_melody(wrong_melody, [correct_melody]):\n       ^^^^^^^^^^^^^^^^^^^^^^\nAttributeError: 'AIMelodyService' object has no attribute '_is_unique_melody'"}}
{"timestamp": "2025-04-22T08:09:24.314463", "level": "ERROR", "message": "Error in generate_ai_melody_question : 'AIMelodyService' object has no attribute '_is_unique_melody'\nTraceback: Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/api/v1/melody_api.py\", line 49, in generate_ai_melody_question\n    return await ai_melody_service.generate_melody_question(melody_question_request)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 51, in generate_melody_question\n    if self._is_unique_melody(wrong_melody, unique_wrong_options) and self._is_unique_melody(wrong_melody, [correct_melody]):\n       ^^^^^^^^^^^^^^^^^^^^^^\nAttributeError: 'AIMelodyService' object has no attribute '_is_unique_melody'\n", "module": "melody_api", "function": "generate_ai_melody_question", "line": 52}
{"timestamp": "2025-04-22T08:19:09.854168", "level": "ERROR", "message": "Error parsing AI response: Expecting value: line 1 column 1 (char 0)", "module": "ai_melody_service", "function": "_parse_ai_response", "line": 379, "exception": {"type": "JSONDecodeError", "message": "Expecting value: line 1 column 1 (char 0)", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 216, in _parse_ai_response\n    melody_data = json.loads(response[\"choices\"][0][\"message\"][\"content\"])\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 355, in raw_decode\n    raise JSONDecodeError(\"Expecting value\", s, err.value) from None\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)"}}
{"timestamp": "2025-04-22T08:19:09.857739", "level": "ERROR", "message": "Error generating AI melody: Expecting value: line 1 column 1 (char 0)", "module": "ai_melody_service", "function": "_generate_ai_melody", "line": 115, "exception": {"type": "JSONDecodeError", "message": "Expecting value: line 1 column 1 (char 0)", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 109, in _generate_ai_melody\n    melody = self._parse_ai_response(response, request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 216, in _parse_ai_response\n    melody_data = json.loads(response[\"choices\"][0][\"message\"][\"content\"])\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 355, in raw_decode\n    raise JSONDecodeError(\"Expecting value\", s, err.value) from None\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)"}}
{"timestamp": "2025-04-22T08:19:09.859947", "level": "ERROR", "message": "Error generating AI melody question: Expecting value: line 1 column 1 (char 0)", "module": "ai_melody_service", "function": "generate_melody_question", "line": 92, "exception": {"type": "JSONDecodeError", "message": "Expecting value: line 1 column 1 (char 0)", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 41, in generate_melody_question\n    correct_melody = await self._generate_ai_melody(request)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 109, in _generate_ai_melody\n    melody = self._parse_ai_response(response, request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 216, in _parse_ai_response\n    melody_data = json.loads(response[\"choices\"][0][\"message\"][\"content\"])\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 355, in raw_decode\n    raise JSONDecodeError(\"Expecting value\", s, err.value) from None\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)"}}
{"timestamp": "2025-04-22T08:19:09.860946", "level": "ERROR", "message": "Error in generate_ai_melody_question : Expecting value: line 1 column 1 (char 0)\nTraceback: Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/api/v1/melody_api.py\", line 49, in generate_ai_melody_question\n    return await ai_melody_service.generate_melody_question(melody_question_request)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 41, in generate_melody_question\n    correct_melody = await self._generate_ai_melody(request)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 109, in _generate_ai_melody\n    melody = self._parse_ai_response(response, request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 216, in _parse_ai_response\n    melody_data = json.loads(response[\"choices\"][0][\"message\"][\"content\"])\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 355, in raw_decode\n    raise JSONDecodeError(\"Expecting value\", s, err.value) from None\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n", "module": "melody_api", "function": "generate_ai_melody_question", "line": 52}
{"timestamp": "2025-04-22T08:51:39.691808", "level": "ERROR", "message": "Error generating AI melody: type object 'datetime.time' has no attribute 'time'", "module": "ai_melody_service", "function": "_generate_ai_melody", "line": 116, "exception": {"type": "AttributeError", "message": "type object 'datetime.time' has no attribute 'time'", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 106, in _generate_ai_melody\n    response = await self._call_deepseek_api(prompt)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 182, in _call_deepseek_api\n    start_time = time.time()\n                 ^^^^^^^^^\nAttributeError: type object 'datetime.time' has no attribute 'time'"}}
{"timestamp": "2025-04-22T08:51:39.692934", "level": "ERROR", "message": "Error generating AI melody question: type object 'datetime.time' has no attribute 'time'", "module": "ai_melody_service", "function": "generate_melody_question", "line": 93, "exception": {"type": "AttributeError", "message": "type object 'datetime.time' has no attribute 'time'", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 42, in generate_melody_question\n    correct_melody = await self._generate_ai_melody(request)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 106, in _generate_ai_melody\n    response = await self._call_deepseek_api(prompt)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 182, in _call_deepseek_api\n    start_time = time.time()\n                 ^^^^^^^^^\nAttributeError: type object 'datetime.time' has no attribute 'time'"}}
{"timestamp": "2025-04-22T08:51:39.693649", "level": "ERROR", "message": "Error in generate_ai_melody_question : type object 'datetime.time' has no attribute 'time'\nTraceback: Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/api/v1/melody_api.py\", line 49, in generate_ai_melody_question\n    return await ai_melody_service.generate_melody_question(melody_question_request)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 42, in generate_melody_question\n    correct_melody = await self._generate_ai_melody(request)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 106, in _generate_ai_melody\n    response = await self._call_deepseek_api(prompt)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 182, in _call_deepseek_api\n    start_time = time.time()\n                 ^^^^^^^^^\nAttributeError: type object 'datetime.time' has no attribute 'time'\n", "module": "melody_api", "function": "generate_ai_melody_question", "line": 52}
{"timestamp": "2025-04-22T08:57:27.398378", "level": "ERROR", "message": "Error parsing AI response: Unterminated string starting at: line 90 column 25 (char 2784)", "module": "ai_melody_service", "function": "_parse_ai_response", "line": 383, "exception": {"type": "JSONDecodeError", "message": "Unterminated string starting at: line 90 column 25 (char 2784)", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 220, in _parse_ai_response\n    melody_data = json.loads(cleaned_content)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 353, in raw_decode\n    obj, end = self.scan_once(s, idx)\n               ^^^^^^^^^^^^^^^^^^^^^^\njson.decoder.JSONDecodeError: Unterminated string starting at: line 90 column 25 (char 2784)"}}
{"timestamp": "2025-04-22T08:57:27.401775", "level": "ERROR", "message": "Error generating AI melody: Unterminated string starting at: line 90 column 25 (char 2784)", "module": "ai_melody_service", "function": "_generate_ai_melody", "line": 116, "exception": {"type": "JSONDecodeError", "message": "Unterminated string starting at: line 90 column 25 (char 2784)", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 110, in _generate_ai_melody\n    melody = self._parse_ai_response(response, request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 220, in _parse_ai_response\n    melody_data = json.loads(cleaned_content)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 353, in raw_decode\n    obj, end = self.scan_once(s, idx)\n               ^^^^^^^^^^^^^^^^^^^^^^\njson.decoder.JSONDecodeError: Unterminated string starting at: line 90 column 25 (char 2784)"}}
{"timestamp": "2025-04-22T08:57:27.404268", "level": "ERROR", "message": "Error generating AI melody question: Unterminated string starting at: line 90 column 25 (char 2784)", "module": "ai_melody_service", "function": "generate_melody_question", "line": 93, "exception": {"type": "JSONDecodeError", "message": "Unterminated string starting at: line 90 column 25 (char 2784)", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 42, in generate_melody_question\n    correct_melody = await self._generate_ai_melody(request)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 110, in _generate_ai_melody\n    melody = self._parse_ai_response(response, request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 220, in _parse_ai_response\n    melody_data = json.loads(cleaned_content)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 353, in raw_decode\n    obj, end = self.scan_once(s, idx)\n               ^^^^^^^^^^^^^^^^^^^^^^\njson.decoder.JSONDecodeError: Unterminated string starting at: line 90 column 25 (char 2784)"}}
{"timestamp": "2025-04-22T08:57:27.405317", "level": "ERROR", "message": "Error in generate_ai_melody_question : Unterminated string starting at: line 90 column 25 (char 2784)\nTraceback: Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/api/v1/melody_api.py\", line 49, in generate_ai_melody_question\n    return await ai_melody_service.generate_melody_question(melody_question_request)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 42, in generate_melody_question\n    correct_melody = await self._generate_ai_melody(request)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 110, in _generate_ai_melody\n    melody = self._parse_ai_response(response, request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 220, in _parse_ai_response\n    melody_data = json.loads(cleaned_content)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 353, in raw_decode\n    obj, end = self.scan_once(s, idx)\n               ^^^^^^^^^^^^^^^^^^^^^^\njson.decoder.JSONDecodeError: Unterminated string starting at: line 90 column 25 (char 2784)\n", "module": "melody_api", "function": "generate_ai_melody_question", "line": 52}
{"timestamp": "2025-04-22T08:58:54.235755", "level": "ERROR", "message": "Error parsing AI response: Unterminated string starting at: line 85 column 25 (char 2741)", "module": "ai_melody_service", "function": "_parse_ai_response", "line": 384, "exception": {"type": "JSONDecodeError", "message": "Unterminated string starting at: line 85 column 25 (char 2741)", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 221, in _parse_ai_response\n    melody_data = json.loads(cleaned_content)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 353, in raw_decode\n    obj, end = self.scan_once(s, idx)\n               ^^^^^^^^^^^^^^^^^^^^^^\njson.decoder.JSONDecodeError: Unterminated string starting at: line 85 column 25 (char 2741)"}}
{"timestamp": "2025-04-22T08:58:54.238710", "level": "ERROR", "message": "Error generating AI melody: Unterminated string starting at: line 85 column 25 (char 2741)", "module": "ai_melody_service", "function": "_generate_ai_melody", "line": 116, "exception": {"type": "JSONDecodeError", "message": "Unterminated string starting at: line 85 column 25 (char 2741)", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 110, in _generate_ai_melody\n    melody = self._parse_ai_response(response, request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 221, in _parse_ai_response\n    melody_data = json.loads(cleaned_content)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 353, in raw_decode\n    obj, end = self.scan_once(s, idx)\n               ^^^^^^^^^^^^^^^^^^^^^^\njson.decoder.JSONDecodeError: Unterminated string starting at: line 85 column 25 (char 2741)"}}
{"timestamp": "2025-04-22T08:58:54.240909", "level": "ERROR", "message": "Error generating AI melody question: Unterminated string starting at: line 85 column 25 (char 2741)", "module": "ai_melody_service", "function": "generate_melody_question", "line": 93, "exception": {"type": "JSONDecodeError", "message": "Unterminated string starting at: line 85 column 25 (char 2741)", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 42, in generate_melody_question\n    correct_melody = await self._generate_ai_melody(request)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 110, in _generate_ai_melody\n    melody = self._parse_ai_response(response, request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 221, in _parse_ai_response\n    melody_data = json.loads(cleaned_content)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 353, in raw_decode\n    obj, end = self.scan_once(s, idx)\n               ^^^^^^^^^^^^^^^^^^^^^^\njson.decoder.JSONDecodeError: Unterminated string starting at: line 85 column 25 (char 2741)"}}
{"timestamp": "2025-04-22T08:58:54.241830", "level": "ERROR", "message": "Error in generate_ai_melody_question : Unterminated string starting at: line 85 column 25 (char 2741)\nTraceback: Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/api/v1/melody_api.py\", line 49, in generate_ai_melody_question\n    return await ai_melody_service.generate_melody_question(melody_question_request)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 42, in generate_melody_question\n    correct_melody = await self._generate_ai_melody(request)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 110, in _generate_ai_melody\n    melody = self._parse_ai_response(response, request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 221, in _parse_ai_response\n    melody_data = json.loads(cleaned_content)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 353, in raw_decode\n    obj, end = self.scan_once(s, idx)\n               ^^^^^^^^^^^^^^^^^^^^^^\njson.decoder.JSONDecodeError: Unterminated string starting at: line 85 column 25 (char 2741)\n", "module": "melody_api", "function": "generate_ai_melody_question", "line": 52}
{"timestamp": "2025-04-22T09:08:20.076220", "level": "ERROR", "message": "Error parsing AI response: 'is_rest'", "module": "ai_melody_service", "function": "_parse_ai_response", "line": 384, "exception": {"type": "KeyError", "message": "'is_rest'", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 365, in _parse_ai_response\n    is_rest = False if note_data[\"is_rest\"] is None else True,\n                       ~~~~~~~~~^^^^^^^^^^^\nKeyError: 'is_rest'"}}
{"timestamp": "2025-04-22T09:08:20.080906", "level": "ERROR", "message": "Error generating AI melody: 'is_rest'", "module": "ai_melody_service", "function": "_generate_ai_melody", "line": 116, "exception": {"type": "KeyError", "message": "'is_rest'", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 110, in _generate_ai_melody\n    melody = self._parse_ai_response(response, request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 365, in _parse_ai_response\n    is_rest = False if note_data[\"is_rest\"] is None else True,\n                       ~~~~~~~~~^^^^^^^^^^^\nKeyError: 'is_rest'"}}
{"timestamp": "2025-04-22T09:08:20.082810", "level": "ERROR", "message": "Error generating AI melody question: 'is_rest'", "module": "ai_melody_service", "function": "generate_melody_question", "line": 93, "exception": {"type": "KeyError", "message": "'is_rest'", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 42, in generate_melody_question\n    correct_melody = await self._generate_ai_melody(request)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 110, in _generate_ai_melody\n    melody = self._parse_ai_response(response, request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 365, in _parse_ai_response\n    is_rest = False if note_data[\"is_rest\"] is None else True,\n                       ~~~~~~~~~^^^^^^^^^^^\nKeyError: 'is_rest'"}}
{"timestamp": "2025-04-22T09:08:20.083709", "level": "ERROR", "message": "Error in generate_ai_melody_question : 'is_rest'\nTraceback: Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/api/v1/melody_api.py\", line 49, in generate_ai_melody_question\n    return await ai_melody_service.generate_melody_question(melody_question_request)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 42, in generate_melody_question\n    correct_melody = await self._generate_ai_melody(request)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 110, in _generate_ai_melody\n    melody = self._parse_ai_response(response, request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 365, in _parse_ai_response\n    is_rest = False if note_data[\"is_rest\"] is None else True,\n                       ~~~~~~~~~^^^^^^^^^^^\nKeyError: 'is_rest'\n", "module": "melody_api", "function": "generate_ai_melody_question", "line": 52}
{"timestamp": "2025-04-25T07:57:52.009770", "level": "ERROR", "message": "Error in get_all_pitches: 'PitchGroup' object has no attribute 'pitch_pairs'\nTraceback: Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/api/v1/exam_api.py\", line 50, in get_exam_settings\n    single_setting = await pitch_settings_service.get_pitch_single_settings()\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/pitch_settings_service.py\", line 33, in get_pitch_single_settings\n    list=default_group.pitch_pairs\n         ^^^^^^^^^^^^^^^^^^^^^^^^^\nAttributeError: 'PitchGroup' object has no attribute 'pitch_pairs'\n", "module": "exam_api", "function": "get_exam_settings", "line": 86}
{"timestamp": "2025-04-25T08:04:47.566586", "level": "ERROR", "message": "Error in get_all_pitches: 'PitchGroup' object has no attribute 'pitch_pairs'\nTraceback: Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/api/v1/exam_api.py\", line 51, in get_exam_settings\n    single_setting = await pitch_settings_service.get_pitch_single_settings()\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/pitch_settings_service.py\", line 33, in get_pitch_single_settings\n    list=default_group.pitch_pairs\n         ^^^^^^^^^^^^^^^^^^^^^^^^^\nAttributeError: 'PitchGroup' object has no attribute 'pitch_pairs'\n", "module": "exam_api", "function": "get_exam_settings", "line": 87}
{"timestamp": "2025-04-25T08:05:27.194248", "level": "ERROR", "message": "Error in get_all_pitches: 'PitchGroup' object has no attribute 'pitch_pairs'\nTraceback: Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/api/v1/exam_api.py\", line 51, in get_exam_settings\n    single_setting = await pitch_settings_service.get_pitch_single_settings()\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/pitch_settings_service.py\", line 33, in get_pitch_single_settings\n    list=default_group.pitch_pairs\n         ^^^^^^^^^^^^^^^^^^^^^^^^^\nAttributeError: 'PitchGroup' object has no attribute 'pitch_pairs'\n", "module": "exam_api", "function": "get_exam_settings", "line": 86}
{"timestamp": "2025-04-25T08:11:28.116889", "level": "ERROR", "message": "Request failed", "module": "logging", "function": "dispatch", "line": 57, "exception": {"type": "NameError", "message": "name 'settings' is not defined", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/anyio/streams/memory.py\", line 98, in receive\n    return self.receive_nowait()\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/anyio/streams/memory.py\", line 93, in receive_nowait\n    raise WouldBlock\nanyio.WouldBlock\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/base.py\", line 78, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/anyio/streams/memory.py\", line 118, in receive\n    raise EndOfStream\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/middleware/logging.py\", line 34, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/base.py\", line 84, in call_next\n    raise app_exc\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/base.py\", line 70, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 83, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 79, in __call__\n    raise exc\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 68, in __call__\n    await self.app(scope, receive, sender)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 20, in __call__\n    raise e\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 17, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/routing.py\", line 718, in __call__\n    await route.handle(scope, receive, send)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/routing.py\", line 276, in handle\n    await self.app(scope, receive, send)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/routing.py\", line 66, in app\n    response = await func(request)\n               ^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/fastapi/routing.py\", line 274, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/fastapi/routing.py\", line 191, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/api/v1/exam_api.py\", line 94, in get_exam_settings\n    return settings\n           ^^^^^^^^\nNameError: name 'settings' is not defined"}, "request_id": "ae5aa3d7-314f-442f-b9bf-225981fd953e", "path": "/api/v1/exam/settings", "method": "GET"}
{"timestamp": "2025-04-26T03:29:43.343871", "level": "ERROR", "message": "Error in generate_exam : PitchService.generate_interval_exam_concordance() missing 4 required positional arguments: 'play_mode', 'fix_mode_enabled', 'fix_mode', and 'fix_mode_val'\nTraceback: Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/api/v1/exam_api.py\", line 47, in generate_exam\n    interval = await pitch_service.generate_interval_exam(exam_request.pitch_interval_setting, 5)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/pitch_service.py\", line 384, in generate_interval_exam\n    questions= self.generate_interval_exam_concordance(interval_ids, question_num)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nTypeError: PitchService.generate_interval_exam_concordance() missing 4 required positional arguments: 'play_mode', 'fix_mode_enabled', 'fix_mode', and 'fix_mode_val'\n", "module": "exam_api", "function": "generate_exam", "line": 78}
{"timestamp": "2025-04-26T03:34:12.318680", "level": "ERROR", "message": "Error in generate_exam : PitchService.generate_interval_exam_concordance() missing 4 required positional arguments: 'play_mode', 'fix_mode_enabled', 'fix_mode', and 'fix_mode_val'\nTraceback: Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/api/v1/exam_api.py\", line 47, in generate_exam\n    interval = await pitch_service.generate_interval_exam(exam_request.pitch_interval_setting, 5)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/pitch_service.py\", line 384, in generate_interval_exam\n    questions= self.generate_interval_exam_concordance(interval_ids, question_num)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nTypeError: PitchService.generate_interval_exam_concordance() missing 4 required positional arguments: 'play_mode', 'fix_mode_enabled', 'fix_mode', and 'fix_mode_val'\n", "module": "exam_api", "function": "generate_exam", "line": 78}
{"timestamp": "2025-04-26T04:35:55.994389", "level": "ERROR", "message": "Error in generate_exam : 'coroutine' object has no attribute 'measures'\nTraceback: Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/api/v1/exam_api.py\", line 58, in generate_exam\n    melody = await melody_service.generate_melody(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/melody_service.py\", line 101, in generate_melody\n    for measure_group in rhythm.measures:\n                         ^^^^^^^^^^^^^^^\nAttributeError: 'coroutine' object has no attribute 'measures'\n", "module": "exam_api", "function": "generate_exam", "line": 78}
{"timestamp": "2025-04-26T04:36:41.114857", "level": "ERROR", "message": "Error in generate_exam : ExamData.__init__() got an unexpected keyword argument 'rhythm'\nTraceback: Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/api/v1/exam_api.py\", line 67, in generate_exam\n    exam = ExamData(\n           ^^^^^^^^^\nTypeError: ExamData.__init__() got an unexpected keyword argument 'rhythm'\n", "module": "exam_api", "function": "generate_exam", "line": 78}
{"timestamp": "2025-04-26T04:37:34.204867", "level": "ERROR", "message": "Request failed", "module": "logging", "function": "dispatch", "line": 57, "exception": {"type": "ResponseValidationError", "message": "1 validation errors:\n  {'type': 'model_attributes_type', 'loc': ('response',), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': None, 'url': 'https://errors.pydantic.dev/2.10/v/model_attributes_type'}\n", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/anyio/streams/memory.py\", line 98, in receive\n    return self.receive_nowait()\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/anyio/streams/memory.py\", line 93, in receive_nowait\n    raise WouldBlock\nanyio.WouldBlock\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/base.py\", line 78, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/anyio/streams/memory.py\", line 118, in receive\n    raise EndOfStream\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/middleware/logging.py\", line 34, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/base.py\", line 84, in call_next\n    raise app_exc\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/base.py\", line 70, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 83, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 79, in __call__\n    raise exc\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 68, in __call__\n    await self.app(scope, receive, sender)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 20, in __call__\n    raise e\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 17, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/routing.py\", line 718, in __call__\n    await route.handle(scope, receive, send)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/routing.py\", line 276, in handle\n    await self.app(scope, receive, send)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/routing.py\", line 66, in app\n    response = await func(request)\n               ^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/fastapi/routing.py\", line 292, in app\n    content = await serialize_response(\n              ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/fastapi/routing.py\", line 155, in serialize_response\n    raise ResponseValidationError(\nfastapi.exceptions.ResponseValidationError: 1 validation errors:\n  {'type': 'model_attributes_type', 'loc': ('response',), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': None, 'url': 'https://errors.pydantic.dev/2.10/v/model_attributes_type'}\n"}, "request_id": "4792aaf5-0946-4e92-b41e-015d44e4ba2e", "path": "/api/v1/exam", "method": "POST"}
{"timestamp": "2025-04-26T04:40:18.118273", "level": "ERROR", "message": "Request failed", "module": "logging", "function": "dispatch", "line": 57, "exception": {"type": "ResponseValidationError", "message": "1 validation errors:\n  {'type': 'model_attributes_type', 'loc': ('response',), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': None, 'url': 'https://errors.pydantic.dev/2.10/v/model_attributes_type'}\n", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/anyio/streams/memory.py\", line 98, in receive\n    return self.receive_nowait()\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/anyio/streams/memory.py\", line 93, in receive_nowait\n    raise WouldBlock\nanyio.WouldBlock\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/base.py\", line 78, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/anyio/streams/memory.py\", line 118, in receive\n    raise EndOfStream\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/middleware/logging.py\", line 34, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/base.py\", line 84, in call_next\n    raise app_exc\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/base.py\", line 70, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 83, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 79, in __call__\n    raise exc\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 68, in __call__\n    await self.app(scope, receive, sender)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 20, in __call__\n    raise e\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 17, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/routing.py\", line 718, in __call__\n    await route.handle(scope, receive, send)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/routing.py\", line 276, in handle\n    await self.app(scope, receive, send)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/routing.py\", line 66, in app\n    response = await func(request)\n               ^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/fastapi/routing.py\", line 292, in app\n    content = await serialize_response(\n              ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/fastapi/routing.py\", line 155, in serialize_response\n    raise ResponseValidationError(\nfastapi.exceptions.ResponseValidationError: 1 validation errors:\n  {'type': 'model_attributes_type', 'loc': ('response',), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': None, 'url': 'https://errors.pydantic.dev/2.10/v/model_attributes_type'}\n"}, "request_id": "6998f440-a8dc-48b7-8282-d5b87508ad37", "path": "/api/v1/exam", "method": "POST"}
{"timestamp": "2025-04-26T04:41:26.329968", "level": "ERROR", "message": "Request failed", "module": "logging", "function": "dispatch", "line": 57, "exception": {"type": "ResponseValidationError", "message": "1 validation errors:\n  {'type': 'model_attributes_type', 'loc': ('response',), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': None, 'url': 'https://errors.pydantic.dev/2.10/v/model_attributes_type'}\n", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/anyio/streams/memory.py\", line 98, in receive\n    return self.receive_nowait()\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/anyio/streams/memory.py\", line 93, in receive_nowait\n    raise WouldBlock\nanyio.WouldBlock\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/base.py\", line 78, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/anyio/streams/memory.py\", line 118, in receive\n    raise EndOfStream\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/middleware/logging.py\", line 34, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/base.py\", line 84, in call_next\n    raise app_exc\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/base.py\", line 70, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 83, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 79, in __call__\n    raise exc\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 68, in __call__\n    await self.app(scope, receive, sender)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 20, in __call__\n    raise e\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 17, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/routing.py\", line 718, in __call__\n    await route.handle(scope, receive, send)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/routing.py\", line 276, in handle\n    await self.app(scope, receive, send)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/routing.py\", line 66, in app\n    response = await func(request)\n               ^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/fastapi/routing.py\", line 292, in app\n    content = await serialize_response(\n              ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/fastapi/routing.py\", line 155, in serialize_response\n    raise ResponseValidationError(\nfastapi.exceptions.ResponseValidationError: 1 validation errors:\n  {'type': 'model_attributes_type', 'loc': ('response',), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': None, 'url': 'https://errors.pydantic.dev/2.10/v/model_attributes_type'}\n"}, "request_id": "2f64b56e-d0b8-44e9-b32c-e2d022d042d9", "path": "/api/v1/exam", "method": "POST"}
{"timestamp": "2025-04-26T04:41:59.391280", "level": "ERROR", "message": "Request failed", "module": "logging", "function": "dispatch", "line": 57, "exception": {"type": "ResponseValidationError", "message": "1 validation errors:\n  {'type': 'model_attributes_type', 'loc': ('response',), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': None, 'url': 'https://errors.pydantic.dev/2.10/v/model_attributes_type'}\n", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/anyio/streams/memory.py\", line 98, in receive\n    return self.receive_nowait()\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/anyio/streams/memory.py\", line 93, in receive_nowait\n    raise WouldBlock\nanyio.WouldBlock\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/base.py\", line 78, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/anyio/streams/memory.py\", line 118, in receive\n    raise EndOfStream\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/middleware/logging.py\", line 34, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/base.py\", line 84, in call_next\n    raise app_exc\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/base.py\", line 70, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 83, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 79, in __call__\n    raise exc\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 68, in __call__\n    await self.app(scope, receive, sender)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 20, in __call__\n    raise e\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 17, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/routing.py\", line 718, in __call__\n    await route.handle(scope, receive, send)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/routing.py\", line 276, in handle\n    await self.app(scope, receive, send)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/routing.py\", line 66, in app\n    response = await func(request)\n               ^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/fastapi/routing.py\", line 292, in app\n    content = await serialize_response(\n              ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/fastapi/routing.py\", line 155, in serialize_response\n    raise ResponseValidationError(\nfastapi.exceptions.ResponseValidationError: 1 validation errors:\n  {'type': 'model_attributes_type', 'loc': ('response',), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': None, 'url': 'https://errors.pydantic.dev/2.10/v/model_attributes_type'}\n"}, "request_id": "b9903d46-94dc-4d35-810a-5ff3cc712a74", "path": "/api/v1/exam", "method": "POST"}
{"timestamp": "2025-04-26T04:43:19.446326", "level": "ERROR", "message": "Request failed", "module": "logging", "function": "dispatch", "line": 57, "exception": {"type": "ResponseValidationError", "message": "1 validation errors:\n  {'type': 'model_attributes_type', 'loc': ('response',), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': None, 'url': 'https://errors.pydantic.dev/2.10/v/model_attributes_type'}\n", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/anyio/streams/memory.py\", line 98, in receive\n    return self.receive_nowait()\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/anyio/streams/memory.py\", line 93, in receive_nowait\n    raise WouldBlock\nanyio.WouldBlock\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/base.py\", line 78, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/anyio/streams/memory.py\", line 118, in receive\n    raise EndOfStream\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/middleware/logging.py\", line 34, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/base.py\", line 84, in call_next\n    raise app_exc\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/base.py\", line 70, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 83, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 79, in __call__\n    raise exc\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 68, in __call__\n    await self.app(scope, receive, sender)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 20, in __call__\n    raise e\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 17, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/routing.py\", line 718, in __call__\n    await route.handle(scope, receive, send)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/routing.py\", line 276, in handle\n    await self.app(scope, receive, send)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/routing.py\", line 66, in app\n    response = await func(request)\n               ^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/fastapi/routing.py\", line 292, in app\n    content = await serialize_response(\n              ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/fastapi/routing.py\", line 155, in serialize_response\n    raise ResponseValidationError(\nfastapi.exceptions.ResponseValidationError: 1 validation errors:\n  {'type': 'model_attributes_type', 'loc': ('response',), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': None, 'url': 'https://errors.pydantic.dev/2.10/v/model_attributes_type'}\n"}, "request_id": "8536930f-7952-4cc6-9841-3813475d4ce1", "path": "/api/v1/exam", "method": "POST"}
{"timestamp": "2025-04-26T04:44:45.567642", "level": "ERROR", "message": "Request failed", "module": "logging", "function": "dispatch", "line": 57, "exception": {"type": "ResponseValidationError", "message": "20 validation errors:\n  {'type': 'missing', 'loc': ('response', 'group', 'questions', 0, 'pitch'), 'msg': 'Field required', 'input': GroupQuestion(id=1, pitches=[<app.models.pitch.Pitch object at 0x771fef35be50>, <app.models.pitch.Pitch object at 0x771fef35ba50>]), 'url': 'https://errors.pydantic.dev/2.10/v/missing'}\n  {'type': 'missing', 'loc': ('response', 'group', 'questions', 1, 'pitch'), 'msg': 'Field required', 'input': GroupQuestion(id=2, pitches=[<app.models.pitch.Pitch object at 0x771fef35be50>, <app.models.pitch.Pitch object at 0x771fef35bd50>]), 'url': 'https://errors.pydantic.dev/2.10/v/missing'}\n  {'type': 'missing', 'loc': ('response', 'group', 'questions', 2, 'pitch'), 'msg': 'Field required', 'input': GroupQuestion(id=3, pitches=[<app.models.pitch.Pitch object at 0x771fef35be50>, <app.models.pitch.Pitch object at 0x771fef364050>]), 'url': 'https://errors.pydantic.dev/2.10/v/missing'}\n  {'type': 'missing', 'loc': ('response', 'group', 'questions', 3, 'pitch'), 'msg': 'Field required', 'input': GroupQuestion(id=4, pitches=[<app.models.pitch.Pitch object at 0x771fef364050>, <app.models.pitch.Pitch object at 0x771fef35bd50>]), 'url': 'https://errors.pydantic.dev/2.10/v/missing'}\n  {'type': 'missing', 'loc': ('response', 'group', 'questions', 4, 'pitch'), 'msg': 'Field required', 'input': GroupQuestion(id=5, pitches=[<app.models.pitch.Pitch object at 0x771fef35ba50>, <app.models.pitch.Pitch object at 0x771fef364050>]), 'url': 'https://errors.pydantic.dev/2.10/v/missing'}\n  {'type': 'missing', 'loc': ('response', 'group', 'questions', 5, 'pitch'), 'msg': 'Field required', 'input': GroupQuestion(id=6, pitches=[<app.models.pitch.Pitch object at 0x771fef35bd50>, <app.models.pitch.Pitch object at 0x771fef364050>]), 'url': 'https://errors.pydantic.dev/2.10/v/missing'}\n  {'type': 'missing', 'loc': ('response', 'group', 'questions', 6, 'pitch'), 'msg': 'Field required', 'input': GroupQuestion(id=7, pitches=[<app.models.pitch.Pitch object at 0x771fef35bd50>, <app.models.pitch.Pitch object at 0x771fef364050>]), 'url': 'https://errors.pydantic.dev/2.10/v/missing'}\n  {'type': 'missing', 'loc': ('response', 'group', 'questions', 7, 'pitch'), 'msg': 'Field required', 'input': GroupQuestion(id=8, pitches=[<app.models.pitch.Pitch object at 0x771fef35bd50>, <app.models.pitch.Pitch object at 0x771fef35bb90>]), 'url': 'https://errors.pydantic.dev/2.10/v/missing'}\n  {'type': 'missing', 'loc': ('response', 'group', 'questions', 8, 'pitch'), 'msg': 'Field required', 'input': GroupQuestion(id=9, pitches=[<app.models.pitch.Pitch object at 0x771fef35ba50>, <app.models.pitch.Pitch object at 0x771fef35bb90>]), 'url': 'https://errors.pydantic.dev/2.10/v/missing'}\n  {'type': 'missing', 'loc': ('response', 'group', 'questions', 9, 'pitch'), 'msg': 'Field required', 'input': GroupQuestion(id=10, pitches=[<app.models.pitch.Pitch object at 0x771fef35be50>, <app.models.pitch.Pitch object at 0x771fef35bd50>]), 'url': 'https://errors.pydantic.dev/2.10/v/missing'}\n  {'type': 'missing', 'loc': ('response', 'group', 'questions', 10, 'pitch'), 'msg': 'Field required', 'input': GroupQuestion(id=11, pitches=[<app.models.pitch.Pitch object at 0x771fef35bd50>, <app.models.pitch.Pitch object at 0x771fef35bd50>]), 'url': 'https://errors.pydantic.dev/2.10/v/missing'}\n  {'type': 'missing', 'loc': ('response', 'group', 'questions', 11, 'pitch'), 'msg': 'Field required', 'input': GroupQuestion(id=12, pitches=[<app.models.pitch.Pitch object at 0x771fef35bb90>, <app.models.pitch.Pitch object at 0x771fef35ba50>]), 'url': 'https://errors.pydantic.dev/2.10/v/missing'}\n  {'type': 'missing', 'loc': ('response', 'group', 'questions', 12, 'pitch'), 'msg': 'Field required', 'input': GroupQuestion(id=13, pitches=[<app.models.pitch.Pitch object at 0x771fef35ba50>, <app.models.pitch.Pitch object at 0x771fef35ba50>]), 'url': 'https://errors.pydantic.dev/2.10/v/missing'}\n  {'type': 'missing', 'loc': ('response', 'group', 'questions', 13, 'pitch'), 'msg': 'Field required', 'input': GroupQuestion(id=14, pitches=[<app.models.pitch.Pitch object at 0x771fef35bb90>, <app.models.pitch.Pitch object at 0x771fef35be50>]), 'url': 'https://errors.pydantic.dev/2.10/v/missing'}\n  {'type': 'missing', 'loc': ('response', 'group', 'questions', 14, 'pitch'), 'msg': 'Field required', 'input': GroupQuestion(id=15, pitches=[<app.models.pitch.Pitch object at 0x771fef35be50>, <app.models.pitch.Pitch object at 0x771fef35be50>]), 'url': 'https://errors.pydantic.dev/2.10/v/missing'}\n  {'type': 'missing', 'loc': ('response', 'group', 'questions', 15, 'pitch'), 'msg': 'Field required', 'input': GroupQuestion(id=16, pitches=[<app.models.pitch.Pitch object at 0x771fef35be50>, <app.models.pitch.Pitch object at 0x771fef35ba50>]), 'url': 'https://errors.pydantic.dev/2.10/v/missing'}\n  {'type': 'missing', 'loc': ('response', 'group', 'questions', 16, 'pitch'), 'msg': 'Field required', 'input': GroupQuestion(id=17, pitches=[<app.models.pitch.Pitch object at 0x771fef35be50>, <app.models.pitch.Pitch object at 0x771fef35ba50>]), 'url': 'https://errors.pydantic.dev/2.10/v/missing'}\n  {'type': 'missing', 'loc': ('response', 'group', 'questions', 17, 'pitch'), 'msg': 'Field required', 'input': GroupQuestion(id=18, pitches=[<app.models.pitch.Pitch object at 0x771fef35be50>, <app.models.pitch.Pitch object at 0x771fef364050>]), 'url': 'https://errors.pydantic.dev/2.10/v/missing'}\n  {'type': 'missing', 'loc': ('response', 'group', 'questions', 18, 'pitch'), 'msg': 'Field required', 'input': GroupQuestion(id=19, pitches=[<app.models.pitch.Pitch object at 0x771fef35ba50>, <app.models.pitch.Pitch object at 0x771fef364050>]), 'url': 'https://errors.pydantic.dev/2.10/v/missing'}\n  {'type': 'missing', 'loc': ('response', 'group', 'questions', 19, 'pitch'), 'msg': 'Field required', 'input': GroupQuestion(id=20, pitches=[<app.models.pitch.Pitch object at 0x771fef364050>, <app.models.pitch.Pitch object at 0x771fef35ba50>]), 'url': 'https://errors.pydantic.dev/2.10/v/missing'}\n", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/anyio/streams/memory.py\", line 98, in receive\n    return self.receive_nowait()\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/anyio/streams/memory.py\", line 93, in receive_nowait\n    raise WouldBlock\nanyio.WouldBlock\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/base.py\", line 78, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/anyio/streams/memory.py\", line 118, in receive\n    raise EndOfStream\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/middleware/logging.py\", line 34, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/base.py\", line 84, in call_next\n    raise app_exc\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/base.py\", line 70, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 83, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 79, in __call__\n    raise exc\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 68, in __call__\n    await self.app(scope, receive, sender)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 20, in __call__\n    raise e\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 17, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/routing.py\", line 718, in __call__\n    await route.handle(scope, receive, send)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/routing.py\", line 276, in handle\n    await self.app(scope, receive, send)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/routing.py\", line 66, in app\n    response = await func(request)\n               ^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/fastapi/routing.py\", line 292, in app\n    content = await serialize_response(\n              ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/fastapi/routing.py\", line 155, in serialize_response\n    raise ResponseValidationError(\nfastapi.exceptions.ResponseValidationError: 20 validation errors:\n  {'type': 'missing', 'loc': ('response', 'group', 'questions', 0, 'pitch'), 'msg': 'Field required', 'input': GroupQuestion(id=1, pitches=[<app.models.pitch.Pitch object at 0x771fef35be50>, <app.models.pitch.Pitch object at 0x771fef35ba50>]), 'url': 'https://errors.pydantic.dev/2.10/v/missing'}\n  {'type': 'missing', 'loc': ('response', 'group', 'questions', 1, 'pitch'), 'msg': 'Field required', 'input': GroupQuestion(id=2, pitches=[<app.models.pitch.Pitch object at 0x771fef35be50>, <app.models.pitch.Pitch object at 0x771fef35bd50>]), 'url': 'https://errors.pydantic.dev/2.10/v/missing'}\n  {'type': 'missing', 'loc': ('response', 'group', 'questions', 2, 'pitch'), 'msg': 'Field required', 'input': GroupQuestion(id=3, pitches=[<app.models.pitch.Pitch object at 0x771fef35be50>, <app.models.pitch.Pitch object at 0x771fef364050>]), 'url': 'https://errors.pydantic.dev/2.10/v/missing'}\n  {'type': 'missing', 'loc': ('response', 'group', 'questions', 3, 'pitch'), 'msg': 'Field required', 'input': GroupQuestion(id=4, pitches=[<app.models.pitch.Pitch object at 0x771fef364050>, <app.models.pitch.Pitch object at 0x771fef35bd50>]), 'url': 'https://errors.pydantic.dev/2.10/v/missing'}\n  {'type': 'missing', 'loc': ('response', 'group', 'questions', 4, 'pitch'), 'msg': 'Field required', 'input': GroupQuestion(id=5, pitches=[<app.models.pitch.Pitch object at 0x771fef35ba50>, <app.models.pitch.Pitch object at 0x771fef364050>]), 'url': 'https://errors.pydantic.dev/2.10/v/missing'}\n  {'type': 'missing', 'loc': ('response', 'group', 'questions', 5, 'pitch'), 'msg': 'Field required', 'input': GroupQuestion(id=6, pitches=[<app.models.pitch.Pitch object at 0x771fef35bd50>, <app.models.pitch.Pitch object at 0x771fef364050>]), 'url': 'https://errors.pydantic.dev/2.10/v/missing'}\n  {'type': 'missing', 'loc': ('response', 'group', 'questions', 6, 'pitch'), 'msg': 'Field required', 'input': GroupQuestion(id=7, pitches=[<app.models.pitch.Pitch object at 0x771fef35bd50>, <app.models.pitch.Pitch object at 0x771fef364050>]), 'url': 'https://errors.pydantic.dev/2.10/v/missing'}\n  {'type': 'missing', 'loc': ('response', 'group', 'questions', 7, 'pitch'), 'msg': 'Field required', 'input': GroupQuestion(id=8, pitches=[<app.models.pitch.Pitch object at 0x771fef35bd50>, <app.models.pitch.Pitch object at 0x771fef35bb90>]), 'url': 'https://errors.pydantic.dev/2.10/v/missing'}\n  {'type': 'missing', 'loc': ('response', 'group', 'questions', 8, 'pitch'), 'msg': 'Field required', 'input': GroupQuestion(id=9, pitches=[<app.models.pitch.Pitch object at 0x771fef35ba50>, <app.models.pitch.Pitch object at 0x771fef35bb90>]), 'url': 'https://errors.pydantic.dev/2.10/v/missing'}\n  {'type': 'missing', 'loc': ('response', 'group', 'questions', 9, 'pitch'), 'msg': 'Field required', 'input': GroupQuestion(id=10, pitches=[<app.models.pitch.Pitch object at 0x771fef35be50>, <app.models.pitch.Pitch object at 0x771fef35bd50>]), 'url': 'https://errors.pydantic.dev/2.10/v/missing'}\n  {'type': 'missing', 'loc': ('response', 'group', 'questions', 10, 'pitch'), 'msg': 'Field required', 'input': GroupQuestion(id=11, pitches=[<app.models.pitch.Pitch object at 0x771fef35bd50>, <app.models.pitch.Pitch object at 0x771fef35bd50>]), 'url': 'https://errors.pydantic.dev/2.10/v/missing'}\n  {'type': 'missing', 'loc': ('response', 'group', 'questions', 11, 'pitch'), 'msg': 'Field required', 'input': GroupQuestion(id=12, pitches=[<app.models.pitch.Pitch object at 0x771fef35bb90>, <app.models.pitch.Pitch object at 0x771fef35ba50>]), 'url': 'https://errors.pydantic.dev/2.10/v/missing'}\n  {'type': 'missing', 'loc': ('response', 'group', 'questions', 12, 'pitch'), 'msg': 'Field required', 'input': GroupQuestion(id=13, pitches=[<app.models.pitch.Pitch object at 0x771fef35ba50>, <app.models.pitch.Pitch object at 0x771fef35ba50>]), 'url': 'https://errors.pydantic.dev/2.10/v/missing'}\n  {'type': 'missing', 'loc': ('response', 'group', 'questions', 13, 'pitch'), 'msg': 'Field required', 'input': GroupQuestion(id=14, pitches=[<app.models.pitch.Pitch object at 0x771fef35bb90>, <app.models.pitch.Pitch object at 0x771fef35be50>]), 'url': 'https://errors.pydantic.dev/2.10/v/missing'}\n  {'type': 'missing', 'loc': ('response', 'group', 'questions', 14, 'pitch'), 'msg': 'Field required', 'input': GroupQuestion(id=15, pitches=[<app.models.pitch.Pitch object at 0x771fef35be50>, <app.models.pitch.Pitch object at 0x771fef35be50>]), 'url': 'https://errors.pydantic.dev/2.10/v/missing'}\n  {'type': 'missing', 'loc': ('response', 'group', 'questions', 15, 'pitch'), 'msg': 'Field required', 'input': GroupQuestion(id=16, pitches=[<app.models.pitch.Pitch object at 0x771fef35be50>, <app.models.pitch.Pitch object at 0x771fef35ba50>]), 'url': 'https://errors.pydantic.dev/2.10/v/missing'}\n  {'type': 'missing', 'loc': ('response', 'group', 'questions', 16, 'pitch'), 'msg': 'Field required', 'input': GroupQuestion(id=17, pitches=[<app.models.pitch.Pitch object at 0x771fef35be50>, <app.models.pitch.Pitch object at 0x771fef35ba50>]), 'url': 'https://errors.pydantic.dev/2.10/v/missing'}\n  {'type': 'missing', 'loc': ('response', 'group', 'questions', 17, 'pitch'), 'msg': 'Field required', 'input': GroupQuestion(id=18, pitches=[<app.models.pitch.Pitch object at 0x771fef35be50>, <app.models.pitch.Pitch object at 0x771fef364050>]), 'url': 'https://errors.pydantic.dev/2.10/v/missing'}\n  {'type': 'missing', 'loc': ('response', 'group', 'questions', 18, 'pitch'), 'msg': 'Field required', 'input': GroupQuestion(id=19, pitches=[<app.models.pitch.Pitch object at 0x771fef35ba50>, <app.models.pitch.Pitch object at 0x771fef364050>]), 'url': 'https://errors.pydantic.dev/2.10/v/missing'}\n  {'type': 'missing', 'loc': ('response', 'group', 'questions', 19, 'pitch'), 'msg': 'Field required', 'input': GroupQuestion(id=20, pitches=[<app.models.pitch.Pitch object at 0x771fef364050>, <app.models.pitch.Pitch object at 0x771fef35ba50>]), 'url': 'https://errors.pydantic.dev/2.10/v/missing'}\n"}, "request_id": "a7d75d1b-3557-4d36-bf96-d2568c5aa2fe", "path": "/api/v1/exam", "method": "POST"}
{"timestamp": "2025-04-26T04:52:16.680903", "level": "ERROR", "message": "Request failed", "module": "logging", "function": "dispatch", "line": 57, "exception": {"type": "ResponseValidationError", "message": "5 validation errors:\n  {'type': 'model_attributes_type', 'loc': ('response', 'chord', 'questions', 0, 'question'), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': [<app.models.pitch.Pitch object at 0x7b7a291c0c50>, <app.models.pitch.Pitch object at 0x7b7a291c10d0>, <app.models.pitch.Pitch object at 0x7b7a291c1490>], 'url': 'https://errors.pydantic.dev/2.10/v/model_attributes_type'}\n  {'type': 'model_attributes_type', 'loc': ('response', 'chord', 'questions', 1, 'question'), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': [<app.models.pitch.Pitch object at 0x7b7a291c0750>, <app.models.pitch.Pitch object at 0x7b7a291c0b50>, <app.models.pitch.Pitch object at 0x7b7a291c0e50>, <app.models.pitch.Pitch object at 0x7b7a291c1210>], 'url': 'https://errors.pydantic.dev/2.10/v/model_attributes_type'}\n  {'type': 'model_attributes_type', 'loc': ('response', 'chord', 'questions', 2, 'question'), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': [<app.models.pitch.Pitch object at 0x7b7a291c0550>, <app.models.pitch.Pitch object at 0x7b7a291c0950>, <app.models.pitch.Pitch object at 0x7b7a291c0c50>], 'url': 'https://errors.pydantic.dev/2.10/v/model_attributes_type'}\n  {'type': 'model_attributes_type', 'loc': ('response', 'chord', 'questions', 3, 'question'), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': [<app.models.pitch.Pitch object at 0x7b7a291c2110>, <app.models.pitch.Pitch object at 0x7b7a291c24d0>, <app.models.pitch.Pitch object at 0x7b7a291c29d0>], 'url': 'https://errors.pydantic.dev/2.10/v/model_attributes_type'}\n  {'type': 'model_attributes_type', 'loc': ('response', 'chord', 'questions', 4, 'question'), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': [<app.models.pitch.Pitch object at 0x7b7a291b2490>, <app.models.pitch.Pitch object at 0x7b7a291b2450>, <app.models.pitch.Pitch object at 0x7b7a291b2b10>, <app.models.pitch.Pitch object at 0x7b7a291b2f10>], 'url': 'https://errors.pydantic.dev/2.10/v/model_attributes_type'}\n", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/anyio/streams/memory.py\", line 98, in receive\n    return self.receive_nowait()\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/anyio/streams/memory.py\", line 93, in receive_nowait\n    raise WouldBlock\nanyio.WouldBlock\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/base.py\", line 78, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/anyio/streams/memory.py\", line 118, in receive\n    raise EndOfStream\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/middleware/logging.py\", line 34, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/base.py\", line 84, in call_next\n    raise app_exc\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/base.py\", line 70, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 83, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 79, in __call__\n    raise exc\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 68, in __call__\n    await self.app(scope, receive, sender)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 20, in __call__\n    raise e\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 17, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/routing.py\", line 718, in __call__\n    await route.handle(scope, receive, send)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/routing.py\", line 276, in handle\n    await self.app(scope, receive, send)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/routing.py\", line 66, in app\n    response = await func(request)\n               ^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/fastapi/routing.py\", line 292, in app\n    content = await serialize_response(\n              ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/fastapi/routing.py\", line 155, in serialize_response\n    raise ResponseValidationError(\nfastapi.exceptions.ResponseValidationError: 5 validation errors:\n  {'type': 'model_attributes_type', 'loc': ('response', 'chord', 'questions', 0, 'question'), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': [<app.models.pitch.Pitch object at 0x7b7a291c0c50>, <app.models.pitch.Pitch object at 0x7b7a291c10d0>, <app.models.pitch.Pitch object at 0x7b7a291c1490>], 'url': 'https://errors.pydantic.dev/2.10/v/model_attributes_type'}\n  {'type': 'model_attributes_type', 'loc': ('response', 'chord', 'questions', 1, 'question'), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': [<app.models.pitch.Pitch object at 0x7b7a291c0750>, <app.models.pitch.Pitch object at 0x7b7a291c0b50>, <app.models.pitch.Pitch object at 0x7b7a291c0e50>, <app.models.pitch.Pitch object at 0x7b7a291c1210>], 'url': 'https://errors.pydantic.dev/2.10/v/model_attributes_type'}\n  {'type': 'model_attributes_type', 'loc': ('response', 'chord', 'questions', 2, 'question'), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': [<app.models.pitch.Pitch object at 0x7b7a291c0550>, <app.models.pitch.Pitch object at 0x7b7a291c0950>, <app.models.pitch.Pitch object at 0x7b7a291c0c50>], 'url': 'https://errors.pydantic.dev/2.10/v/model_attributes_type'}\n  {'type': 'model_attributes_type', 'loc': ('response', 'chord', 'questions', 3, 'question'), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': [<app.models.pitch.Pitch object at 0x7b7a291c2110>, <app.models.pitch.Pitch object at 0x7b7a291c24d0>, <app.models.pitch.Pitch object at 0x7b7a291c29d0>], 'url': 'https://errors.pydantic.dev/2.10/v/model_attributes_type'}\n  {'type': 'model_attributes_type', 'loc': ('response', 'chord', 'questions', 4, 'question'), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': [<app.models.pitch.Pitch object at 0x7b7a291b2490>, <app.models.pitch.Pitch object at 0x7b7a291b2450>, <app.models.pitch.Pitch object at 0x7b7a291b2b10>, <app.models.pitch.Pitch object at 0x7b7a291b2f10>], 'url': 'https://errors.pydantic.dev/2.10/v/model_attributes_type'}\n"}, "request_id": "3df64df8-e5f3-4320-a7cf-d0886ec8b1d6", "path": "/api/v1/exam", "method": "POST"}
{"timestamp": "2025-04-26T04:53:37.117995", "level": "ERROR", "message": "Request failed", "module": "logging", "function": "dispatch", "line": 57, "exception": {"type": "ResponseValidationError", "message": "5 validation errors:\n  {'type': 'model_attributes_type', 'loc': ('response', 'chord', 'questions', 0, 'question'), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': [<app.models.pitch.Pitch object at 0x722c6733bed0>, <app.models.pitch.Pitch object at 0x722c6734c310>, <app.models.pitch.Pitch object at 0x722c6734c710>], 'url': 'https://errors.pydantic.dev/2.10/v/model_attributes_type'}\n  {'type': 'model_attributes_type', 'loc': ('response', 'chord', 'questions', 1, 'question'), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': [<app.models.pitch.Pitch object at 0x722c6733b8d0>, <app.models.pitch.Pitch object at 0x722c6733bcd0>, <app.models.pitch.Pitch object at 0x722c6733bfd0>, <app.models.pitch.Pitch object at 0x722c6734c310>], 'url': 'https://errors.pydantic.dev/2.10/v/model_attributes_type'}\n  {'type': 'model_attributes_type', 'loc': ('response', 'chord', 'questions', 2, 'question'), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': [<app.models.pitch.Pitch object at 0x722c6734c110>, <app.models.pitch.Pitch object at 0x722c6734c410>, <app.models.pitch.Pitch object at 0x722c6734c810>], 'url': 'https://errors.pydantic.dev/2.10/v/model_attributes_type'}\n  {'type': 'model_attributes_type', 'loc': ('response', 'chord', 'questions', 3, 'question'), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': [<app.models.pitch.Pitch object at 0x722c6734c610>, <app.models.pitch.Pitch object at 0x722c6734ca10>, <app.models.pitch.Pitch object at 0x722c6734cd10>, <app.models.pitch.Pitch object at 0x722c6734d150>], 'url': 'https://errors.pydantic.dev/2.10/v/model_attributes_type'}\n  {'type': 'model_attributes_type', 'loc': ('response', 'chord', 'questions', 4, 'question'), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': [<app.models.pitch.Pitch object at 0x722c6734c510>, <app.models.pitch.Pitch object at 0x722c6734c910>, <app.models.pitch.Pitch object at 0x722c6734cc10>, <app.models.pitch.Pitch object at 0x722c6734d010>], 'url': 'https://errors.pydantic.dev/2.10/v/model_attributes_type'}\n", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/anyio/streams/memory.py\", line 98, in receive\n    return self.receive_nowait()\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/anyio/streams/memory.py\", line 93, in receive_nowait\n    raise WouldBlock\nanyio.WouldBlock\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/base.py\", line 78, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/anyio/streams/memory.py\", line 118, in receive\n    raise EndOfStream\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/middleware/logging.py\", line 34, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/base.py\", line 84, in call_next\n    raise app_exc\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/base.py\", line 70, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 83, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 79, in __call__\n    raise exc\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 68, in __call__\n    await self.app(scope, receive, sender)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 20, in __call__\n    raise e\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 17, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/routing.py\", line 718, in __call__\n    await route.handle(scope, receive, send)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/routing.py\", line 276, in handle\n    await self.app(scope, receive, send)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/routing.py\", line 66, in app\n    response = await func(request)\n               ^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/fastapi/routing.py\", line 292, in app\n    content = await serialize_response(\n              ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/fastapi/routing.py\", line 155, in serialize_response\n    raise ResponseValidationError(\nfastapi.exceptions.ResponseValidationError: 5 validation errors:\n  {'type': 'model_attributes_type', 'loc': ('response', 'chord', 'questions', 0, 'question'), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': [<app.models.pitch.Pitch object at 0x722c6733bed0>, <app.models.pitch.Pitch object at 0x722c6734c310>, <app.models.pitch.Pitch object at 0x722c6734c710>], 'url': 'https://errors.pydantic.dev/2.10/v/model_attributes_type'}\n  {'type': 'model_attributes_type', 'loc': ('response', 'chord', 'questions', 1, 'question'), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': [<app.models.pitch.Pitch object at 0x722c6733b8d0>, <app.models.pitch.Pitch object at 0x722c6733bcd0>, <app.models.pitch.Pitch object at 0x722c6733bfd0>, <app.models.pitch.Pitch object at 0x722c6734c310>], 'url': 'https://errors.pydantic.dev/2.10/v/model_attributes_type'}\n  {'type': 'model_attributes_type', 'loc': ('response', 'chord', 'questions', 2, 'question'), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': [<app.models.pitch.Pitch object at 0x722c6734c110>, <app.models.pitch.Pitch object at 0x722c6734c410>, <app.models.pitch.Pitch object at 0x722c6734c810>], 'url': 'https://errors.pydantic.dev/2.10/v/model_attributes_type'}\n  {'type': 'model_attributes_type', 'loc': ('response', 'chord', 'questions', 3, 'question'), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': [<app.models.pitch.Pitch object at 0x722c6734c610>, <app.models.pitch.Pitch object at 0x722c6734ca10>, <app.models.pitch.Pitch object at 0x722c6734cd10>, <app.models.pitch.Pitch object at 0x722c6734d150>], 'url': 'https://errors.pydantic.dev/2.10/v/model_attributes_type'}\n  {'type': 'model_attributes_type', 'loc': ('response', 'chord', 'questions', 4, 'question'), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': [<app.models.pitch.Pitch object at 0x722c6734c510>, <app.models.pitch.Pitch object at 0x722c6734c910>, <app.models.pitch.Pitch object at 0x722c6734cc10>, <app.models.pitch.Pitch object at 0x722c6734d010>], 'url': 'https://errors.pydantic.dev/2.10/v/model_attributes_type'}\n"}, "request_id": "ef0e4383-3756-419f-9b0b-6d9a599accb8", "path": "/api/v1/exam", "method": "POST"}
{"timestamp": "2025-05-15T07:54:12.351328", "level": "ERROR", "message": "Error in update_vip for id 2: VipService.update_vip() got an unexpected keyword argument 'describe'\nTraceback: Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/api/v1/vip_api.py\", line 177, in update_vip\n    updated_vip = await vip_service.update_vip(db, vip_id, **update_data)\n                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nTypeError: VipService.update_vip() got an unexpected keyword argument 'describe'\n", "module": "vip_api", "function": "update_vip", "line": 188}
{"timestamp": "2025-05-15T07:55:14.239583", "level": "ERROR", "message": "Error in update_vip for id 2: VipService.update_vip() got an unexpected keyword argument 'describe'\nTraceback: Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/api/v1/vip_api.py\", line 177, in update_vip\n    updated_vip = await vip_service.update_vip(db, vip_id, **update_data)\n                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nTypeError: VipService.update_vip() got an unexpected keyword argument 'describe'\n", "module": "vip_api", "function": "update_vip", "line": 188}
{"timestamp": "2025-05-15T08:08:43.048349", "level": "ERROR", "message": "Error in update_vip for id 2: VipService.update_vip() got an unexpected keyword argument 'describe'\nTraceback: Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/api/v1/vip_api.py\", line 177, in update_vip\n    updated_vip = await vip_service.update_vip(db, vip_id, **update_data)\n                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nTypeError: VipService.update_vip() got an unexpected keyword argument 'describe'\n", "module": "vip_api", "function": "update_vip", "line": 188}
{"timestamp": "2025-05-15T08:10:42.411246", "level": "ERROR", "message": "Failed to update VIP: 'Vip' object has no attribute 'vip_level'", "module": "vip_service", "function": "update_vip", "line": 139, "exception": {"type": "AttributeError", "message": "'Vip' object has no attribute 'vip_level'", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/services/vip_service.py\", line 133, in update_vip\n    self._vip_level_cache[vip.vip_level] = vip\n                          ^^^^^^^^^^^^^\nAttributeError: 'Vip' object has no attribute 'vip_level'"}}
