{"timestamp": "2025-03-21T06:41:23.891599", "level": "ERROR", "message": "Failed to initialize VIP levels", "module": "init_data", "function": "init_vip_levels", "line": 63, "exception": {"type": "NameError", "message": "name 'Vip' is not defined", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 9, in init_vip_levels\n    existing_levels = db.query(Vip).all()\n                               ^^^\nNameError: name 'Vip' is not defined"}}
{"timestamp": "2025-03-21T06:41:23.892241", "level": "ERROR", "message": "Failed to initialize application", "module": "main", "function": "lifespan", "line": 41, "exception": {"type": "NameError", "message": "name 'Vip' is not defined", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/main.py\", line 34, in lifespan\n    init_vip_levels(db)\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 65, in init_vip_levels\n    raise e\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 9, in init_vip_levels\n    existing_levels = db.query(Vip).all()\n                               ^^^\nNameError: name 'Vip' is not defined"}}
{"timestamp": "2025-03-21T06:41:35.431210", "level": "ERROR", "message": "Failed to initialize VIP levels", "module": "init_data", "function": "init_vip_levels", "line": 65, "exception": {"type": "NameError", "message": "name 'VipLevel' is not defined", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 18, in init_vip_levels\n    VipLevel.FREE: \"普通用户: *****************\",\n    ^^^^^^^^\nNameError: name 'VipLevel' is not defined"}}
{"timestamp": "2025-03-21T06:41:35.432279", "level": "ERROR", "message": "Failed to initialize application", "module": "main", "function": "lifespan", "line": 41, "exception": {"type": "NameError", "message": "name 'VipLevel' is not defined", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/main.py\", line 34, in lifespan\n    init_vip_levels(db)\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 67, in init_vip_levels\n    raise e\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 18, in init_vip_levels\n    VipLevel.FREE: \"普通用户: *****************\",\n    ^^^^^^^^\nNameError: name 'VipLevel' is not defined"}}
{"timestamp": "2025-03-21T06:41:38.957831", "level": "ERROR", "message": "Failed to insert VIP level VipLevel.FREE: 'vip_level' is an invalid keyword argument for Vip", "module": "init_data", "function": "init_vip_levels", "line": 58}
{"timestamp": "2025-03-21T06:41:38.960971", "level": "ERROR", "message": "Failed to initialize VIP levels", "module": "init_data", "function": "init_vip_levels", "line": 65, "exception": {"type": "TypeError", "message": "'vip_level' is an invalid keyword argument for Vip", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 59, in init_vip_levels\n    raise e\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 48, in init_vip_levels\n    vip = Vip(\n          ^^^^\n  File \"<string>\", line 4, in __init__\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/state.py\", line 566, in _initialize_instance\n    with util.safe_reraise():\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py\", line 146, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/state.py\", line 564, in _initialize_instance\n    manager.original_init(*mixed[1:], **kwargs)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/decl_base.py\", line 2142, in _declarative_constructor\n    raise TypeError(\nTypeError: 'vip_level' is an invalid keyword argument for Vip"}}
{"timestamp": "2025-03-21T06:41:38.962261", "level": "ERROR", "message": "Failed to initialize application", "module": "main", "function": "lifespan", "line": 41, "exception": {"type": "TypeError", "message": "'vip_level' is an invalid keyword argument for Vip", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/main.py\", line 34, in lifespan\n    init_vip_levels(db)\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 67, in init_vip_levels\n    raise e\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 59, in init_vip_levels\n    raise e\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 48, in init_vip_levels\n    vip = Vip(\n          ^^^^\n  File \"<string>\", line 4, in __init__\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/state.py\", line 566, in _initialize_instance\n    with util.safe_reraise():\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py\", line 146, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/state.py\", line 564, in _initialize_instance\n    manager.original_init(*mixed[1:], **kwargs)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/decl_base.py\", line 2142, in _declarative_constructor\n    raise TypeError(\nTypeError: 'vip_level' is an invalid keyword argument for Vip"}}
{"timestamp": "2025-03-21T06:42:05.195886", "level": "ERROR", "message": "Failed to insert VIP level VipLevel.FREE: 'vip_level' is an invalid keyword argument for Vip", "module": "init_data", "function": "init_vip_levels", "line": 58}
{"timestamp": "2025-03-21T06:42:05.197109", "level": "ERROR", "message": "Failed to initialize VIP levels", "module": "init_data", "function": "init_vip_levels", "line": 65, "exception": {"type": "TypeError", "message": "'vip_level' is an invalid keyword argument for Vip", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 59, in init_vip_levels\n    raise e\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 48, in init_vip_levels\n    vip = Vip(\n          ^^^^\n  File \"<string>\", line 4, in __init__\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/state.py\", line 566, in _initialize_instance\n    with util.safe_reraise():\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py\", line 146, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/state.py\", line 564, in _initialize_instance\n    manager.original_init(*mixed[1:], **kwargs)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/decl_base.py\", line 2142, in _declarative_constructor\n    raise TypeError(\nTypeError: 'vip_level' is an invalid keyword argument for Vip"}}
{"timestamp": "2025-03-21T06:42:05.198245", "level": "ERROR", "message": "Failed to initialize application", "module": "main", "function": "lifespan", "line": 41, "exception": {"type": "TypeError", "message": "'vip_level' is an invalid keyword argument for Vip", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/main.py\", line 34, in lifespan\n    init_vip_levels(db)\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 67, in init_vip_levels\n    raise e\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 59, in init_vip_levels\n    raise e\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 48, in init_vip_levels\n    vip = Vip(\n          ^^^^\n  File \"<string>\", line 4, in __init__\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/state.py\", line 566, in _initialize_instance\n    with util.safe_reraise():\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py\", line 146, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/state.py\", line 564, in _initialize_instance\n    manager.original_init(*mixed[1:], **kwargs)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/decl_base.py\", line 2142, in _declarative_constructor\n    raise TypeError(\nTypeError: 'vip_level' is an invalid keyword argument for Vip"}}
{"timestamp": "2025-03-21T06:42:50.927850", "level": "ERROR", "message": "Failed to insert VIP level VipLevel.NORMAL: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum viplevel: \"NORMAL\"\nLINE 1: ...TO vip (level, describe, price, discount) VALUES ('NORMAL', ...\n                                                             ^\n\n[SQL: INSERT INTO vip (level, describe, price, discount) VALUES (%(level)s, %(describe)s, %(price)s, %(discount)s) RETURNING vip.id, vip.created_at, vip.updated_at]\n[parameters: {'level': 'NORMAL', 'describe': '普通会员: 旋律听写, 节奏练习, 节奏听写', 'price': 0, 'discount': 0}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)", "module": "init_data", "function": "init_vip_levels", "line": 57}
{"timestamp": "2025-03-21T06:42:50.936872", "level": "ERROR", "message": "Failed to initialize VIP levels", "module": "init_data", "function": "init_vip_levels", "line": 64, "exception": {"type": "DataError", "message": "(psycopg2.errors.InvalidTextRepresentation) invalid input value for enum viplevel: \"NORMAL\"\nLINE 1: ...TO vip (level, describe, price, discount) VALUES ('NORMAL', ...\n                                                             ^\n\n[SQL: INSERT INTO vip (level, describe, price, discount) VALUES (%(level)s, %(describe)s, %(price)s, %(discount)s) RETURNING vip.id, vip.created_at, vip.updated_at]\n[parameters: {'level': 'NORMAL', 'describe': '普通会员: 旋律听写, 节奏练习, 节奏听写', 'price': 0, 'discount': 0}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.InvalidTextRepresentation: invalid input value for enum viplevel: \"NORMAL\"\nLINE 1: ...TO vip (level, describe, price, discount) VALUES ('NORMAL', ...\n                                                             ^\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 58, in init_vip_levels\n    raise e\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 55, in init_vip_levels\n    db.flush()  # 立即刷新以检查是否有问题\n    ^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4312, in flush\n    self._flush(objects)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4447, in _flush\n    with util.safe_reraise():\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py\", line 146, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4408, in _flush\n    flush_context.execute()\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py\", line 466, in execute\n    rec.execute(self)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py\", line 642, in execute\n    util.preloaded.orm_persistence.save_obj(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py\", line 93, in save_obj\n    _emit_insert_statements(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py\", line 1226, in _emit_insert_statements\n    result = connection.execute(\n             ^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1416, in execute\n    return meth(\n           ^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/sql/elements.py\", line 516, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1639, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1848, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1988, in _exec_single_context\n    self._handle_dbapi_exception(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 2343, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum viplevel: \"NORMAL\"\nLINE 1: ...TO vip (level, describe, price, discount) VALUES ('NORMAL', ...\n                                                             ^\n\n[SQL: INSERT INTO vip (level, describe, price, discount) VALUES (%(level)s, %(describe)s, %(price)s, %(discount)s) RETURNING vip.id, vip.created_at, vip.updated_at]\n[parameters: {'level': 'NORMAL', 'describe': '普通会员: 旋律听写, 节奏练习, 节奏听写', 'price': 0, 'discount': 0}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)"}}
{"timestamp": "2025-03-21T06:42:50.940617", "level": "ERROR", "message": "Failed to initialize application", "module": "main", "function": "lifespan", "line": 41, "exception": {"type": "DataError", "message": "(psycopg2.errors.InvalidTextRepresentation) invalid input value for enum viplevel: \"NORMAL\"\nLINE 1: ...TO vip (level, describe, price, discount) VALUES ('NORMAL', ...\n                                                             ^\n\n[SQL: INSERT INTO vip (level, describe, price, discount) VALUES (%(level)s, %(describe)s, %(price)s, %(discount)s) RETURNING vip.id, vip.created_at, vip.updated_at]\n[parameters: {'level': 'NORMAL', 'describe': '普通会员: 旋律听写, 节奏练习, 节奏听写', 'price': 0, 'discount': 0}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.InvalidTextRepresentation: invalid input value for enum viplevel: \"NORMAL\"\nLINE 1: ...TO vip (level, describe, price, discount) VALUES ('NORMAL', ...\n                                                             ^\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/main.py\", line 34, in lifespan\n    init_vip_levels(db)\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 66, in init_vip_levels\n    raise e\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 58, in init_vip_levels\n    raise e\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 55, in init_vip_levels\n    db.flush()  # 立即刷新以检查是否有问题\n    ^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4312, in flush\n    self._flush(objects)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4447, in _flush\n    with util.safe_reraise():\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py\", line 146, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4408, in _flush\n    flush_context.execute()\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py\", line 466, in execute\n    rec.execute(self)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py\", line 642, in execute\n    util.preloaded.orm_persistence.save_obj(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py\", line 93, in save_obj\n    _emit_insert_statements(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py\", line 1226, in _emit_insert_statements\n    result = connection.execute(\n             ^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1416, in execute\n    return meth(\n           ^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/sql/elements.py\", line 516, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1639, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1848, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1988, in _exec_single_context\n    self._handle_dbapi_exception(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 2343, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum viplevel: \"NORMAL\"\nLINE 1: ...TO vip (level, describe, price, discount) VALUES ('NORMAL', ...\n                                                             ^\n\n[SQL: INSERT INTO vip (level, describe, price, discount) VALUES (%(level)s, %(describe)s, %(price)s, %(discount)s) RETURNING vip.id, vip.created_at, vip.updated_at]\n[parameters: {'level': 'NORMAL', 'describe': '普通会员: 旋律听写, 节奏练习, 节奏听写', 'price': 0, 'discount': 0}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)"}}
{"timestamp": "2025-03-21T06:42:55.788643", "level": "ERROR", "message": "Failed to insert VIP level VipLevel.NORMAL: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum viplevel: \"NORMAL\"\nLINE 1: ...TO vip (level, describe, price, discount) VALUES ('NORMAL', ...\n                                                             ^\n\n[SQL: INSERT INTO vip (level, describe, price, discount) VALUES (%(level)s, %(describe)s, %(price)s, %(discount)s) RETURNING vip.id, vip.created_at, vip.updated_at]\n[parameters: {'level': 'NORMAL', 'describe': '普通会员: 旋律听写, 节奏练习, 节奏听写', 'price': 0, 'discount': 0}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)", "module": "init_data", "function": "init_vip_levels", "line": 57}
{"timestamp": "2025-03-21T06:42:55.792755", "level": "ERROR", "message": "Failed to initialize VIP levels", "module": "init_data", "function": "init_vip_levels", "line": 64, "exception": {"type": "DataError", "message": "(psycopg2.errors.InvalidTextRepresentation) invalid input value for enum viplevel: \"NORMAL\"\nLINE 1: ...TO vip (level, describe, price, discount) VALUES ('NORMAL', ...\n                                                             ^\n\n[SQL: INSERT INTO vip (level, describe, price, discount) VALUES (%(level)s, %(describe)s, %(price)s, %(discount)s) RETURNING vip.id, vip.created_at, vip.updated_at]\n[parameters: {'level': 'NORMAL', 'describe': '普通会员: 旋律听写, 节奏练习, 节奏听写', 'price': 0, 'discount': 0}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.InvalidTextRepresentation: invalid input value for enum viplevel: \"NORMAL\"\nLINE 1: ...TO vip (level, describe, price, discount) VALUES ('NORMAL', ...\n                                                             ^\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 58, in init_vip_levels\n    raise e\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 55, in init_vip_levels\n    db.flush()  # 立即刷新以检查是否有问题\n    ^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4312, in flush\n    self._flush(objects)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4447, in _flush\n    with util.safe_reraise():\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py\", line 146, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4408, in _flush\n    flush_context.execute()\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py\", line 466, in execute\n    rec.execute(self)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py\", line 642, in execute\n    util.preloaded.orm_persistence.save_obj(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py\", line 93, in save_obj\n    _emit_insert_statements(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py\", line 1226, in _emit_insert_statements\n    result = connection.execute(\n             ^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1416, in execute\n    return meth(\n           ^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/sql/elements.py\", line 516, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1639, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1848, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1988, in _exec_single_context\n    self._handle_dbapi_exception(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 2343, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum viplevel: \"NORMAL\"\nLINE 1: ...TO vip (level, describe, price, discount) VALUES ('NORMAL', ...\n                                                             ^\n\n[SQL: INSERT INTO vip (level, describe, price, discount) VALUES (%(level)s, %(describe)s, %(price)s, %(discount)s) RETURNING vip.id, vip.created_at, vip.updated_at]\n[parameters: {'level': 'NORMAL', 'describe': '普通会员: 旋律听写, 节奏练习, 节奏听写', 'price': 0, 'discount': 0}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)"}}
{"timestamp": "2025-03-21T06:42:55.796294", "level": "ERROR", "message": "Failed to initialize application", "module": "main", "function": "lifespan", "line": 41, "exception": {"type": "DataError", "message": "(psycopg2.errors.InvalidTextRepresentation) invalid input value for enum viplevel: \"NORMAL\"\nLINE 1: ...TO vip (level, describe, price, discount) VALUES ('NORMAL', ...\n                                                             ^\n\n[SQL: INSERT INTO vip (level, describe, price, discount) VALUES (%(level)s, %(describe)s, %(price)s, %(discount)s) RETURNING vip.id, vip.created_at, vip.updated_at]\n[parameters: {'level': 'NORMAL', 'describe': '普通会员: 旋律听写, 节奏练习, 节奏听写', 'price': 0, 'discount': 0}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.InvalidTextRepresentation: invalid input value for enum viplevel: \"NORMAL\"\nLINE 1: ...TO vip (level, describe, price, discount) VALUES ('NORMAL', ...\n                                                             ^\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/main.py\", line 34, in lifespan\n    init_vip_levels(db)\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 66, in init_vip_levels\n    raise e\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 58, in init_vip_levels\n    raise e\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 55, in init_vip_levels\n    db.flush()  # 立即刷新以检查是否有问题\n    ^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4312, in flush\n    self._flush(objects)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4447, in _flush\n    with util.safe_reraise():\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py\", line 146, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4408, in _flush\n    flush_context.execute()\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py\", line 466, in execute\n    rec.execute(self)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py\", line 642, in execute\n    util.preloaded.orm_persistence.save_obj(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py\", line 93, in save_obj\n    _emit_insert_statements(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py\", line 1226, in _emit_insert_statements\n    result = connection.execute(\n             ^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1416, in execute\n    return meth(\n           ^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/sql/elements.py\", line 516, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1639, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1848, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1988, in _exec_single_context\n    self._handle_dbapi_exception(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 2343, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum viplevel: \"NORMAL\"\nLINE 1: ...TO vip (level, describe, price, discount) VALUES ('NORMAL', ...\n                                                             ^\n\n[SQL: INSERT INTO vip (level, describe, price, discount) VALUES (%(level)s, %(describe)s, %(price)s, %(discount)s) RETURNING vip.id, vip.created_at, vip.updated_at]\n[parameters: {'level': 'NORMAL', 'describe': '普通会员: 旋律听写, 节奏练习, 节奏听写', 'price': 0, 'discount': 0}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)"}}
{"timestamp": "2025-03-21T06:44:01.343901", "level": "ERROR", "message": "Failed to insert VIP level VipLevel.NORMAL: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum viplevel: \"NORMAL\"\nLINE 1: ...TO vip (level, describe, price, discount) VALUES ('NORMAL', ...\n                                                             ^\n\n[SQL: INSERT INTO vip (level, describe, price, discount) VALUES (%(level)s, %(describe)s, %(price)s, %(discount)s) RETURNING vip.id, vip.created_at, vip.updated_at]\n[parameters: {'level': 'NORMAL', 'describe': '普通会员: 旋律听写, 节奏练习, 节奏听写', 'price': 0, 'discount': 0}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)", "module": "init_data", "function": "init_vip_levels", "line": 50}
{"timestamp": "2025-03-21T06:44:01.348198", "level": "ERROR", "message": "Failed to initialize VIP levels", "module": "init_data", "function": "init_vip_levels", "line": 57, "exception": {"type": "DataError", "message": "(psycopg2.errors.InvalidTextRepresentation) invalid input value for enum viplevel: \"NORMAL\"\nLINE 1: ...TO vip (level, describe, price, discount) VALUES ('NORMAL', ...\n                                                             ^\n\n[SQL: INSERT INTO vip (level, describe, price, discount) VALUES (%(level)s, %(describe)s, %(price)s, %(discount)s) RETURNING vip.id, vip.created_at, vip.updated_at]\n[parameters: {'level': 'NORMAL', 'describe': '普通会员: 旋律听写, 节奏练习, 节奏听写', 'price': 0, 'discount': 0}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.InvalidTextRepresentation: invalid input value for enum viplevel: \"NORMAL\"\nLINE 1: ...TO vip (level, describe, price, discount) VALUES ('NORMAL', ...\n                                                             ^\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 51, in init_vip_levels\n    raise e\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 48, in init_vip_levels\n    db.flush()  # 立即刷新以检查是否有问题\n    ^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4312, in flush\n    self._flush(objects)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4447, in _flush\n    with util.safe_reraise():\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py\", line 146, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4408, in _flush\n    flush_context.execute()\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py\", line 466, in execute\n    rec.execute(self)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py\", line 642, in execute\n    util.preloaded.orm_persistence.save_obj(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py\", line 93, in save_obj\n    _emit_insert_statements(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py\", line 1226, in _emit_insert_statements\n    result = connection.execute(\n             ^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1416, in execute\n    return meth(\n           ^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/sql/elements.py\", line 516, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1639, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1848, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1988, in _exec_single_context\n    self._handle_dbapi_exception(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 2343, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum viplevel: \"NORMAL\"\nLINE 1: ...TO vip (level, describe, price, discount) VALUES ('NORMAL', ...\n                                                             ^\n\n[SQL: INSERT INTO vip (level, describe, price, discount) VALUES (%(level)s, %(describe)s, %(price)s, %(discount)s) RETURNING vip.id, vip.created_at, vip.updated_at]\n[parameters: {'level': 'NORMAL', 'describe': '普通会员: 旋律听写, 节奏练习, 节奏听写', 'price': 0, 'discount': 0}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)"}}
{"timestamp": "2025-03-21T06:44:01.351840", "level": "ERROR", "message": "Failed to initialize application", "module": "main", "function": "lifespan", "line": 41, "exception": {"type": "DataError", "message": "(psycopg2.errors.InvalidTextRepresentation) invalid input value for enum viplevel: \"NORMAL\"\nLINE 1: ...TO vip (level, describe, price, discount) VALUES ('NORMAL', ...\n                                                             ^\n\n[SQL: INSERT INTO vip (level, describe, price, discount) VALUES (%(level)s, %(describe)s, %(price)s, %(discount)s) RETURNING vip.id, vip.created_at, vip.updated_at]\n[parameters: {'level': 'NORMAL', 'describe': '普通会员: 旋律听写, 节奏练习, 节奏听写', 'price': 0, 'discount': 0}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.InvalidTextRepresentation: invalid input value for enum viplevel: \"NORMAL\"\nLINE 1: ...TO vip (level, describe, price, discount) VALUES ('NORMAL', ...\n                                                             ^\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/main.py\", line 34, in lifespan\n    init_vip_levels(db)\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 59, in init_vip_levels\n    raise e\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 51, in init_vip_levels\n    raise e\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 48, in init_vip_levels\n    db.flush()  # 立即刷新以检查是否有问题\n    ^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4312, in flush\n    self._flush(objects)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4447, in _flush\n    with util.safe_reraise():\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py\", line 146, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4408, in _flush\n    flush_context.execute()\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py\", line 466, in execute\n    rec.execute(self)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py\", line 642, in execute\n    util.preloaded.orm_persistence.save_obj(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py\", line 93, in save_obj\n    _emit_insert_statements(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py\", line 1226, in _emit_insert_statements\n    result = connection.execute(\n             ^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1416, in execute\n    return meth(\n           ^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/sql/elements.py\", line 516, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1639, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1848, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1988, in _exec_single_context\n    self._handle_dbapi_exception(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 2343, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum viplevel: \"NORMAL\"\nLINE 1: ...TO vip (level, describe, price, discount) VALUES ('NORMAL', ...\n                                                             ^\n\n[SQL: INSERT INTO vip (level, describe, price, discount) VALUES (%(level)s, %(describe)s, %(price)s, %(discount)s) RETURNING vip.id, vip.created_at, vip.updated_at]\n[parameters: {'level': 'NORMAL', 'describe': '普通会员: 旋律听写, 节奏练习, 节奏听写', 'price': 0, 'discount': 0}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)"}}
{"timestamp": "2025-03-21T06:44:12.225049", "level": "ERROR", "message": "Failed to insert VIP level VipLevel.NORMAL: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum viplevel: \"NORMAL\"\nLINE 1: ...TO vip (level, describe, price, discount) VALUES ('NORMAL', ...\n                                                             ^\n\n[SQL: INSERT INTO vip (level, describe, price, discount) VALUES (%(level)s, %(describe)s, %(price)s, %(discount)s) RETURNING vip.id, vip.created_at, vip.updated_at]\n[parameters: {'level': 'NORMAL', 'describe': '普通会员: 旋律听写, 节奏练习, 节奏听写', 'price': 0, 'discount': 0}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)", "module": "init_data", "function": "init_vip_levels", "line": 50}
{"timestamp": "2025-03-21T06:44:12.229350", "level": "ERROR", "message": "Failed to initialize VIP levels", "module": "init_data", "function": "init_vip_levels", "line": 57, "exception": {"type": "DataError", "message": "(psycopg2.errors.InvalidTextRepresentation) invalid input value for enum viplevel: \"NORMAL\"\nLINE 1: ...TO vip (level, describe, price, discount) VALUES ('NORMAL', ...\n                                                             ^\n\n[SQL: INSERT INTO vip (level, describe, price, discount) VALUES (%(level)s, %(describe)s, %(price)s, %(discount)s) RETURNING vip.id, vip.created_at, vip.updated_at]\n[parameters: {'level': 'NORMAL', 'describe': '普通会员: 旋律听写, 节奏练习, 节奏听写', 'price': 0, 'discount': 0}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.InvalidTextRepresentation: invalid input value for enum viplevel: \"NORMAL\"\nLINE 1: ...TO vip (level, describe, price, discount) VALUES ('NORMAL', ...\n                                                             ^\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 51, in init_vip_levels\n    raise e\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 48, in init_vip_levels\n    db.flush()  # 立即刷新以检查是否有问题\n    ^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4312, in flush\n    self._flush(objects)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4447, in _flush\n    with util.safe_reraise():\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py\", line 146, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4408, in _flush\n    flush_context.execute()\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py\", line 466, in execute\n    rec.execute(self)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py\", line 642, in execute\n    util.preloaded.orm_persistence.save_obj(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py\", line 93, in save_obj\n    _emit_insert_statements(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py\", line 1226, in _emit_insert_statements\n    result = connection.execute(\n             ^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1416, in execute\n    return meth(\n           ^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/sql/elements.py\", line 516, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1639, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1848, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1988, in _exec_single_context\n    self._handle_dbapi_exception(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 2343, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum viplevel: \"NORMAL\"\nLINE 1: ...TO vip (level, describe, price, discount) VALUES ('NORMAL', ...\n                                                             ^\n\n[SQL: INSERT INTO vip (level, describe, price, discount) VALUES (%(level)s, %(describe)s, %(price)s, %(discount)s) RETURNING vip.id, vip.created_at, vip.updated_at]\n[parameters: {'level': 'NORMAL', 'describe': '普通会员: 旋律听写, 节奏练习, 节奏听写', 'price': 0, 'discount': 0}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)"}}
{"timestamp": "2025-03-21T06:44:12.232968", "level": "ERROR", "message": "Failed to initialize application", "module": "main", "function": "lifespan", "line": 41, "exception": {"type": "DataError", "message": "(psycopg2.errors.InvalidTextRepresentation) invalid input value for enum viplevel: \"NORMAL\"\nLINE 1: ...TO vip (level, describe, price, discount) VALUES ('NORMAL', ...\n                                                             ^\n\n[SQL: INSERT INTO vip (level, describe, price, discount) VALUES (%(level)s, %(describe)s, %(price)s, %(discount)s) RETURNING vip.id, vip.created_at, vip.updated_at]\n[parameters: {'level': 'NORMAL', 'describe': '普通会员: 旋律听写, 节奏练习, 节奏听写', 'price': 0, 'discount': 0}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.InvalidTextRepresentation: invalid input value for enum viplevel: \"NORMAL\"\nLINE 1: ...TO vip (level, describe, price, discount) VALUES ('NORMAL', ...\n                                                             ^\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/main.py\", line 34, in lifespan\n    init_vip_levels(db)\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 59, in init_vip_levels\n    raise e\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 51, in init_vip_levels\n    raise e\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 48, in init_vip_levels\n    db.flush()  # 立即刷新以检查是否有问题\n    ^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4312, in flush\n    self._flush(objects)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4447, in _flush\n    with util.safe_reraise():\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py\", line 146, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4408, in _flush\n    flush_context.execute()\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py\", line 466, in execute\n    rec.execute(self)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py\", line 642, in execute\n    util.preloaded.orm_persistence.save_obj(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py\", line 93, in save_obj\n    _emit_insert_statements(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py\", line 1226, in _emit_insert_statements\n    result = connection.execute(\n             ^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1416, in execute\n    return meth(\n           ^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/sql/elements.py\", line 516, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1639, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1848, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1988, in _exec_single_context\n    self._handle_dbapi_exception(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 2343, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum viplevel: \"NORMAL\"\nLINE 1: ...TO vip (level, describe, price, discount) VALUES ('NORMAL', ...\n                                                             ^\n\n[SQL: INSERT INTO vip (level, describe, price, discount) VALUES (%(level)s, %(describe)s, %(price)s, %(discount)s) RETURNING vip.id, vip.created_at, vip.updated_at]\n[parameters: {'level': 'NORMAL', 'describe': '普通会员: 旋律听写, 节奏练习, 节奏听写', 'price': 0, 'discount': 0}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)"}}
{"timestamp": "2025-03-21T06:44:15.004364", "level": "ERROR", "message": "Failed to insert VIP level VipLevel.NORMAL: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum viplevel: \"NORMAL\"\nLINE 1: ...TO vip (level, describe, price, discount) VALUES ('NORMAL', ...\n                                                             ^\n\n[SQL: INSERT INTO vip (level, describe, price, discount) VALUES (%(level)s, %(describe)s, %(price)s, %(discount)s) RETURNING vip.id, vip.created_at, vip.updated_at]\n[parameters: {'level': 'NORMAL', 'describe': '普通会员: 旋律听写, 节奏练习, 节奏听写', 'price': 0, 'discount': 0}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)", "module": "init_data", "function": "init_vip_levels", "line": 50}
{"timestamp": "2025-03-21T06:44:15.008672", "level": "ERROR", "message": "Failed to initialize VIP levels", "module": "init_data", "function": "init_vip_levels", "line": 57, "exception": {"type": "DataError", "message": "(psycopg2.errors.InvalidTextRepresentation) invalid input value for enum viplevel: \"NORMAL\"\nLINE 1: ...TO vip (level, describe, price, discount) VALUES ('NORMAL', ...\n                                                             ^\n\n[SQL: INSERT INTO vip (level, describe, price, discount) VALUES (%(level)s, %(describe)s, %(price)s, %(discount)s) RETURNING vip.id, vip.created_at, vip.updated_at]\n[parameters: {'level': 'NORMAL', 'describe': '普通会员: 旋律听写, 节奏练习, 节奏听写', 'price': 0, 'discount': 0}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.InvalidTextRepresentation: invalid input value for enum viplevel: \"NORMAL\"\nLINE 1: ...TO vip (level, describe, price, discount) VALUES ('NORMAL', ...\n                                                             ^\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 51, in init_vip_levels\n    raise e\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 48, in init_vip_levels\n    db.flush()  # 立即刷新以检查是否有问题\n    ^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4312, in flush\n    self._flush(objects)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4447, in _flush\n    with util.safe_reraise():\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py\", line 146, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4408, in _flush\n    flush_context.execute()\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py\", line 466, in execute\n    rec.execute(self)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py\", line 642, in execute\n    util.preloaded.orm_persistence.save_obj(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py\", line 93, in save_obj\n    _emit_insert_statements(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py\", line 1226, in _emit_insert_statements\n    result = connection.execute(\n             ^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1416, in execute\n    return meth(\n           ^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/sql/elements.py\", line 516, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1639, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1848, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1988, in _exec_single_context\n    self._handle_dbapi_exception(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 2343, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum viplevel: \"NORMAL\"\nLINE 1: ...TO vip (level, describe, price, discount) VALUES ('NORMAL', ...\n                                                             ^\n\n[SQL: INSERT INTO vip (level, describe, price, discount) VALUES (%(level)s, %(describe)s, %(price)s, %(discount)s) RETURNING vip.id, vip.created_at, vip.updated_at]\n[parameters: {'level': 'NORMAL', 'describe': '普通会员: 旋律听写, 节奏练习, 节奏听写', 'price': 0, 'discount': 0}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)"}}
{"timestamp": "2025-03-21T06:44:15.012292", "level": "ERROR", "message": "Failed to initialize application", "module": "main", "function": "lifespan", "line": 41, "exception": {"type": "DataError", "message": "(psycopg2.errors.InvalidTextRepresentation) invalid input value for enum viplevel: \"NORMAL\"\nLINE 1: ...TO vip (level, describe, price, discount) VALUES ('NORMAL', ...\n                                                             ^\n\n[SQL: INSERT INTO vip (level, describe, price, discount) VALUES (%(level)s, %(describe)s, %(price)s, %(discount)s) RETURNING vip.id, vip.created_at, vip.updated_at]\n[parameters: {'level': 'NORMAL', 'describe': '普通会员: 旋律听写, 节奏练习, 节奏听写', 'price': 0, 'discount': 0}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.InvalidTextRepresentation: invalid input value for enum viplevel: \"NORMAL\"\nLINE 1: ...TO vip (level, describe, price, discount) VALUES ('NORMAL', ...\n                                                             ^\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/main.py\", line 34, in lifespan\n    init_vip_levels(db)\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 59, in init_vip_levels\n    raise e\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 51, in init_vip_levels\n    raise e\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 48, in init_vip_levels\n    db.flush()  # 立即刷新以检查是否有问题\n    ^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4312, in flush\n    self._flush(objects)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4447, in _flush\n    with util.safe_reraise():\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py\", line 146, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4408, in _flush\n    flush_context.execute()\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py\", line 466, in execute\n    rec.execute(self)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py\", line 642, in execute\n    util.preloaded.orm_persistence.save_obj(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py\", line 93, in save_obj\n    _emit_insert_statements(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py\", line 1226, in _emit_insert_statements\n    result = connection.execute(\n             ^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1416, in execute\n    return meth(\n           ^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/sql/elements.py\", line 516, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1639, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1848, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1988, in _exec_single_context\n    self._handle_dbapi_exception(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 2343, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum viplevel: \"NORMAL\"\nLINE 1: ...TO vip (level, describe, price, discount) VALUES ('NORMAL', ...\n                                                             ^\n\n[SQL: INSERT INTO vip (level, describe, price, discount) VALUES (%(level)s, %(describe)s, %(price)s, %(discount)s) RETURNING vip.id, vip.created_at, vip.updated_at]\n[parameters: {'level': 'NORMAL', 'describe': '普通会员: 旋律听写, 节奏练习, 节奏听写', 'price': 0, 'discount': 0}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)"}}
{"timestamp": "2025-03-21T06:45:15.560141", "level": "ERROR", "message": "Failed to insert VIP level VipLevel.NORMAL: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum viplevel: \"NORMAL\"\nLINE 1: ...TO vip (level, describe, price, discount) VALUES ('NORMAL', ...\n                                                             ^\n\n[SQL: INSERT INTO vip (level, describe, price, discount) VALUES (%(level)s, %(describe)s, %(price)s, %(discount)s) RETURNING vip.id, vip.created_at, vip.updated_at]\n[parameters: {'level': 'NORMAL', 'describe': '普通会员: 旋律听写, 节奏练习, 节奏听写', 'price': 0, 'discount': 0}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)", "module": "init_data", "function": "init_vip_levels", "line": 50}
{"timestamp": "2025-03-21T06:45:15.564424", "level": "ERROR", "message": "Failed to initialize VIP levels", "module": "init_data", "function": "init_vip_levels", "line": 57, "exception": {"type": "DataError", "message": "(psycopg2.errors.InvalidTextRepresentation) invalid input value for enum viplevel: \"NORMAL\"\nLINE 1: ...TO vip (level, describe, price, discount) VALUES ('NORMAL', ...\n                                                             ^\n\n[SQL: INSERT INTO vip (level, describe, price, discount) VALUES (%(level)s, %(describe)s, %(price)s, %(discount)s) RETURNING vip.id, vip.created_at, vip.updated_at]\n[parameters: {'level': 'NORMAL', 'describe': '普通会员: 旋律听写, 节奏练习, 节奏听写', 'price': 0, 'discount': 0}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.InvalidTextRepresentation: invalid input value for enum viplevel: \"NORMAL\"\nLINE 1: ...TO vip (level, describe, price, discount) VALUES ('NORMAL', ...\n                                                             ^\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 51, in init_vip_levels\n    raise e\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 48, in init_vip_levels\n    db.flush()  # 立即刷新以检查是否有问题\n    ^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4312, in flush\n    self._flush(objects)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4447, in _flush\n    with util.safe_reraise():\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py\", line 146, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4408, in _flush\n    flush_context.execute()\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py\", line 466, in execute\n    rec.execute(self)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py\", line 642, in execute\n    util.preloaded.orm_persistence.save_obj(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py\", line 93, in save_obj\n    _emit_insert_statements(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py\", line 1226, in _emit_insert_statements\n    result = connection.execute(\n             ^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1416, in execute\n    return meth(\n           ^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/sql/elements.py\", line 516, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1639, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1848, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1988, in _exec_single_context\n    self._handle_dbapi_exception(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 2343, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum viplevel: \"NORMAL\"\nLINE 1: ...TO vip (level, describe, price, discount) VALUES ('NORMAL', ...\n                                                             ^\n\n[SQL: INSERT INTO vip (level, describe, price, discount) VALUES (%(level)s, %(describe)s, %(price)s, %(discount)s) RETURNING vip.id, vip.created_at, vip.updated_at]\n[parameters: {'level': 'NORMAL', 'describe': '普通会员: 旋律听写, 节奏练习, 节奏听写', 'price': 0, 'discount': 0}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)"}}
{"timestamp": "2025-03-21T06:45:15.568065", "level": "ERROR", "message": "Failed to initialize application", "module": "main", "function": "lifespan", "line": 41, "exception": {"type": "DataError", "message": "(psycopg2.errors.InvalidTextRepresentation) invalid input value for enum viplevel: \"NORMAL\"\nLINE 1: ...TO vip (level, describe, price, discount) VALUES ('NORMAL', ...\n                                                             ^\n\n[SQL: INSERT INTO vip (level, describe, price, discount) VALUES (%(level)s, %(describe)s, %(price)s, %(discount)s) RETURNING vip.id, vip.created_at, vip.updated_at]\n[parameters: {'level': 'NORMAL', 'describe': '普通会员: 旋律听写, 节奏练习, 节奏听写', 'price': 0, 'discount': 0}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.InvalidTextRepresentation: invalid input value for enum viplevel: \"NORMAL\"\nLINE 1: ...TO vip (level, describe, price, discount) VALUES ('NORMAL', ...\n                                                             ^\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/main.py\", line 34, in lifespan\n    init_vip_levels(db)\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 59, in init_vip_levels\n    raise e\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 51, in init_vip_levels\n    raise e\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 48, in init_vip_levels\n    db.flush()  # 立即刷新以检查是否有问题\n    ^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4312, in flush\n    self._flush(objects)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4447, in _flush\n    with util.safe_reraise():\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py\", line 146, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4408, in _flush\n    flush_context.execute()\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py\", line 466, in execute\n    rec.execute(self)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py\", line 642, in execute\n    util.preloaded.orm_persistence.save_obj(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py\", line 93, in save_obj\n    _emit_insert_statements(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py\", line 1226, in _emit_insert_statements\n    result = connection.execute(\n             ^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1416, in execute\n    return meth(\n           ^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/sql/elements.py\", line 516, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1639, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1848, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1988, in _exec_single_context\n    self._handle_dbapi_exception(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 2343, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum viplevel: \"NORMAL\"\nLINE 1: ...TO vip (level, describe, price, discount) VALUES ('NORMAL', ...\n                                                             ^\n\n[SQL: INSERT INTO vip (level, describe, price, discount) VALUES (%(level)s, %(describe)s, %(price)s, %(discount)s) RETURNING vip.id, vip.created_at, vip.updated_at]\n[parameters: {'level': 'NORMAL', 'describe': '普通会员: 旋律听写, 节奏练习, 节奏听写', 'price': 0, 'discount': 0}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)"}}
{"timestamp": "2025-03-21T06:59:18.916736", "level": "ERROR", "message": "Failed to insert VIP level VipLevel.FREE: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum viplevel: \"free\"\nLINE 1: ...NTO vip (level, describe, price, discount) VALUES ('free', '...\n                                                              ^\n\n[SQL: INSERT INTO vip (level, describe, price, discount) VALUES (%(level)s, %(describe)s, %(price)s, %(discount)s) RETURNING vip.id, vip.created_at, vip.updated_at]\n[parameters: {'level': 'free', 'describe': '普通用户: *****************', 'price': 0, 'discount': 0}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)", "module": "init_data", "function": "init_vip_levels", "line": 50}
{"timestamp": "2025-03-21T06:59:18.921056", "level": "ERROR", "message": "Failed to initialize VIP levels", "module": "init_data", "function": "init_vip_levels", "line": 57, "exception": {"type": "DataError", "message": "(psycopg2.errors.InvalidTextRepresentation) invalid input value for enum viplevel: \"free\"\nLINE 1: ...NTO vip (level, describe, price, discount) VALUES ('free', '...\n                                                              ^\n\n[SQL: INSERT INTO vip (level, describe, price, discount) VALUES (%(level)s, %(describe)s, %(price)s, %(discount)s) RETURNING vip.id, vip.created_at, vip.updated_at]\n[parameters: {'level': 'free', 'describe': '普通用户: *****************', 'price': 0, 'discount': 0}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.InvalidTextRepresentation: invalid input value for enum viplevel: \"free\"\nLINE 1: ...NTO vip (level, describe, price, discount) VALUES ('free', '...\n                                                              ^\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 51, in init_vip_levels\n    raise e\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 48, in init_vip_levels\n    db.flush()  # 立即刷新以检查是否有问题\n    ^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4312, in flush\n    self._flush(objects)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4447, in _flush\n    with util.safe_reraise():\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py\", line 146, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4408, in _flush\n    flush_context.execute()\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py\", line 466, in execute\n    rec.execute(self)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py\", line 642, in execute\n    util.preloaded.orm_persistence.save_obj(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py\", line 93, in save_obj\n    _emit_insert_statements(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py\", line 1226, in _emit_insert_statements\n    result = connection.execute(\n             ^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1416, in execute\n    return meth(\n           ^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/sql/elements.py\", line 516, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1639, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1848, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1988, in _exec_single_context\n    self._handle_dbapi_exception(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 2343, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum viplevel: \"free\"\nLINE 1: ...NTO vip (level, describe, price, discount) VALUES ('free', '...\n                                                              ^\n\n[SQL: INSERT INTO vip (level, describe, price, discount) VALUES (%(level)s, %(describe)s, %(price)s, %(discount)s) RETURNING vip.id, vip.created_at, vip.updated_at]\n[parameters: {'level': 'free', 'describe': '普通用户: *****************', 'price': 0, 'discount': 0}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)"}}
{"timestamp": "2025-03-21T06:59:18.924694", "level": "ERROR", "message": "Failed to initialize application", "module": "main", "function": "lifespan", "line": 41, "exception": {"type": "DataError", "message": "(psycopg2.errors.InvalidTextRepresentation) invalid input value for enum viplevel: \"free\"\nLINE 1: ...NTO vip (level, describe, price, discount) VALUES ('free', '...\n                                                              ^\n\n[SQL: INSERT INTO vip (level, describe, price, discount) VALUES (%(level)s, %(describe)s, %(price)s, %(discount)s) RETURNING vip.id, vip.created_at, vip.updated_at]\n[parameters: {'level': 'free', 'describe': '普通用户: *****************', 'price': 0, 'discount': 0}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.InvalidTextRepresentation: invalid input value for enum viplevel: \"free\"\nLINE 1: ...NTO vip (level, describe, price, discount) VALUES ('free', '...\n                                                              ^\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/main.py\", line 34, in lifespan\n    init_vip_levels(db)\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 59, in init_vip_levels\n    raise e\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 51, in init_vip_levels\n    raise e\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 48, in init_vip_levels\n    db.flush()  # 立即刷新以检查是否有问题\n    ^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4312, in flush\n    self._flush(objects)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4447, in _flush\n    with util.safe_reraise():\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py\", line 146, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4408, in _flush\n    flush_context.execute()\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py\", line 466, in execute\n    rec.execute(self)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py\", line 642, in execute\n    util.preloaded.orm_persistence.save_obj(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py\", line 93, in save_obj\n    _emit_insert_statements(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py\", line 1226, in _emit_insert_statements\n    result = connection.execute(\n             ^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1416, in execute\n    return meth(\n           ^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/sql/elements.py\", line 516, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1639, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1848, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1988, in _exec_single_context\n    self._handle_dbapi_exception(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 2343, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum viplevel: \"free\"\nLINE 1: ...NTO vip (level, describe, price, discount) VALUES ('free', '...\n                                                              ^\n\n[SQL: INSERT INTO vip (level, describe, price, discount) VALUES (%(level)s, %(describe)s, %(price)s, %(discount)s) RETURNING vip.id, vip.created_at, vip.updated_at]\n[parameters: {'level': 'free', 'describe': '普通用户: *****************', 'price': 0, 'discount': 0}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)"}}
{"timestamp": "2025-03-21T06:59:25.867503", "level": "ERROR", "message": "Failed to insert VIP level VipLevel.FREE: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum viplevel: \"free\"\nLINE 1: ...NTO vip (level, describe, price, discount) VALUES ('free', '...\n                                                              ^\n\n[SQL: INSERT INTO vip (level, describe, price, discount) VALUES (%(level)s, %(describe)s, %(price)s, %(discount)s) RETURNING vip.id, vip.created_at, vip.updated_at]\n[parameters: {'level': 'free', 'describe': '普通用户: *****************', 'price': 0, 'discount': 0}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)", "module": "init_data", "function": "init_vip_levels", "line": 50}
{"timestamp": "2025-03-21T06:59:25.881612", "level": "ERROR", "message": "Failed to initialize VIP levels", "module": "init_data", "function": "init_vip_levels", "line": 57, "exception": {"type": "DataError", "message": "(psycopg2.errors.InvalidTextRepresentation) invalid input value for enum viplevel: \"free\"\nLINE 1: ...NTO vip (level, describe, price, discount) VALUES ('free', '...\n                                                              ^\n\n[SQL: INSERT INTO vip (level, describe, price, discount) VALUES (%(level)s, %(describe)s, %(price)s, %(discount)s) RETURNING vip.id, vip.created_at, vip.updated_at]\n[parameters: {'level': 'free', 'describe': '普通用户: *****************', 'price': 0, 'discount': 0}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.InvalidTextRepresentation: invalid input value for enum viplevel: \"free\"\nLINE 1: ...NTO vip (level, describe, price, discount) VALUES ('free', '...\n                                                              ^\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 51, in init_vip_levels\n    raise e\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 48, in init_vip_levels\n    db.flush()  # 立即刷新以检查是否有问题\n    ^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4312, in flush\n    self._flush(objects)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4447, in _flush\n    with util.safe_reraise():\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py\", line 146, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4408, in _flush\n    flush_context.execute()\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py\", line 466, in execute\n    rec.execute(self)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py\", line 642, in execute\n    util.preloaded.orm_persistence.save_obj(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py\", line 93, in save_obj\n    _emit_insert_statements(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py\", line 1226, in _emit_insert_statements\n    result = connection.execute(\n             ^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1416, in execute\n    return meth(\n           ^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/sql/elements.py\", line 516, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1639, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1848, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1988, in _exec_single_context\n    self._handle_dbapi_exception(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 2343, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum viplevel: \"free\"\nLINE 1: ...NTO vip (level, describe, price, discount) VALUES ('free', '...\n                                                              ^\n\n[SQL: INSERT INTO vip (level, describe, price, discount) VALUES (%(level)s, %(describe)s, %(price)s, %(discount)s) RETURNING vip.id, vip.created_at, vip.updated_at]\n[parameters: {'level': 'free', 'describe': '普通用户: *****************', 'price': 0, 'discount': 0}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)"}}
{"timestamp": "2025-03-21T06:59:25.884955", "level": "ERROR", "message": "Failed to initialize application", "module": "main", "function": "lifespan", "line": 41, "exception": {"type": "DataError", "message": "(psycopg2.errors.InvalidTextRepresentation) invalid input value for enum viplevel: \"free\"\nLINE 1: ...NTO vip (level, describe, price, discount) VALUES ('free', '...\n                                                              ^\n\n[SQL: INSERT INTO vip (level, describe, price, discount) VALUES (%(level)s, %(describe)s, %(price)s, %(discount)s) RETURNING vip.id, vip.created_at, vip.updated_at]\n[parameters: {'level': 'free', 'describe': '普通用户: *****************', 'price': 0, 'discount': 0}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.InvalidTextRepresentation: invalid input value for enum viplevel: \"free\"\nLINE 1: ...NTO vip (level, describe, price, discount) VALUES ('free', '...\n                                                              ^\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/main.py\", line 34, in lifespan\n    init_vip_levels(db)\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 59, in init_vip_levels\n    raise e\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 51, in init_vip_levels\n    raise e\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 48, in init_vip_levels\n    db.flush()  # 立即刷新以检查是否有问题\n    ^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4312, in flush\n    self._flush(objects)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4447, in _flush\n    with util.safe_reraise():\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py\", line 146, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4408, in _flush\n    flush_context.execute()\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py\", line 466, in execute\n    rec.execute(self)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py\", line 642, in execute\n    util.preloaded.orm_persistence.save_obj(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py\", line 93, in save_obj\n    _emit_insert_statements(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py\", line 1226, in _emit_insert_statements\n    result = connection.execute(\n             ^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1416, in execute\n    return meth(\n           ^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/sql/elements.py\", line 516, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1639, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1848, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1988, in _exec_single_context\n    self._handle_dbapi_exception(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 2343, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum viplevel: \"free\"\nLINE 1: ...NTO vip (level, describe, price, discount) VALUES ('free', '...\n                                                              ^\n\n[SQL: INSERT INTO vip (level, describe, price, discount) VALUES (%(level)s, %(describe)s, %(price)s, %(discount)s) RETURNING vip.id, vip.created_at, vip.updated_at]\n[parameters: {'level': 'free', 'describe': '普通用户: *****************', 'price': 0, 'discount': 0}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)"}}
{"timestamp": "2025-03-21T07:00:07.009774", "level": "ERROR", "message": "Failed to insert VIP level VipLevel.NORMAL: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum viplevel: \"NORMAL\"\nLINE 1: ...TO vip (level, describe, price, discount) VALUES ('NORMAL', ...\n                                                             ^\n\n[SQL: INSERT INTO vip (level, describe, price, discount) VALUES (%(level)s, %(describe)s, %(price)s, %(discount)s) RETURNING vip.id, vip.created_at, vip.updated_at]\n[parameters: {'level': 'NORMAL', 'describe': '普通会员: 旋律听写, 节奏练习, 节奏听写', 'price': 0, 'discount': 0}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)", "module": "init_data", "function": "init_vip_levels", "line": 50}
{"timestamp": "2025-03-21T07:00:07.021061", "level": "ERROR", "message": "Failed to initialize VIP levels", "module": "init_data", "function": "init_vip_levels", "line": 57, "exception": {"type": "DataError", "message": "(psycopg2.errors.InvalidTextRepresentation) invalid input value for enum viplevel: \"NORMAL\"\nLINE 1: ...TO vip (level, describe, price, discount) VALUES ('NORMAL', ...\n                                                             ^\n\n[SQL: INSERT INTO vip (level, describe, price, discount) VALUES (%(level)s, %(describe)s, %(price)s, %(discount)s) RETURNING vip.id, vip.created_at, vip.updated_at]\n[parameters: {'level': 'NORMAL', 'describe': '普通会员: 旋律听写, 节奏练习, 节奏听写', 'price': 0, 'discount': 0}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.InvalidTextRepresentation: invalid input value for enum viplevel: \"NORMAL\"\nLINE 1: ...TO vip (level, describe, price, discount) VALUES ('NORMAL', ...\n                                                             ^\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 51, in init_vip_levels\n    raise e\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 48, in init_vip_levels\n    db.flush()  # 立即刷新以检查是否有问题\n    ^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4312, in flush\n    self._flush(objects)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4447, in _flush\n    with util.safe_reraise():\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py\", line 146, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4408, in _flush\n    flush_context.execute()\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py\", line 466, in execute\n    rec.execute(self)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py\", line 642, in execute\n    util.preloaded.orm_persistence.save_obj(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py\", line 93, in save_obj\n    _emit_insert_statements(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py\", line 1226, in _emit_insert_statements\n    result = connection.execute(\n             ^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1416, in execute\n    return meth(\n           ^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/sql/elements.py\", line 516, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1639, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1848, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1988, in _exec_single_context\n    self._handle_dbapi_exception(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 2343, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum viplevel: \"NORMAL\"\nLINE 1: ...TO vip (level, describe, price, discount) VALUES ('NORMAL', ...\n                                                             ^\n\n[SQL: INSERT INTO vip (level, describe, price, discount) VALUES (%(level)s, %(describe)s, %(price)s, %(discount)s) RETURNING vip.id, vip.created_at, vip.updated_at]\n[parameters: {'level': 'NORMAL', 'describe': '普通会员: 旋律听写, 节奏练习, 节奏听写', 'price': 0, 'discount': 0}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)"}}
{"timestamp": "2025-03-21T07:00:07.026985", "level": "ERROR", "message": "Failed to initialize application", "module": "main", "function": "lifespan", "line": 41, "exception": {"type": "DataError", "message": "(psycopg2.errors.InvalidTextRepresentation) invalid input value for enum viplevel: \"NORMAL\"\nLINE 1: ...TO vip (level, describe, price, discount) VALUES ('NORMAL', ...\n                                                             ^\n\n[SQL: INSERT INTO vip (level, describe, price, discount) VALUES (%(level)s, %(describe)s, %(price)s, %(discount)s) RETURNING vip.id, vip.created_at, vip.updated_at]\n[parameters: {'level': 'NORMAL', 'describe': '普通会员: 旋律听写, 节奏练习, 节奏听写', 'price': 0, 'discount': 0}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.InvalidTextRepresentation: invalid input value for enum viplevel: \"NORMAL\"\nLINE 1: ...TO vip (level, describe, price, discount) VALUES ('NORMAL', ...\n                                                             ^\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/main.py\", line 34, in lifespan\n    init_vip_levels(db)\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 59, in init_vip_levels\n    raise e\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 51, in init_vip_levels\n    raise e\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 48, in init_vip_levels\n    db.flush()  # 立即刷新以检查是否有问题\n    ^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4312, in flush\n    self._flush(objects)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4447, in _flush\n    with util.safe_reraise():\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py\", line 146, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4408, in _flush\n    flush_context.execute()\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py\", line 466, in execute\n    rec.execute(self)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py\", line 642, in execute\n    util.preloaded.orm_persistence.save_obj(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py\", line 93, in save_obj\n    _emit_insert_statements(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py\", line 1226, in _emit_insert_statements\n    result = connection.execute(\n             ^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1416, in execute\n    return meth(\n           ^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/sql/elements.py\", line 516, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1639, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1848, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1988, in _exec_single_context\n    self._handle_dbapi_exception(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 2343, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum viplevel: \"NORMAL\"\nLINE 1: ...TO vip (level, describe, price, discount) VALUES ('NORMAL', ...\n                                                             ^\n\n[SQL: INSERT INTO vip (level, describe, price, discount) VALUES (%(level)s, %(describe)s, %(price)s, %(discount)s) RETURNING vip.id, vip.created_at, vip.updated_at]\n[parameters: {'level': 'NORMAL', 'describe': '普通会员: 旋律听写, 节奏练习, 节奏听写', 'price': 0, 'discount': 0}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)"}}
{"timestamp": "2025-03-21T07:00:54.378217", "level": "ERROR", "message": "Failed to insert VIP level VipLevel.NORMAL: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum viplevel: \"NORMAL\"\nLINE 1: ...TO vip (level, describe, price, discount) VALUES ('NORMAL', ...\n                                                             ^\n\n[SQL: INSERT INTO vip (level, describe, price, discount) VALUES (%(level)s, %(describe)s, %(price)s, %(discount)s) RETURNING vip.id, vip.created_at, vip.updated_at]\n[parameters: {'level': 'NORMAL', 'describe': '普通会员: 旋律听写, 节奏练习, 节奏听写', 'price': 0, 'discount': 0}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)", "module": "init_data", "function": "init_vip_levels", "line": 50}
{"timestamp": "2025-03-21T07:00:54.382605", "level": "ERROR", "message": "Failed to initialize VIP levels", "module": "init_data", "function": "init_vip_levels", "line": 57, "exception": {"type": "DataError", "message": "(psycopg2.errors.InvalidTextRepresentation) invalid input value for enum viplevel: \"NORMAL\"\nLINE 1: ...TO vip (level, describe, price, discount) VALUES ('NORMAL', ...\n                                                             ^\n\n[SQL: INSERT INTO vip (level, describe, price, discount) VALUES (%(level)s, %(describe)s, %(price)s, %(discount)s) RETURNING vip.id, vip.created_at, vip.updated_at]\n[parameters: {'level': 'NORMAL', 'describe': '普通会员: 旋律听写, 节奏练习, 节奏听写', 'price': 0, 'discount': 0}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.InvalidTextRepresentation: invalid input value for enum viplevel: \"NORMAL\"\nLINE 1: ...TO vip (level, describe, price, discount) VALUES ('NORMAL', ...\n                                                             ^\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 51, in init_vip_levels\n    raise e\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 48, in init_vip_levels\n    db.flush()  # 立即刷新以检查是否有问题\n    ^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4312, in flush\n    self._flush(objects)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4447, in _flush\n    with util.safe_reraise():\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py\", line 146, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4408, in _flush\n    flush_context.execute()\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py\", line 466, in execute\n    rec.execute(self)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py\", line 642, in execute\n    util.preloaded.orm_persistence.save_obj(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py\", line 93, in save_obj\n    _emit_insert_statements(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py\", line 1226, in _emit_insert_statements\n    result = connection.execute(\n             ^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1416, in execute\n    return meth(\n           ^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/sql/elements.py\", line 516, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1639, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1848, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1988, in _exec_single_context\n    self._handle_dbapi_exception(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 2343, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum viplevel: \"NORMAL\"\nLINE 1: ...TO vip (level, describe, price, discount) VALUES ('NORMAL', ...\n                                                             ^\n\n[SQL: INSERT INTO vip (level, describe, price, discount) VALUES (%(level)s, %(describe)s, %(price)s, %(discount)s) RETURNING vip.id, vip.created_at, vip.updated_at]\n[parameters: {'level': 'NORMAL', 'describe': '普通会员: 旋律听写, 节奏练习, 节奏听写', 'price': 0, 'discount': 0}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)"}}
{"timestamp": "2025-03-21T07:00:54.386343", "level": "ERROR", "message": "Failed to initialize application", "module": "main", "function": "lifespan", "line": 41, "exception": {"type": "DataError", "message": "(psycopg2.errors.InvalidTextRepresentation) invalid input value for enum viplevel: \"NORMAL\"\nLINE 1: ...TO vip (level, describe, price, discount) VALUES ('NORMAL', ...\n                                                             ^\n\n[SQL: INSERT INTO vip (level, describe, price, discount) VALUES (%(level)s, %(describe)s, %(price)s, %(discount)s) RETURNING vip.id, vip.created_at, vip.updated_at]\n[parameters: {'level': 'NORMAL', 'describe': '普通会员: 旋律听写, 节奏练习, 节奏听写', 'price': 0, 'discount': 0}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.InvalidTextRepresentation: invalid input value for enum viplevel: \"NORMAL\"\nLINE 1: ...TO vip (level, describe, price, discount) VALUES ('NORMAL', ...\n                                                             ^\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/main.py\", line 34, in lifespan\n    init_vip_levels(db)\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 59, in init_vip_levels\n    raise e\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 51, in init_vip_levels\n    raise e\n  File \"/home/yu/gitdev/shengyibaodian/app/db/init_data.py\", line 48, in init_vip_levels\n    db.flush()  # 立即刷新以检查是否有问题\n    ^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4312, in flush\n    self._flush(objects)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4447, in _flush\n    with util.safe_reraise():\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py\", line 146, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4408, in _flush\n    flush_context.execute()\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py\", line 466, in execute\n    rec.execute(self)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py\", line 642, in execute\n    util.preloaded.orm_persistence.save_obj(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py\", line 93, in save_obj\n    _emit_insert_statements(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py\", line 1226, in _emit_insert_statements\n    result = connection.execute(\n             ^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1416, in execute\n    return meth(\n           ^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/sql/elements.py\", line 516, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1639, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1848, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1988, in _exec_single_context\n    self._handle_dbapi_exception(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 2343, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/sqlalchemy/engine/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum viplevel: \"NORMAL\"\nLINE 1: ...TO vip (level, describe, price, discount) VALUES ('NORMAL', ...\n                                                             ^\n\n[SQL: INSERT INTO vip (level, describe, price, discount) VALUES (%(level)s, %(describe)s, %(price)s, %(discount)s) RETURNING vip.id, vip.created_at, vip.updated_at]\n[parameters: {'level': 'NORMAL', 'describe': '普通会员: 旋律听写, 节奏练习, 节奏听写', 'price': 0, 'discount': 0}]\n(Background on this error at: https://sqlalche.me/e/20/9h9h)"}}
{"timestamp": "2025-03-21T07:13:12.448907", "level": "ERROR", "message": "Request failed", "module": "logging", "function": "dispatch", "line": 57, "exception": {"type": "ResponseValidationError", "message": "2 validation errors:\n  {'type': 'greater_than', 'loc': ('response', 0, 'price'), 'msg': 'Input should be greater than 0', 'input': 0.0, 'ctx': {'gt': 0.0}, 'url': 'https://errors.pydantic.dev/2.5/v/greater_than'}\n  {'type': 'greater_than', 'loc': ('response', 1, 'price'), 'msg': 'Input should be greater than 0', 'input': 0.0, 'ctx': {'gt': 0.0}, 'url': 'https://errors.pydantic.dev/2.5/v/greater_than'}\n", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/anyio/streams/memory.py\", line 98, in receive\n    return self.receive_nowait()\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/anyio/streams/memory.py\", line 93, in receive_nowait\n    raise WouldBlock\nanyio.WouldBlock\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/base.py\", line 78, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/anyio/streams/memory.py\", line 118, in receive\n    raise EndOfStream\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/middleware/logging.py\", line 34, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/base.py\", line 84, in call_next\n    raise app_exc\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/base.py\", line 70, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 83, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 79, in __call__\n    raise exc\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 68, in __call__\n    await self.app(scope, receive, sender)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 20, in __call__\n    raise e\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 17, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/routing.py\", line 718, in __call__\n    await route.handle(scope, receive, send)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/routing.py\", line 276, in handle\n    await self.app(scope, receive, send)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/routing.py\", line 66, in app\n    response = await func(request)\n               ^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/fastapi/routing.py\", line 292, in app\n    content = await serialize_response(\n              ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/fastapi/routing.py\", line 155, in serialize_response\n    raise ResponseValidationError(\nfastapi.exceptions.ResponseValidationError: 2 validation errors:\n  {'type': 'greater_than', 'loc': ('response', 0, 'price'), 'msg': 'Input should be greater than 0', 'input': 0.0, 'ctx': {'gt': 0.0}, 'url': 'https://errors.pydantic.dev/2.5/v/greater_than'}\n  {'type': 'greater_than', 'loc': ('response', 1, 'price'), 'msg': 'Input should be greater than 0', 'input': 0.0, 'ctx': {'gt': 0.0}, 'url': 'https://errors.pydantic.dev/2.5/v/greater_than'}\n"}, "request_id": "a16ceeb4-b24f-4717-9de4-2adacc099c54", "path": "/api/v1/vips", "method": "GET"}
{"timestamp": "2025-03-21T07:14:15.923084", "level": "ERROR", "message": "Request failed", "module": "logging", "function": "dispatch", "line": 57, "exception": {"type": "ResponseValidationError", "message": "2 validation errors:\n  {'type': 'greater_than', 'loc': ('response', 0, 'price'), 'msg': 'Input should be greater than 0', 'input': 0.0, 'ctx': {'gt': 0.0}, 'url': 'https://errors.pydantic.dev/2.5/v/greater_than'}\n  {'type': 'greater_than', 'loc': ('response', 1, 'price'), 'msg': 'Input should be greater than 0', 'input': 0.0, 'ctx': {'gt': 0.0}, 'url': 'https://errors.pydantic.dev/2.5/v/greater_than'}\n", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/anyio/streams/memory.py\", line 98, in receive\n    return self.receive_nowait()\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/anyio/streams/memory.py\", line 93, in receive_nowait\n    raise WouldBlock\nanyio.WouldBlock\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/base.py\", line 78, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/anyio/streams/memory.py\", line 118, in receive\n    raise EndOfStream\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/middleware/logging.py\", line 34, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/base.py\", line 84, in call_next\n    raise app_exc\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/base.py\", line 70, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 83, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 79, in __call__\n    raise exc\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 68, in __call__\n    await self.app(scope, receive, sender)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 20, in __call__\n    raise e\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 17, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/routing.py\", line 718, in __call__\n    await route.handle(scope, receive, send)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/routing.py\", line 276, in handle\n    await self.app(scope, receive, send)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/routing.py\", line 66, in app\n    response = await func(request)\n               ^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/fastapi/routing.py\", line 292, in app\n    content = await serialize_response(\n              ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/fastapi/routing.py\", line 155, in serialize_response\n    raise ResponseValidationError(\nfastapi.exceptions.ResponseValidationError: 2 validation errors:\n  {'type': 'greater_than', 'loc': ('response', 0, 'price'), 'msg': 'Input should be greater than 0', 'input': 0.0, 'ctx': {'gt': 0.0}, 'url': 'https://errors.pydantic.dev/2.5/v/greater_than'}\n  {'type': 'greater_than', 'loc': ('response', 1, 'price'), 'msg': 'Input should be greater than 0', 'input': 0.0, 'ctx': {'gt': 0.0}, 'url': 'https://errors.pydantic.dev/2.5/v/greater_than'}\n"}, "request_id": "0c84ee46-0b80-474c-96cc-39ae328db15b", "path": "/api/v1/vips", "method": "GET"}
{"timestamp": "2025-03-21T07:15:53.476222", "level": "ERROR", "message": "Request failed", "module": "logging", "function": "dispatch", "line": 57, "exception": {"type": "ResponseValidationError", "message": "2 validation errors:\n  {'type': 'greater_than', 'loc': ('response', 0, 'price'), 'msg': 'Input should be greater than 0', 'input': 0.0, 'ctx': {'gt': 0.0}, 'url': 'https://errors.pydantic.dev/2.5/v/greater_than'}\n  {'type': 'greater_than', 'loc': ('response', 1, 'price'), 'msg': 'Input should be greater than 0', 'input': 0.0, 'ctx': {'gt': 0.0}, 'url': 'https://errors.pydantic.dev/2.5/v/greater_than'}\n", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/anyio/streams/memory.py\", line 98, in receive\n    return self.receive_nowait()\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/anyio/streams/memory.py\", line 93, in receive_nowait\n    raise WouldBlock\nanyio.WouldBlock\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/base.py\", line 78, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/anyio/streams/memory.py\", line 118, in receive\n    raise EndOfStream\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/middleware/logging.py\", line 34, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/base.py\", line 84, in call_next\n    raise app_exc\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/base.py\", line 70, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 83, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 79, in __call__\n    raise exc\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 68, in __call__\n    await self.app(scope, receive, sender)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 20, in __call__\n    raise e\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 17, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/routing.py\", line 718, in __call__\n    await route.handle(scope, receive, send)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/routing.py\", line 276, in handle\n    await self.app(scope, receive, send)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/routing.py\", line 66, in app\n    response = await func(request)\n               ^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/fastapi/routing.py\", line 292, in app\n    content = await serialize_response(\n              ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/fastapi/routing.py\", line 155, in serialize_response\n    raise ResponseValidationError(\nfastapi.exceptions.ResponseValidationError: 2 validation errors:\n  {'type': 'greater_than', 'loc': ('response', 0, 'price'), 'msg': 'Input should be greater than 0', 'input': 0.0, 'ctx': {'gt': 0.0}, 'url': 'https://errors.pydantic.dev/2.5/v/greater_than'}\n  {'type': 'greater_than', 'loc': ('response', 1, 'price'), 'msg': 'Input should be greater than 0', 'input': 0.0, 'ctx': {'gt': 0.0}, 'url': 'https://errors.pydantic.dev/2.5/v/greater_than'}\n"}, "request_id": "4a3b6460-bd5e-4a92-b271-2ff3a43aa6d0", "path": "/api/v1/vips", "method": "GET"}
{"timestamp": "2025-03-21T07:23:16.697306", "level": "ERROR", "message": "Request failed", "module": "logging", "function": "dispatch", "line": 57, "exception": {"type": "ResponseValidationError", "message": "2 validation errors:\n  {'type': 'greater_than', 'loc': ('response', 0, 'price'), 'msg': 'Input should be greater than 0', 'input': 0.0, 'ctx': {'gt': 0.0}, 'url': 'https://errors.pydantic.dev/2.5/v/greater_than'}\n  {'type': 'greater_than', 'loc': ('response', 1, 'price'), 'msg': 'Input should be greater than 0', 'input': 0.0, 'ctx': {'gt': 0.0}, 'url': 'https://errors.pydantic.dev/2.5/v/greater_than'}\n", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/anyio/streams/memory.py\", line 98, in receive\n    return self.receive_nowait()\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/anyio/streams/memory.py\", line 93, in receive_nowait\n    raise WouldBlock\nanyio.WouldBlock\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/base.py\", line 78, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/anyio/streams/memory.py\", line 118, in receive\n    raise EndOfStream\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/middleware/logging.py\", line 34, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/base.py\", line 84, in call_next\n    raise app_exc\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/base.py\", line 70, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 83, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 79, in __call__\n    raise exc\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 68, in __call__\n    await self.app(scope, receive, sender)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 20, in __call__\n    raise e\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 17, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/routing.py\", line 718, in __call__\n    await route.handle(scope, receive, send)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/routing.py\", line 276, in handle\n    await self.app(scope, receive, send)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/routing.py\", line 66, in app\n    response = await func(request)\n               ^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/fastapi/routing.py\", line 292, in app\n    content = await serialize_response(\n              ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/fastapi/routing.py\", line 155, in serialize_response\n    raise ResponseValidationError(\nfastapi.exceptions.ResponseValidationError: 2 validation errors:\n  {'type': 'greater_than', 'loc': ('response', 0, 'price'), 'msg': 'Input should be greater than 0', 'input': 0.0, 'ctx': {'gt': 0.0}, 'url': 'https://errors.pydantic.dev/2.5/v/greater_than'}\n  {'type': 'greater_than', 'loc': ('response', 1, 'price'), 'msg': 'Input should be greater than 0', 'input': 0.0, 'ctx': {'gt': 0.0}, 'url': 'https://errors.pydantic.dev/2.5/v/greater_than'}\n"}, "request_id": "4f72aed2-0141-476e-bff6-58a074c8430c", "path": "/api/v1/vips", "method": "GET"}
{"timestamp": "2025-03-21T07:47:26.417325", "level": "ERROR", "message": "Request failed", "module": "logging", "function": "dispatch", "line": 57, "exception": {"type": "TypeError", "message": "object list can't be used in 'await' expression", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/anyio/streams/memory.py\", line 98, in receive\n    return self.receive_nowait()\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/anyio/streams/memory.py\", line 93, in receive_nowait\n    raise WouldBlock\nanyio.WouldBlock\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/base.py\", line 78, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/anyio/streams/memory.py\", line 118, in receive\n    raise EndOfStream\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/middleware/logging.py\", line 34, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/base.py\", line 84, in call_next\n    raise app_exc\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/base.py\", line 70, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 83, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 79, in __call__\n    raise exc\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 68, in __call__\n    await self.app(scope, receive, sender)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 20, in __call__\n    raise e\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 17, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/routing.py\", line 718, in __call__\n    await route.handle(scope, receive, send)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/routing.py\", line 276, in handle\n    await self.app(scope, receive, send)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/routing.py\", line 66, in app\n    response = await func(request)\n               ^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/fastapi/routing.py\", line 274, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/fastapi/routing.py\", line 191, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/api/v1/vip_api.py\", line 50, in get_all_vips\n    vips = await vip_service.get_all_vips()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nTypeError: object list can't be used in 'await' expression"}, "request_id": "5cba68c0-78b8-40ac-8d7a-4377dde53a9e", "path": "/api/v1/vips", "method": "GET"}
{"timestamp": "2025-03-21T07:49:48.535535", "level": "ERROR", "message": "Request failed", "module": "logging", "function": "dispatch", "line": 57, "exception": {"type": "ResponseValidationError", "message": "2 validation errors:\n  {'type': 'greater_than', 'loc': ('response', 0, 'price'), 'msg': 'Input should be greater than 0', 'input': 0.0, 'ctx': {'gt': 0.0}, 'url': 'https://errors.pydantic.dev/2.5/v/greater_than'}\n  {'type': 'greater_than', 'loc': ('response', 1, 'price'), 'msg': 'Input should be greater than 0', 'input': 0.0, 'ctx': {'gt': 0.0}, 'url': 'https://errors.pydantic.dev/2.5/v/greater_than'}\n", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/anyio/streams/memory.py\", line 98, in receive\n    return self.receive_nowait()\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/anyio/streams/memory.py\", line 93, in receive_nowait\n    raise WouldBlock\nanyio.WouldBlock\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/base.py\", line 78, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/anyio/streams/memory.py\", line 118, in receive\n    raise EndOfStream\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/middleware/logging.py\", line 34, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/base.py\", line 84, in call_next\n    raise app_exc\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/base.py\", line 70, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 83, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 79, in __call__\n    raise exc\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 68, in __call__\n    await self.app(scope, receive, sender)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 20, in __call__\n    raise e\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 17, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/routing.py\", line 718, in __call__\n    await route.handle(scope, receive, send)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/routing.py\", line 276, in handle\n    await self.app(scope, receive, send)\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/starlette/routing.py\", line 66, in app\n    response = await func(request)\n               ^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/fastapi/routing.py\", line 292, in app\n    content = await serialize_response(\n              ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/fastapi/routing.py\", line 155, in serialize_response\n    raise ResponseValidationError(\nfastapi.exceptions.ResponseValidationError: 2 validation errors:\n  {'type': 'greater_than', 'loc': ('response', 0, 'price'), 'msg': 'Input should be greater than 0', 'input': 0.0, 'ctx': {'gt': 0.0}, 'url': 'https://errors.pydantic.dev/2.5/v/greater_than'}\n  {'type': 'greater_than', 'loc': ('response', 1, 'price'), 'msg': 'Input should be greater than 0', 'input': 0.0, 'ctx': {'gt': 0.0}, 'url': 'https://errors.pydantic.dev/2.5/v/greater_than'}\n"}, "request_id": "5c456982-01fc-4d47-b627-2267d2d42f7c", "path": "/api/v1/vips", "method": "GET"}
