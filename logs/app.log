{"timestamp": "2025-04-21T10:59:07.576840", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-21T10:59:07.581096", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-21T10:59:07.587244", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-21T10:59:07.588351", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-21T10:59:07.588970", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-21T10:59:07.589536", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-21T10:59:07.590271", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-21T10:59:07.590814", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-21T10:59:07.591569", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-21T10:59:07.591618", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-21T10:59:07.591964", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-21T10:59:07.592004", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-21T10:59:07.593561", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-21T10:59:07.593605", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-21T10:59:07.593756", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-21T10:59:07.593785", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-21T10:59:07.595660", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-21T10:59:07.595711", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-21T10:59:07.596856", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-21T10:59:22.908448", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "00b2b53d-16eb-4e7a-9773-25ec87760564", "ip": "127.0.0.1", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-21T10:59:22.912519", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "00b2b53d-16eb-4e7a-9773-25ec87760564", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-21T10:59:24.893002", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "c7fe4d36-f172-476a-88d0-bf825da578ec", "ip": "127.0.0.1", "path": "/api/v1/melody/generate", "method": "POST"}
{"timestamp": "2025-04-21T11:01:34.898421", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-21T11:01:34.901970", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-21T11:01:34.907743", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-21T11:01:34.908814", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-21T11:01:34.909388", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-21T11:01:34.909981", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-21T11:01:34.910791", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-21T11:01:34.911418", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-21T11:01:34.912291", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-21T11:01:34.912347", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-21T11:01:34.912726", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-21T11:01:34.912768", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-21T11:01:34.914406", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-21T11:01:34.914460", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-21T11:01:34.914634", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-21T11:01:34.914669", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-21T11:01:34.918160", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-21T11:01:34.918215", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-21T11:01:34.919441", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-21T11:01:38.797869", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "f50557ef-3e6d-4455-a3c9-f801c67fb843", "ip": "127.0.0.1", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-21T11:01:38.802999", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "f50557ef-3e6d-4455-a3c9-f801c67fb843", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-21T11:01:41.548204", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "619a7d21-1775-488f-b6a9-c5f3d150f1f9", "ip": "127.0.0.1", "path": "/api/v1/melody/generate", "method": "POST"}
{"timestamp": "2025-04-21T11:02:16.787744", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-21T11:02:16.792624", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-21T11:02:16.800147", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-21T11:02:16.801946", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-21T11:02:16.803108", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-21T11:02:16.803938", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-21T11:02:16.804883", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-21T11:02:16.805588", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-21T11:02:16.806514", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-21T11:02:16.806568", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-21T11:02:16.806983", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-21T11:02:16.807026", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-21T11:02:16.809017", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-21T11:02:16.809071", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-21T11:02:16.809231", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-21T11:02:16.809262", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-21T11:02:16.811567", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-21T11:02:16.811637", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-21T11:02:16.813035", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-21T11:02:26.035950", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-21T11:02:27.136543", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-21T11:02:27.139989", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-21T11:02:27.146352", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-21T11:02:27.147476", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-21T11:02:27.148104", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-21T11:02:27.148642", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-21T11:02:27.149347", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-21T11:02:27.149885", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-21T11:02:27.150629", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-21T11:02:27.150681", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-21T11:02:27.150993", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-21T11:02:27.151037", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-21T11:02:27.152622", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-21T11:02:27.152674", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-21T11:02:27.152832", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-21T11:02:27.152864", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-21T11:02:27.154689", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-21T11:02:27.154747", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-21T11:02:27.155812", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-21T11:02:36.281997", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-21T11:02:45.259855", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-21T11:02:45.262795", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-21T11:02:45.268435", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-21T11:02:45.269437", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-21T11:02:45.269998", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-21T11:02:45.270529", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-21T11:02:45.271203", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-21T11:02:45.271731", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-21T11:02:45.272465", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-21T11:02:45.272511", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-21T11:02:45.272832", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-21T11:02:45.272870", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-21T11:02:45.274253", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-21T11:02:45.274294", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-21T11:02:45.274453", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-21T11:02:45.274483", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-21T11:02:45.276298", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-21T11:02:45.276348", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-21T11:02:45.277421", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-21T11:02:51.208218", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "2964e1a5-16fe-4e9f-989d-438b0133b2a0", "ip": "127.0.0.1", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-21T11:02:51.212358", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "2964e1a5-16fe-4e9f-989d-438b0133b2a0", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-21T11:02:53.166959", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "d0631e85-4574-4135-8407-2b0ae24c8e80", "ip": "127.0.0.1", "path": "/api/v1/melody/generate", "method": "POST"}
{"timestamp": "2025-04-21T11:06:17.030680", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-21T11:06:17.034589", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-21T11:06:17.040922", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-21T11:06:17.042036", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-21T11:06:17.042660", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-21T11:06:17.043191", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-21T11:06:17.043936", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-21T11:06:17.044482", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-21T11:06:17.045250", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-21T11:06:17.045300", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-21T11:06:17.045608", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-21T11:06:17.045649", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-21T11:06:17.047156", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-21T11:06:17.047201", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-21T11:06:17.047354", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-21T11:06:17.047384", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-21T11:06:17.049545", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-21T11:06:17.049604", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-21T11:06:17.050724", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-21T11:06:21.163518", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "c6f1506d-36fe-4c15-99b8-1ffdbea26c08", "ip": "127.0.0.1", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-21T11:06:21.167712", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "c6f1506d-36fe-4c15-99b8-1ffdbea26c08", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-21T11:06:22.823743", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "a36fd4e3-301e-40cf-80f4-9538e8e1c2cd", "ip": "127.0.0.1", "path": "/api/v1/melody/generate", "method": "POST"}
{"timestamp": "2025-04-21T11:07:53.944909", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-21T11:07:53.949310", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-21T11:07:53.957116", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-21T11:07:53.958854", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-21T11:07:53.959842", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-21T11:07:53.960800", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-21T11:07:53.962100", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-21T11:07:53.963037", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-21T11:07:53.964110", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-21T11:07:53.964201", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-21T11:07:53.964748", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-21T11:07:53.964828", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-21T11:07:53.967096", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-21T11:07:53.967186", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-21T11:07:53.967453", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-21T11:07:53.967519", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-21T11:07:53.970784", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-21T11:07:53.970892", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-21T11:07:53.972846", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-21T11:07:58.760533", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "795bf4e8-e9ac-4b51-80c6-87ff55268b40", "ip": "127.0.0.1", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-21T11:07:58.764888", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "795bf4e8-e9ac-4b51-80c6-87ff55268b40", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-21T11:08:00.645309", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "a61b4fa0-d758-40a2-86ae-b358287d38ab", "ip": "127.0.0.1", "path": "/api/v1/melody/generate", "method": "POST"}
{"timestamp": "2025-04-21T11:08:00.649565", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "a61b4fa0-d758-40a2-86ae-b358287d38ab", "path": "/api/v1/melody/generate", "method": "POST"}
{"timestamp": "2025-04-21T11:14:47.175962", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-21T11:14:48.262171", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-21T11:14:48.265898", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-21T11:14:48.272077", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-21T11:14:48.273217", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-21T11:14:48.273789", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-21T11:14:48.274318", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-21T11:14:48.275078", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-21T11:14:48.275651", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-21T11:14:48.276426", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-21T11:14:48.276474", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-21T11:14:48.276837", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-21T11:14:48.276882", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-21T11:14:48.278470", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-21T11:14:48.278518", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-21T11:14:48.278664", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-21T11:14:48.278693", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-21T11:14:48.280614", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-21T11:14:48.280668", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-21T11:14:48.281751", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-21T11:25:54.455556", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-21T11:25:55.762718", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-21T11:25:55.766381", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-21T11:25:55.772672", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-21T11:25:55.773839", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-21T11:25:55.774421", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-21T11:25:55.774955", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-21T11:25:55.775658", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-21T11:25:55.776376", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-21T11:25:55.777621", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-21T11:25:55.777669", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-21T11:25:55.777984", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-21T11:25:55.778022", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-21T11:25:55.779660", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-21T11:25:55.779706", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-21T11:25:55.779854", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-21T11:25:55.779887", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-21T11:25:55.781813", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-21T11:25:55.781864", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-21T11:25:55.782958", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-21T11:26:00.854008", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "fccf4e42-e923-41d2-9a47-e8b811c3adb1", "ip": "127.0.0.1", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-21T11:26:00.858334", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "fccf4e42-e923-41d2-9a47-e8b811c3adb1", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-21T11:26:02.906671", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "c156027e-41b2-4425-be36-5038a36126fa", "ip": "127.0.0.1", "path": "/api/v1/melody/generate", "method": "POST"}
{"timestamp": "2025-04-21T11:26:02.910353", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "c156027e-41b2-4425-be36-5038a36126fa", "path": "/api/v1/melody/generate", "method": "POST"}
{"timestamp": "2025-04-21T11:27:22.525085", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "eabeb298-ec87-4cbe-afc7-d7dd26a79a43", "ip": "127.0.0.1", "path": "/api/v1/melody/generate", "method": "POST"}
{"timestamp": "2025-04-21T11:27:22.528151", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "eabeb298-ec87-4cbe-afc7-d7dd26a79a43", "path": "/api/v1/melody/generate", "method": "POST"}
{"timestamp": "2025-04-21T11:27:23.663330", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "df7a5ce4-7387-4702-b46c-82d2a4dc94f4", "ip": "127.0.0.1", "path": "/api/v1/melody/generate", "method": "POST"}
{"timestamp": "2025-04-21T11:27:23.666693", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "df7a5ce4-7387-4702-b46c-82d2a4dc94f4", "path": "/api/v1/melody/generate", "method": "POST"}
{"timestamp": "2025-04-21T11:27:24.530485", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "a40af942-5c24-4965-8121-87f9c4383c34", "ip": "127.0.0.1", "path": "/api/v1/melody/generate", "method": "POST"}
{"timestamp": "2025-04-21T11:27:24.535270", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "a40af942-5c24-4965-8121-87f9c4383c34", "path": "/api/v1/melody/generate", "method": "POST"}
{"timestamp": "2025-04-21T11:27:25.306104", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "467ac26b-b848-4eb2-916f-eb3c92df4110", "ip": "127.0.0.1", "path": "/api/v1/melody/generate", "method": "POST"}
{"timestamp": "2025-04-21T11:27:25.309276", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "467ac26b-b848-4eb2-916f-eb3c92df4110", "path": "/api/v1/melody/generate", "method": "POST"}
{"timestamp": "2025-04-21T11:27:26.162193", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "18b20593-be3b-4d01-8b70-72d752e7568f", "ip": "127.0.0.1", "path": "/api/v1/melody/generate", "method": "POST"}
{"timestamp": "2025-04-21T11:27:26.165355", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "18b20593-be3b-4d01-8b70-72d752e7568f", "path": "/api/v1/melody/generate", "method": "POST"}
{"timestamp": "2025-04-21T11:27:26.971205", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "d76c84df-fd17-49c7-9059-4dc50a3f98a0", "ip": "127.0.0.1", "path": "/api/v1/melody/generate", "method": "POST"}
{"timestamp": "2025-04-21T11:27:26.974836", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "d76c84df-fd17-49c7-9059-4dc50a3f98a0", "path": "/api/v1/melody/generate", "method": "POST"}
{"timestamp": "2025-04-21T11:27:27.793957", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "b87b2f75-a859-4048-9092-46e5086d7340", "ip": "127.0.0.1", "path": "/api/v1/melody/generate", "method": "POST"}
{"timestamp": "2025-04-21T11:27:27.796643", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "b87b2f75-a859-4048-9092-46e5086d7340", "path": "/api/v1/melody/generate", "method": "POST"}
{"timestamp": "2025-04-21T11:30:31.197087", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-22T02:23:32.400504", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T02:23:32.403796", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T02:23:32.413034", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T02:23:32.416154", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T02:23:32.417314", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T02:23:32.418642", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T02:23:32.419929", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T02:23:32.421547", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T02:23:32.423344", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T02:23:32.423394", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T02:23:32.423723", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T02:23:32.423758", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T02:23:32.424689", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T02:23:32.424730", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T02:23:32.424895", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T02:23:32.424922", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T02:23:32.426712", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T02:23:32.426765", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T02:23:32.427778", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T02:36:15.763778", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "1d29487a-7ff7-4606-90aa-115398560985", "ip": "127.0.0.1", "path": "/api/v1/melody/generate/ai", "method": "POST"}
{"timestamp": "2025-04-22T02:36:15.768343", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "1d29487a-7ff7-4606-90aa-115398560985", "path": "/api/v1/melody/generate/ai", "method": "POST"}
{"timestamp": "2025-04-22T02:36:19.456249", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "13ccd65c-eab5-48ba-be1a-d03f9a683b89", "ip": "127.0.0.1", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T02:36:19.466199", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "13ccd65c-eab5-48ba-be1a-d03f9a683b89", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T02:36:23.302881", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "8bc37f0c-a3d6-45a9-95e1-11718ca779d6", "ip": "127.0.0.1", "path": "/api/v1/melody/generate/ai", "method": "POST"}
{"timestamp": "2025-04-22T02:36:23.305545", "level": "ERROR", "message": "Error in generate_ai_melody_question : 'Request' object has no attribute 'difficulty'\nTraceback: Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/api/v1/melody_api.py\", line 49, in generate_ai_melody_question\n    return await ai_melody_service.generate_melody_question(request)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 36, in generate_melody_question\n    correct_melody = await self._generate_ai_melody(request)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 86, in _generate_ai_melody\n    prompt = self._build_melody_prompt(request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 101, in _build_melody_prompt\n    if request.difficulty == RhythmDifficulty.HIGH:\n       ^^^^^^^^^^^^^^^^^^\nAttributeError: 'Request' object has no attribute 'difficulty'\n", "module": "melody_api", "function": "generate_ai_melody_question", "line": 52}
{"timestamp": "2025-04-22T02:36:23.306039", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "8bc37f0c-a3d6-45a9-95e1-11718ca779d6", "path": "/api/v1/melody/generate/ai", "method": "POST"}
{"timestamp": "2025-04-22T02:36:45.901692", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-22T02:36:46.977552", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T02:36:46.985160", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T02:36:46.997835", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T02:36:46.999494", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T02:36:47.000188", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T02:36:47.000777", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T02:36:47.001544", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T02:36:47.002125", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T02:36:47.003659", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T02:36:47.003722", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T02:36:47.004105", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T02:36:47.004163", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T02:36:47.005153", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T02:36:47.005204", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T02:36:47.005358", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T02:36:47.005394", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T02:36:47.007340", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T02:36:47.007404", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T02:36:47.008562", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T02:36:50.618819", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "c4e80982-a36d-4603-8082-a3ac39c80ec4", "ip": "127.0.0.1", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T02:36:50.623075", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "c4e80982-a36d-4603-8082-a3ac39c80ec4", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T02:36:52.154964", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "8681a374-0783-4c28-851d-4de1f8c85a80", "ip": "127.0.0.1", "path": "/api/v1/melody/generate/ai", "method": "POST"}
{"timestamp": "2025-04-22T02:37:18.555031", "level": "ERROR", "message": "Error in generate_ai_melody_question : Expecting value: line 1 column 1 (char 0)\nTraceback: Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/api/v1/melody_api.py\", line 49, in generate_ai_melody_question\n    return await ai_melody_service.generate_melody_question(melody_question_request)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 36, in generate_melody_question\n    correct_melody = await self._generate_ai_melody(request)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 92, in _generate_ai_melody\n    melody = self._parse_ai_response(response, request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 160, in _parse_ai_response\n    melody_data = json.loads(response[\"choices\"][0][\"message\"][\"content\"])\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 355, in raw_decode\n    raise JSONDecodeError(\"Expecting value\", s, err.value) from None\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n", "module": "melody_api", "function": "generate_ai_melody_question", "line": 52}
{"timestamp": "2025-04-22T02:37:18.557839", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "8681a374-0783-4c28-851d-4de1f8c85a80", "path": "/api/v1/melody/generate/ai", "method": "POST"}
{"timestamp": "2025-04-22T02:39:03.328736", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-22T02:39:04.490303", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T02:39:04.495674", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T02:39:04.502443", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T02:39:04.503600", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T02:39:04.504189", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T02:39:04.504748", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T02:39:04.505554", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T02:39:04.506187", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T02:39:04.507877", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T02:39:04.507941", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T02:39:04.508276", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T02:39:04.508316", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T02:39:04.509351", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T02:39:04.509392", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T02:39:04.509577", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T02:39:04.509617", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T02:39:04.511699", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T02:39:04.511759", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T02:39:04.512935", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T02:39:27.069631", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-22T02:39:28.161716", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T02:39:28.164920", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T02:39:28.170862", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T02:39:28.171915", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T02:39:28.172453", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T02:39:28.172960", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T02:39:28.173624", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T02:39:28.174135", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T02:39:28.175385", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T02:39:28.175433", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T02:39:28.175763", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T02:39:28.175799", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T02:39:28.176678", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T02:39:28.176715", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T02:39:28.176858", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T02:39:28.176889", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T02:39:28.178599", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T02:39:28.178647", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T02:39:28.179718", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T02:40:38.055260", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-22T02:41:52.889506", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T02:41:52.893524", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T02:41:52.900158", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T02:41:52.901346", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T02:41:52.902154", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T02:41:52.902849", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T02:41:52.903632", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T02:41:52.904192", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T02:41:52.905705", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T02:41:52.905754", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T02:41:52.906135", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T02:41:52.906176", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T02:41:52.907175", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T02:41:52.907217", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T02:41:52.907374", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T02:41:52.907403", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T02:41:52.909247", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T02:41:52.909298", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T02:41:52.910447", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T02:41:57.598895", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "a3c90ab7-bdb6-4e5a-80a5-5c8a72776f78", "ip": "127.0.0.1", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T02:41:57.603125", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "a3c90ab7-bdb6-4e5a-80a5-5c8a72776f78", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T02:41:59.133154", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "b36ca18b-a55a-4168-9817-7d28c63a1c22", "ip": "127.0.0.1", "path": "/api/v1/melody/generate/ai", "method": "POST"}
{"timestamp": "2025-04-22T02:42:33.131252", "level": "ERROR", "message": "Error in generate_ai_melody_question : Expecting value: line 1 column 1 (char 0)\nTraceback: Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/api/v1/melody_api.py\", line 49, in generate_ai_melody_question\n    return await ai_melody_service.generate_melody_question(melody_question_request)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 39, in generate_melody_question\n    correct_melody = await self._generate_ai_melody(request)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 107, in _generate_ai_melody\n    melody = self._parse_ai_response(response, request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 185, in _parse_ai_response\n    melody_data = json.loads(response[\"choices\"][0][\"message\"][\"content\"])\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 355, in raw_decode\n    raise JSONDecodeError(\"Expecting value\", s, err.value) from None\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n", "module": "melody_api", "function": "generate_ai_melody_question", "line": 52}
{"timestamp": "2025-04-22T02:42:33.132145", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "b36ca18b-a55a-4168-9817-7d28c63a1c22", "path": "/api/v1/melody/generate/ai", "method": "POST"}
{"timestamp": "2025-04-22T02:43:13.755240", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-22T02:43:30.241721", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T02:43:30.248913", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T02:43:30.265615", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T02:43:30.268857", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T02:43:30.270190", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T02:43:30.271286", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T02:43:30.272897", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T02:43:30.273906", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T02:43:30.275398", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T02:43:30.275495", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T02:43:30.276038", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T02:43:30.276117", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T02:43:30.278633", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T02:43:30.278790", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T02:43:30.279646", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T02:43:30.279774", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T02:43:30.289470", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T02:43:30.289596", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T02:43:30.293674", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T02:43:46.413150", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "c6ba0b6d-0b14-4ad5-b6c3-9c9e300f6174", "ip": "127.0.0.1", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T02:43:46.429945", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "c6ba0b6d-0b14-4ad5-b6c3-9c9e300f6174", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T02:43:48.444006", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "2836c753-7a2c-4eb5-8985-78a7511b83c7", "ip": "127.0.0.1", "path": "/api/v1/melody/generate/ai", "method": "POST"}
{"timestamp": "2025-04-22T05:36:18.946743", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T05:36:18.952741", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T05:36:18.966231", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T05:36:18.968183", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T05:36:18.969238", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T05:36:18.970172", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T05:36:18.972431", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T05:36:18.973421", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T05:36:18.974785", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T05:36:18.974879", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T05:36:18.975359", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T05:36:18.975439", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T05:36:18.977210", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T05:36:18.977288", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T05:36:18.977894", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T05:36:18.977959", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T05:36:18.983642", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T05:36:18.983754", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T05:36:18.987620", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T05:36:23.433152", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "f6eeb51f-789f-4bd4-9823-651879773fb2", "ip": "127.0.0.1", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T05:36:23.446902", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "f6eeb51f-789f-4bd4-9823-651879773fb2", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T05:36:25.282121", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "bb458af1-85a3-4d40-af19-006ae875f01d", "ip": "127.0.0.1", "path": "/api/v1/melody/generate/ai", "method": "POST"}
{"timestamp": "2025-04-22T05:37:46.194976", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T05:37:46.200835", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T05:37:46.213903", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T05:37:46.215877", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T05:37:46.216935", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T05:37:46.217846", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T05:37:46.219995", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T05:37:46.220973", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T05:37:46.222305", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T05:37:46.222423", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T05:37:46.222920", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T05:37:46.222998", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T05:37:46.224722", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T05:37:46.224799", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T05:37:46.225360", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T05:37:46.225424", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T05:37:46.231516", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T05:37:46.231673", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T05:37:46.236163", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T05:37:50.257809", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "e052ffba-f6fa-442b-8963-24787e8389a3", "ip": "127.0.0.1", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T05:37:50.271647", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "e052ffba-f6fa-442b-8963-24787e8389a3", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T05:37:51.683985", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "839ce105-7616-4df6-847c-871746dd069c", "ip": "127.0.0.1", "path": "/api/v1/melody/generate/ai", "method": "POST"}
{"timestamp": "2025-04-22T05:41:23.197891", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T05:41:23.203446", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T05:41:23.217166", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T05:41:23.219995", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T05:41:23.221066", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T05:41:23.222016", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T05:41:23.223427", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T05:41:23.224363", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T05:41:23.225842", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T05:41:23.225965", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T05:41:23.226434", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T05:41:23.226512", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T05:41:23.228285", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T05:41:23.228384", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T05:41:23.228971", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T05:41:23.229045", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T05:41:23.234782", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T05:41:23.234917", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T05:41:23.238828", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T05:41:28.038629", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "63554314-b868-4bd5-ae1a-09d67acd3a47", "ip": "127.0.0.1", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T05:41:28.052643", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "63554314-b868-4bd5-ae1a-09d67acd3a47", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T05:41:31.548538", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "42c35815-e043-4959-93e7-57c3351bbe75", "ip": "127.0.0.1", "path": "/api/v1/melody/generate/ai", "method": "POST"}
{"timestamp": "2025-04-22T05:44:07.145896", "level": "ERROR", "message": "Error in generate_ai_melody_question : Expecting value: line 1 column 1 (char 0)\nTraceback: Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/api/v1/melody_api.py\", line 49, in generate_ai_melody_question\n    return await ai_melody_service.generate_melody_question(melody_question_request)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 39, in generate_melody_question\n    correct_melody = await self._generate_ai_melody(request)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 107, in _generate_ai_melody\n    melody = self._parse_ai_response(response, request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 187, in _parse_ai_response\n    melody_data = json.loads(response[\"choices\"][0][\"message\"][\"content\"])\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 355, in raw_decode\n    raise JSONDecodeError(\"Expecting value\", s, err.value) from None\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n", "module": "melody_api", "function": "generate_ai_melody_question", "line": 52}
{"timestamp": "2025-04-22T05:44:07.156192", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "549d21bf-400b-4dff-8da3-52f547cd05bf", "ip": "127.0.0.1", "path": "/api/v1/melody/generate", "method": "POST"}
{"timestamp": "2025-04-22T05:44:07.158738", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "f8f88835-dede-4d92-b935-b7e94ecc48bd", "ip": "127.0.0.1", "path": "/api/v1/melody/generate", "method": "POST"}
{"timestamp": "2025-04-22T05:44:07.160609", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "42c35815-e043-4959-93e7-57c3351bbe75", "path": "/api/v1/melody/generate/ai", "method": "POST"}
{"timestamp": "2025-04-22T05:44:07.166842", "level": "ERROR", "message": "Error in generate_melody_question : tuple indices must be integers or slices, not RhythmDifficulty\nTraceback: Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/api/v1/melody_api.py\", line 30, in generate_melody_question\n    response = melody_service.generate_question(melody_question_request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/melody_service.py\", line 29, in generate_question\n    correct_melody = self.generate_melody(\n                     ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/melody_service.py\", line 88, in generate_melody\n    rhythm = rhythm_service.generate_rhythm(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/rhythm_service.py\", line 237, in generate_rhythm\n    patterns = self.rhythm_patterns[difficulty][time_signature]\n               ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\nTypeError: tuple indices must be integers or slices, not RhythmDifficulty\n", "module": "melody_api", "function": "generate_melody_question", "line": 33}
{"timestamp": "2025-04-22T05:44:07.177189", "level": "ERROR", "message": "Error in generate_melody_question : tuple indices must be integers or slices, not RhythmDifficulty\nTraceback: Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/api/v1/melody_api.py\", line 30, in generate_melody_question\n    response = melody_service.generate_question(melody_question_request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/melody_service.py\", line 29, in generate_question\n    correct_melody = self.generate_melody(\n                     ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/melody_service.py\", line 88, in generate_melody\n    rhythm = rhythm_service.generate_rhythm(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/rhythm_service.py\", line 237, in generate_rhythm\n    patterns = self.rhythm_patterns[difficulty][time_signature]\n               ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\nTypeError: tuple indices must be integers or slices, not RhythmDifficulty\n", "module": "melody_api", "function": "generate_melody_question", "line": 33}
{"timestamp": "2025-04-22T05:44:07.180459", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "549d21bf-400b-4dff-8da3-52f547cd05bf", "path": "/api/v1/melody/generate", "method": "POST"}
{"timestamp": "2025-04-22T05:44:07.181275", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "f8f88835-dede-4d92-b935-b7e94ecc48bd", "path": "/api/v1/melody/generate", "method": "POST"}
{"timestamp": "2025-04-22T05:44:44.493613", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "0f9f2a88-0950-40ae-843c-eb5416333aab", "ip": "127.0.0.1", "path": "/api/v1/melody/generate", "method": "POST"}
{"timestamp": "2025-04-22T05:44:44.497354", "level": "ERROR", "message": "Error in generate_melody_question : tuple indices must be integers or slices, not RhythmDifficulty\nTraceback: Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/api/v1/melody_api.py\", line 30, in generate_melody_question\n    response = melody_service.generate_question(melody_question_request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/melody_service.py\", line 29, in generate_question\n    correct_melody = self.generate_melody(\n                     ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/melody_service.py\", line 88, in generate_melody\n    rhythm = rhythm_service.generate_rhythm(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/rhythm_service.py\", line 237, in generate_rhythm\n    patterns = self.rhythm_patterns[difficulty][time_signature]\n               ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\nTypeError: tuple indices must be integers or slices, not RhythmDifficulty\n", "module": "melody_api", "function": "generate_melody_question", "line": 33}
{"timestamp": "2025-04-22T05:44:44.498320", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "0f9f2a88-0950-40ae-843c-eb5416333aab", "path": "/api/v1/melody/generate", "method": "POST"}
{"timestamp": "2025-04-22T05:49:19.534119", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "f328fe7f-19ef-4595-a070-99c36bf866a6", "ip": "127.0.0.1", "path": "/api/v1/melody/generate", "method": "POST"}
{"timestamp": "2025-04-22T05:50:04.435551", "level": "ERROR", "message": "Error in generate_melody_question : tuple indices must be integers or slices, not RhythmDifficulty\nTraceback: Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/api/v1/melody_api.py\", line 30, in generate_melody_question\n    response = melody_service.generate_question(melody_question_request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/melody_service.py\", line 29, in generate_question\n    correct_melody = self.generate_melody(\n                     ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/melody_service.py\", line 88, in generate_melody\n    rhythm = rhythm_service.generate_rhythm(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/rhythm_service.py\", line 237, in generate_rhythm\n    patterns = self.rhythm_patterns[difficulty][time_signature]\n               ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\nTypeError: tuple indices must be integers or slices, not RhythmDifficulty\n", "module": "melody_api", "function": "generate_melody_question", "line": 33}
{"timestamp": "2025-04-22T05:50:04.442062", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "f328fe7f-19ef-4595-a070-99c36bf866a6", "path": "/api/v1/melody/generate", "method": "POST"}
{"timestamp": "2025-04-22T05:50:04.539471", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-22T05:52:06.810644", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T05:52:06.813836", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T05:52:06.819755", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T05:52:06.820826", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T05:52:06.821432", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T05:52:06.822014", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T05:52:06.822754", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T05:52:06.823305", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T05:52:06.824587", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T05:52:06.824638", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T05:52:06.824962", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T05:52:06.825000", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T05:52:06.825988", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T05:52:06.826032", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T05:52:06.826195", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T05:52:06.826224", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T05:52:06.828086", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T05:52:06.828138", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T05:52:06.829189", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T05:52:11.152131", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "8be33e65-8007-41fd-b4d9-07209f3fb6c3", "ip": "127.0.0.1", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T05:52:11.157781", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "8be33e65-8007-41fd-b4d9-07209f3fb6c3", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T05:52:12.599192", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "e6904e8c-e8b3-4fb6-8893-2316f63c06ca", "ip": "127.0.0.1", "path": "/api/v1/melody/generate", "method": "POST"}
{"timestamp": "2025-04-22T05:52:12.603927", "level": "ERROR", "message": "Error in generate_melody_question : tuple indices must be integers or slices, not str\nTraceback: Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/api/v1/melody_api.py\", line 30, in generate_melody_question\n    response = melody_service.generate_question(melody_question_request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/melody_service.py\", line 29, in generate_question\n    correct_melody = self.generate_melody(\n                     ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/melody_service.py\", line 88, in generate_melody\n    rhythm = rhythm_service.generate_rhythm(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/rhythm_service.py\", line 237, in generate_rhythm\n    patterns = self.rhythm_patterns[difficulty.value][time_signature.value]\n               ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^\nTypeError: tuple indices must be integers or slices, not str\n", "module": "melody_api", "function": "generate_melody_question", "line": 33}
{"timestamp": "2025-04-22T05:52:12.605006", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "e6904e8c-e8b3-4fb6-8893-2316f63c06ca", "path": "/api/v1/melody/generate", "method": "POST"}
{"timestamp": "2025-04-22T05:52:19.185994", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "28c18390-38ec-4c0e-9773-9401ad7be62f", "ip": "127.0.0.1", "path": "/api/v1/melody/generate", "method": "POST"}
{"timestamp": "2025-04-22T05:52:19.188625", "level": "ERROR", "message": "Error in generate_melody_question : tuple indices must be integers or slices, not str\nTraceback: Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/api/v1/melody_api.py\", line 30, in generate_melody_question\n    response = melody_service.generate_question(melody_question_request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/melody_service.py\", line 29, in generate_question\n    correct_melody = self.generate_melody(\n                     ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/melody_service.py\", line 88, in generate_melody\n    rhythm = rhythm_service.generate_rhythm(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/rhythm_service.py\", line 237, in generate_rhythm\n    patterns = self.rhythm_patterns[difficulty.value][time_signature.value]\n               ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^\nTypeError: tuple indices must be integers or slices, not str\n", "module": "melody_api", "function": "generate_melody_question", "line": 33}
{"timestamp": "2025-04-22T05:52:19.189389", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "28c18390-38ec-4c0e-9773-9401ad7be62f", "path": "/api/v1/melody/generate", "method": "POST"}
{"timestamp": "2025-04-22T05:52:49.853025", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-22T05:52:51.129161", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T05:52:51.133152", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T05:52:51.139223", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T05:52:51.140353", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T05:52:51.140974", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T05:52:51.141556", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T05:52:51.142274", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T05:52:51.142772", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T05:52:51.144166", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T05:52:51.144217", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T05:52:51.144535", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T05:52:51.144573", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T05:52:51.145525", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T05:52:51.145571", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T05:52:51.145729", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T05:52:51.145757", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T05:52:51.147618", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T05:52:51.147667", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T05:52:51.148734", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T05:52:54.861790", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-22T05:52:58.855399", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T05:52:58.866490", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T05:52:58.885463", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T05:52:58.891461", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T05:52:58.893779", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T05:52:58.895303", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T05:52:58.898113", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T05:52:58.899944", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T05:52:58.902750", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T05:52:58.902945", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T05:52:58.903935", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T05:52:58.904090", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T05:52:58.907431", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T05:52:58.907595", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T05:52:58.908515", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T05:52:58.908656", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T05:52:58.917573", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T05:52:58.917712", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T05:52:58.923231", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T05:53:01.229100", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "c0eb6680-0d26-41c2-90f8-be3cd47b7c26", "ip": "127.0.0.1", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T05:53:01.246153", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "c0eb6680-0d26-41c2-90f8-be3cd47b7c26", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T05:53:02.818262", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "1c8d041c-1fbd-40d7-aff1-2b63fb495e53", "ip": "127.0.0.1", "path": "/api/v1/melody/generate", "method": "POST"}
{"timestamp": "2025-04-22T05:53:19.084477", "level": "ERROR", "message": "Error in generate_melody_question : tuple indices must be integers or slices, not RhythmDifficulty\nTraceback: Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/api/v1/melody_api.py\", line 30, in generate_melody_question\n    response = melody_service.generate_question(melody_question_request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/melody_service.py\", line 29, in generate_question\n    correct_melody = self.generate_melody(\n                     ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/melody_service.py\", line 88, in generate_melody\n    rhythm = rhythm_service.generate_rhythm(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/rhythm_service.py\", line 237, in generate_rhythm\n    patterns = self.rhythm_patterns[difficulty][time_signature]\n               ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\nTypeError: tuple indices must be integers or slices, not RhythmDifficulty\n", "module": "melody_api", "function": "generate_melody_question", "line": 33}
{"timestamp": "2025-04-22T05:53:19.087145", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "1c8d041c-1fbd-40d7-aff1-2b63fb495e53", "path": "/api/v1/melody/generate", "method": "POST"}
{"timestamp": "2025-04-22T05:54:10.077370", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-22T05:54:12.423472", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T05:54:12.429265", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T05:54:12.444458", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T05:54:12.447409", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T05:54:12.448543", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T05:54:12.449510", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T05:54:12.451059", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T05:54:12.452139", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T05:54:12.453813", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T05:54:12.453949", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T05:54:12.454651", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T05:54:12.454752", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T05:54:12.457038", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T05:54:12.457162", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T05:54:12.457767", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T05:54:12.457849", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T05:54:12.464392", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T05:54:12.464569", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T05:54:12.468837", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T05:54:46.812827", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-22T05:54:49.154009", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T05:54:49.160966", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T05:54:49.175233", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T05:54:49.178185", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T05:54:49.179347", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T05:54:49.180336", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T05:54:49.181820", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T05:54:49.182922", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T05:54:49.184450", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T05:54:49.184547", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T05:54:49.185124", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T05:54:49.185204", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T05:54:49.187165", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T05:54:49.187248", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T05:54:49.187797", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T05:54:49.187862", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T05:54:49.193760", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T05:54:49.193883", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T05:54:49.198103", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T05:57:07.464482", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-22T05:57:09.981286", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T05:57:09.987185", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T05:57:10.002414", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T05:57:10.005503", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T05:57:10.006752", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T05:57:10.007747", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T05:57:10.009258", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T05:57:10.010275", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T05:57:10.011792", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T05:57:10.011908", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T05:57:10.012425", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T05:57:10.012511", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T05:57:10.014533", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T05:57:10.014636", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T05:57:10.015270", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T05:57:10.015345", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T05:57:10.021922", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T05:57:10.022085", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T05:57:10.026475", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T05:58:37.502927", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "358b2401-ec53-4a68-b256-f567d2217c99", "ip": "127.0.0.1", "path": "/api/v1/rhythm/generate", "method": "POST"}
{"timestamp": "2025-04-22T05:58:37.515454", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "358b2401-ec53-4a68-b256-f567d2217c99", "path": "/api/v1/rhythm/generate", "method": "POST"}
{"timestamp": "2025-04-22T05:58:40.468048", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "ac2d87b5-b3e3-49fd-8395-18831b3cda12", "ip": "127.0.0.1", "path": "/api/v1/melody/generate/ai", "method": "POST"}
{"timestamp": "2025-04-22T05:58:40.470073", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "ac2d87b5-b3e3-49fd-8395-18831b3cda12", "path": "/api/v1/melody/generate/ai", "method": "POST"}
{"timestamp": "2025-04-22T05:58:42.854383", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "aa50a6ef-ba5d-473f-a42a-88f43d14ab07", "ip": "127.0.0.1", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T05:58:42.861217", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "aa50a6ef-ba5d-473f-a42a-88f43d14ab07", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T05:58:44.181960", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "fbb922b1-2a47-4239-89a3-7ca09693989a", "ip": "127.0.0.1", "path": "/api/v1/rhythm/generate", "method": "POST"}
{"timestamp": "2025-04-22T05:58:48.472940", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "fbb922b1-2a47-4239-89a3-7ca09693989a", "path": "/api/v1/rhythm/generate", "method": "POST"}
{"timestamp": "2025-04-22T05:58:54.294952", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-22T05:58:56.750466", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T05:58:56.755802", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T05:58:56.769454", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T05:58:56.772223", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T05:58:56.773403", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T05:58:56.774406", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T05:58:56.775844", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T05:58:56.776949", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T05:58:56.778491", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T05:58:56.778595", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T05:58:56.779172", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T05:58:56.779253", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T05:58:56.781038", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T05:58:56.781141", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T05:58:56.781750", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T05:58:56.781836", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T05:58:56.788130", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T05:58:56.788271", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T05:58:56.792534", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T05:59:48.051179", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "68efda90-454b-4875-9cac-02f7256dad73", "ip": "127.0.0.1", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T05:59:48.067167", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "68efda90-454b-4875-9cac-02f7256dad73", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T05:59:49.844195", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "0ca949f9-ed58-4115-b0b8-480fa72b0f09", "ip": "127.0.0.1", "path": "/api/v1/rhythm/generate", "method": "POST"}
{"timestamp": "2025-04-22T05:59:54.030506", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "0ca949f9-ed58-4115-b0b8-480fa72b0f09", "path": "/api/v1/rhythm/generate", "method": "POST"}
{"timestamp": "2025-04-22T06:01:01.247093", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-22T06:02:02.863090", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T06:02:02.870285", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T06:02:02.884677", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T06:02:02.887702", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T06:02:02.888915", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T06:02:02.889957", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T06:02:02.891495", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T06:02:02.892554", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T06:02:02.894072", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T06:02:02.894169", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T06:02:02.894706", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T06:02:02.894788", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T06:02:02.896620", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T06:02:02.896700", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T06:02:02.897289", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T06:02:02.897353", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T06:02:02.903257", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T06:02:02.903376", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T06:02:02.907471", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T06:02:28.731070", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-22T06:02:31.089828", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T06:02:31.095862", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T06:02:31.110755", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T06:02:31.113846", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T06:02:31.115176", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T06:02:31.116254", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T06:02:31.117806", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T06:02:31.118851", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T06:02:31.120414", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T06:02:31.120513", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T06:02:31.121055", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T06:02:31.121133", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T06:02:31.123013", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T06:02:31.123097", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T06:02:31.123672", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T06:02:31.123740", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T06:02:31.129924", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T06:02:31.130057", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T06:02:31.134382", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T06:02:49.116630", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-22T06:02:51.770405", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T06:02:51.776542", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T06:02:51.790320", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T06:02:51.793016", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T06:02:51.794131", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T06:02:51.795091", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T06:02:51.796537", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T06:02:51.797538", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T06:02:51.799056", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T06:02:51.799167", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T06:02:51.799691", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T06:02:51.799773", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T06:02:51.801614", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T06:02:51.801707", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T06:02:51.802299", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T06:02:51.802373", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T06:02:51.808701", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T06:02:51.808848", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T06:02:51.813423", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T06:03:05.876508", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-22T06:03:08.325544", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T06:03:08.330757", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T06:03:08.344367", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T06:03:08.347225", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T06:03:08.348368", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T06:03:08.349308", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T06:03:08.350789", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T06:03:08.351792", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T06:03:08.353423", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T06:03:08.353540", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T06:03:08.354053", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T06:03:08.354127", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T06:03:08.355952", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T06:03:08.356049", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T06:03:08.356608", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T06:03:08.356682", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T06:03:08.362526", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T06:03:08.362668", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T06:03:08.366581", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T06:03:08.971391", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-22T06:03:12.517080", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T06:03:12.523525", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T06:03:12.537660", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T06:03:12.539687", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T06:03:12.540762", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T06:03:12.541859", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T06:03:12.543600", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T06:03:12.544857", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T06:03:12.546623", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T06:03:12.546733", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T06:03:12.547365", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T06:03:12.547443", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T06:03:12.549757", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T06:03:12.549848", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T06:03:12.550423", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T06:03:12.550492", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T06:03:12.556919", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T06:03:12.557056", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T06:03:12.561254", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T06:03:19.377769", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "ade66836-f803-4af1-b884-86c1ba91282e", "ip": "127.0.0.1", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T06:03:19.392165", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "ade66836-f803-4af1-b884-86c1ba91282e", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T06:03:21.722512", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "e4f80075-f605-4c54-87b2-bc8d02541d06", "ip": "127.0.0.1", "path": "/api/v1/rhythm/generate", "method": "POST"}
{"timestamp": "2025-04-22T06:03:25.912275", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "e4f80075-f605-4c54-87b2-bc8d02541d06", "path": "/api/v1/rhythm/generate", "method": "POST"}
{"timestamp": "2025-04-22T06:03:50.111305", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T06:03:50.115813", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T06:03:50.121498", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T06:03:50.122650", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T06:03:50.123263", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T06:03:50.123863", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T06:03:50.124575", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T06:03:50.125171", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T06:03:50.126466", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T06:03:50.126514", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T06:03:50.126867", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T06:03:50.126913", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T06:03:50.127839", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T06:03:50.127881", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T06:03:50.128057", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T06:03:50.128085", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T06:03:50.129986", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T06:03:50.130038", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T06:03:50.131175", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T06:03:53.999716", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "b2a98725-5a3f-40d9-b18b-efaaa7b1c9ba", "ip": "127.0.0.1", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T06:03:54.005401", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "b2a98725-5a3f-40d9-b18b-efaaa7b1c9ba", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T06:03:55.666965", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "01bd7a89-7a1e-4dd3-969b-cbb4cbfdd013", "ip": "127.0.0.1", "path": "/api/v1/rhythm/generate", "method": "POST"}
{"timestamp": "2025-04-22T06:03:55.671221", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "01bd7a89-7a1e-4dd3-969b-cbb4cbfdd013", "path": "/api/v1/rhythm/generate", "method": "POST"}
{"timestamp": "2025-04-22T06:06:29.908184", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-22T06:06:30.981229", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T06:06:30.984906", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T06:06:30.991010", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T06:06:30.992084", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T06:06:30.992608", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T06:06:30.993120", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T06:06:30.993833", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T06:06:30.994384", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T06:06:30.995686", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T06:06:30.995734", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T06:06:30.996063", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T06:06:30.996099", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T06:06:30.997084", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T06:06:30.997123", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T06:06:30.997271", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T06:06:30.997299", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T06:06:30.999121", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T06:06:30.999171", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T06:06:31.000206", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T06:07:23.453785", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-22T06:07:24.521384", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T06:07:24.528222", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T06:07:24.534495", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T06:07:24.535516", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T06:07:24.536091", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T06:07:24.536619", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T06:07:24.537350", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T06:07:24.538100", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T06:07:24.539970", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T06:07:24.540028", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T06:07:24.540501", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T06:07:24.540536", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T06:07:24.541518", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T06:07:24.541562", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T06:07:24.541717", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T06:07:24.541745", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T06:07:24.543868", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T06:07:24.543934", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T06:07:24.545075", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T06:08:06.062633", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-22T06:08:07.099427", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T06:08:07.102416", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T06:08:07.108267", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T06:08:07.109300", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T06:08:07.109896", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T06:08:07.110417", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T06:08:07.111175", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T06:08:07.111704", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T06:08:07.112911", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T06:08:07.112957", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T06:08:07.113276", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T06:08:07.113310", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T06:08:07.114202", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T06:08:07.114240", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T06:08:07.114392", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T06:08:07.114425", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T06:08:07.116199", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T06:08:07.116245", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T06:08:07.117272", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T06:09:28.679822", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-22T06:09:29.742148", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T06:09:29.745687", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T06:09:29.751592", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T06:09:29.752709", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T06:09:29.753399", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T06:09:29.754053", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T06:09:29.755003", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T06:09:29.755704", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T06:09:29.757229", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T06:09:29.757280", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T06:09:29.757647", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T06:09:29.757685", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T06:09:29.758663", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T06:09:29.758705", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T06:09:29.758863", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T06:09:29.758898", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T06:09:29.760757", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T06:09:29.760808", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T06:09:29.761904", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T06:09:56.140538", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-22T06:09:57.236363", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T06:09:57.241013", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T06:09:57.246738", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T06:09:57.247825", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T06:09:57.248432", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T06:09:57.248989", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T06:09:57.249737", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T06:09:57.250315", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T06:09:57.251784", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T06:09:57.251854", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T06:09:57.252264", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T06:09:57.252303", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T06:09:57.253322", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T06:09:57.253366", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T06:09:57.253515", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T06:09:57.253544", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T06:09:57.255580", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T06:09:57.255639", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T06:09:57.256774", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T06:11:38.486609", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-22T06:11:39.626469", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T06:11:39.634221", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T06:11:39.642803", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T06:11:39.644594", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T06:11:39.645599", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T06:11:39.646572", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T06:11:39.647940", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T06:11:39.648965", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T06:11:39.651472", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T06:11:39.651575", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T06:11:39.652155", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T06:11:39.652251", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T06:11:39.653879", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T06:11:39.653981", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T06:11:39.654248", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T06:11:39.654313", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T06:11:39.657626", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T06:11:39.657725", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T06:11:39.659681", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T06:15:28.745102", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-22T06:15:29.857300", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T06:15:29.860762", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T06:15:29.867092", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T06:15:29.868333", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T06:15:29.869012", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T06:15:29.869637", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T06:15:29.870428", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T06:15:29.871042", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T06:15:29.872467", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T06:15:29.872517", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T06:15:29.872879", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T06:15:29.872926", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T06:15:29.873919", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T06:15:29.873963", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T06:15:29.874131", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T06:15:29.874159", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T06:15:29.876156", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T06:15:29.876213", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T06:15:29.877348", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T06:15:36.101771", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-22T06:15:37.180673", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T06:15:37.184591", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T06:15:37.190591", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T06:15:37.191671", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T06:15:37.192259", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T06:15:37.192819", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T06:15:37.193594", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T06:15:37.194482", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T06:15:37.196618", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T06:15:37.196715", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T06:15:37.197564", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T06:15:37.197649", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T06:15:37.199244", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T06:15:37.199292", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T06:15:37.199450", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T06:15:37.199478", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T06:15:37.202671", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T06:15:37.202782", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T06:15:37.204697", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T06:16:20.248203", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-22T06:16:21.329961", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T06:16:21.334535", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T06:16:21.340904", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T06:16:21.342043", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T06:16:21.342655", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T06:16:21.343208", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T06:16:21.343963", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T06:16:21.344516", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T06:16:21.346150", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T06:16:21.346205", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T06:16:21.346571", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T06:16:21.346609", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T06:16:21.347542", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T06:16:21.347583", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T06:16:21.347728", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T06:16:21.347759", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T06:16:21.349633", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T06:16:21.349682", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T06:16:21.350735", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T06:16:29.273108", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-22T06:16:30.422029", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T06:16:30.425173", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T06:16:30.431013", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T06:16:30.432045", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T06:16:30.432600", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T06:16:30.433322", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T06:16:30.434486", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T06:16:30.435088", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T06:16:30.436445", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T06:16:30.436494", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T06:16:30.436834", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T06:16:30.436872", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T06:16:30.437818", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T06:16:30.437858", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T06:16:30.438009", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T06:16:30.438037", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T06:16:30.439831", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T06:16:30.439882", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T06:16:30.440932", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T06:16:41.980589", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-22T06:16:43.407792", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T06:16:43.416073", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T06:16:43.426687", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T06:16:43.428856", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T06:16:43.430285", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T06:16:43.431789", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T06:16:43.433205", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T06:16:43.434423", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T06:16:43.436374", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T06:16:43.436448", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T06:16:43.436882", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T06:16:43.436936", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T06:16:43.438084", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T06:16:43.438140", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T06:16:43.438307", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T06:16:43.438339", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T06:16:43.440398", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T06:16:43.440477", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T06:16:43.441883", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T06:22:18.515046", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "720aa7ce-31b7-47ab-aa96-c09338b05c3c", "ip": "127.0.0.1", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T06:22:18.520455", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "720aa7ce-31b7-47ab-aa96-c09338b05c3c", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T06:22:20.214075", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "10b0219f-8624-4015-b07e-0c244a652f4f", "ip": "127.0.0.1", "path": "/api/v1/rhythm/generate", "method": "POST"}
{"timestamp": "2025-04-22T06:30:52.928745", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T06:30:52.931699", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T06:30:52.937330", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T06:30:52.938355", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T06:30:52.938900", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T06:30:52.939410", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T06:30:52.940088", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T06:30:52.940601", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T06:30:52.941815", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T06:30:52.941862", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T06:30:52.942189", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T06:30:52.942224", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T06:30:52.943244", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T06:30:52.943285", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T06:30:52.943438", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T06:30:52.943467", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T06:30:52.945335", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T06:30:52.945383", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T06:30:52.946449", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T06:30:57.857288", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "d86f6d48-4cc1-4248-bf8b-00ebd2ed3239", "ip": "127.0.0.1", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T06:30:57.861374", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "d86f6d48-4cc1-4248-bf8b-00ebd2ed3239", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T06:30:59.838359", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "2a0e142d-3911-4803-911d-55407586f7e2", "ip": "127.0.0.1", "path": "/api/v1/rhythm/generate", "method": "POST"}
{"timestamp": "2025-04-22T06:30:59.842954", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "2a0e142d-3911-4803-911d-55407586f7e2", "path": "/api/v1/rhythm/generate", "method": "POST"}
{"timestamp": "2025-04-22T06:31:08.231424", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "7ce9e172-8ad1-4b16-bb95-20638e80e09d", "ip": "127.0.0.1", "path": "/api/v1/melody/generate", "method": "POST"}
{"timestamp": "2025-04-22T06:31:08.236086", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "7ce9e172-8ad1-4b16-bb95-20638e80e09d", "path": "/api/v1/melody/generate", "method": "POST"}
{"timestamp": "2025-04-22T06:33:12.273337", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-22T06:34:38.051659", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T06:34:38.056038", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T06:34:38.064295", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T06:34:38.066204", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T06:34:38.067157", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T06:34:38.067811", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T06:34:38.069439", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T06:34:38.070102", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T06:34:38.070874", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T06:34:38.070943", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T06:34:38.071290", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T06:34:38.071338", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T06:34:38.072806", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T06:34:38.072924", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T06:34:38.073215", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T06:34:38.073299", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T06:34:38.075607", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T06:34:38.075684", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T06:34:38.076982", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T06:34:45.034896", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "5d13395d-d24b-462a-9d72-d993861d80df", "ip": "127.0.0.1", "path": "/api/v1/melody/generate", "method": "POST"}
{"timestamp": "2025-04-22T06:34:45.037240", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "5d13395d-d24b-462a-9d72-d993861d80df", "path": "/api/v1/melody/generate", "method": "POST"}
{"timestamp": "2025-04-22T06:34:48.318214", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "b22ff669-1c92-4dbb-82c4-19db4dd9421f", "ip": "127.0.0.1", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T06:34:48.321307", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "b22ff669-1c92-4dbb-82c4-19db4dd9421f", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T06:34:49.911296", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "5caf186a-9270-4e82-b815-939383eeef9d", "ip": "127.0.0.1", "path": "/api/v1/melody/generate", "method": "POST"}
{"timestamp": "2025-04-22T06:34:49.916256", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "5caf186a-9270-4e82-b815-939383eeef9d", "path": "/api/v1/melody/generate", "method": "POST"}
{"timestamp": "2025-04-22T06:44:18.510703", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "00c06597-3d23-413d-a3b7-7efb0a20eacf", "ip": "127.0.0.1", "path": "/docs", "method": "GET"}
{"timestamp": "2025-04-22T06:44:18.511108", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "00c06597-3d23-413d-a3b7-7efb0a20eacf", "path": "/docs", "method": "GET"}
{"timestamp": "2025-04-22T06:44:18.655462", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "8eeebfe4-bfec-4cde-bbd8-1ac6eddf25c6", "ip": "127.0.0.1", "path": "/api/v1/openapi.json", "method": "GET"}
{"timestamp": "2025-04-22T06:44:18.731950", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "8eeebfe4-bfec-4cde-bbd8-1ac6eddf25c6", "path": "/api/v1/openapi.json", "method": "GET"}
{"timestamp": "2025-04-22T06:45:08.176957", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "2ab51ca0-25b6-426a-b894-d3fef3f39d3d", "ip": "127.0.0.1", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T06:45:08.179368", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "2ab51ca0-25b6-426a-b894-d3fef3f39d3d", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T06:45:09.852110", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "6bbdc9a9-1dae-46d2-8903-326a333ae4bf", "ip": "127.0.0.1", "path": "/api/v1/melody/generate/ai", "method": "POST"}
{"timestamp": "2025-04-22T06:45:29.193139", "level": "ERROR", "message": "Error in generate_ai_melody_question : Expecting value: line 1 column 1 (char 0)\nTraceback: Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/api/v1/melody_api.py\", line 49, in generate_ai_melody_question\n    return await ai_melody_service.generate_melody_question(melody_question_request)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 39, in generate_melody_question\n    correct_melody = await self._generate_ai_melody(request)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 107, in _generate_ai_melody\n    melody = self._parse_ai_response(response, request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 187, in _parse_ai_response\n    melody_data = json.loads(response[\"choices\"][0][\"message\"][\"content\"])\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 355, in raw_decode\n    raise JSONDecodeError(\"Expecting value\", s, err.value) from None\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n", "module": "melody_api", "function": "generate_ai_melody_question", "line": 52}
{"timestamp": "2025-04-22T06:45:29.196078", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "6bbdc9a9-1dae-46d2-8903-326a333ae4bf", "path": "/api/v1/melody/generate/ai", "method": "POST"}
{"timestamp": "2025-04-22T06:45:29.294723", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-22T06:45:30.353691", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T06:45:30.356658", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T06:45:30.362633", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T06:45:30.363616", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T06:45:30.364196", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T06:45:30.364724", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T06:45:30.365429", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T06:45:30.365955", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T06:45:30.367180", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T06:45:30.367227", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T06:45:30.367543", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T06:45:30.367577", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T06:45:30.368465", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T06:45:30.368510", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T06:45:30.368657", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T06:45:30.368685", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T06:45:30.370408", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T06:45:30.370456", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T06:45:30.371519", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T06:45:32.279561", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-22T06:45:34.892513", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T06:45:34.898050", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T06:45:34.912015", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T06:45:34.914729", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T06:45:34.915862", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T06:45:34.916821", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T06:45:34.918286", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T06:45:34.919242", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T06:45:34.920728", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T06:45:34.920826", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T06:45:34.921298", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T06:45:34.921380", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T06:45:34.923127", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T06:45:34.923218", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T06:45:34.923773", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T06:45:34.923854", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T06:45:34.929643", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T06:45:34.929781", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T06:45:34.933634", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T06:45:38.757409", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "d20574d7-6cf5-411d-8c63-b5fff457d781", "ip": "127.0.0.1", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T06:45:38.772953", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "d20574d7-6cf5-411d-8c63-b5fff457d781", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T06:45:40.616173", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "324ac737-9958-48a5-87dc-518b3bcf2e94", "ip": "127.0.0.1", "path": "/api/v1/melody/generate/ai", "method": "POST"}
{"timestamp": "2025-04-22T07:08:08.467065", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T07:08:08.470329", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T07:08:08.476590", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T07:08:08.477626", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T07:08:08.478224", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T07:08:08.478766", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T07:08:08.479513", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T07:08:08.480090", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T07:08:08.481391", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T07:08:08.481440", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T07:08:08.481770", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T07:08:08.481809", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T07:08:08.482713", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T07:08:08.482756", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T07:08:08.482913", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T07:08:08.482948", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T07:08:08.484727", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T07:08:08.484777", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T07:08:08.485868", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T07:08:09.589806", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-22T07:08:12.155682", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T07:08:12.161727", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T07:08:12.175489", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T07:08:12.178254", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T07:08:12.179397", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T07:08:12.180416", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T07:08:12.181918", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T07:08:12.182984", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T07:08:12.184536", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T07:08:12.184639", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T07:08:12.185123", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T07:08:12.185193", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T07:08:12.186971", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T07:08:12.187051", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T07:08:12.187618", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T07:08:12.187684", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T07:08:12.193311", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T07:08:12.193450", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T07:08:12.197255", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T07:08:15.643370", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "1b78acce-569a-4090-a709-44de1d906900", "ip": "127.0.0.1", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T07:08:15.657705", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "1b78acce-569a-4090-a709-44de1d906900", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T07:08:17.992347", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "28f0ff51-d439-4ffc-941f-a9eb0c3e96ed", "ip": "127.0.0.1", "path": "/api/v1/melody/generate", "method": "POST"}
{"timestamp": "2025-04-22T07:08:23.965577", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "28f0ff51-d439-4ffc-941f-a9eb0c3e96ed", "path": "/api/v1/melody/generate", "method": "POST"}
{"timestamp": "2025-04-22T07:08:42.619181", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "6ae25e03-17e5-496c-9ed0-37951d2bd347", "ip": "127.0.0.1", "path": "/api/v1/melody/generate/ai", "method": "POST"}
{"timestamp": "2025-04-22T07:39:08.379215", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T07:39:08.384496", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T07:39:08.398640", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T07:39:08.401452", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T07:39:08.402800", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T07:39:08.403963", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T07:39:08.405622", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T07:39:08.406734", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T07:39:08.408367", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T07:39:08.408492", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T07:39:08.409032", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T07:39:08.409112", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T07:39:08.411110", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T07:39:08.411198", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T07:39:08.411787", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T07:39:08.411853", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T07:39:08.418036", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T07:39:08.418157", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T07:39:08.422261", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T07:39:13.207785", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "b8599302-938c-43fa-8790-51fcb7820a56", "ip": "127.0.0.1", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T07:39:13.224676", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "b8599302-938c-43fa-8790-51fcb7820a56", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T07:39:17.774620", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "1e204bca-b949-4d74-98f8-aec3dd03e116", "ip": "127.0.0.1", "path": "/api/v1/melody/generate/ai", "method": "POST"}
{"timestamp": "2025-04-22T07:40:55.698972", "level": "ERROR", "message": "Error in generate_ai_melody_question : Expecting value: line 1 column 1 (char 0)\nTraceback: Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/api/v1/melody_api.py\", line 49, in generate_ai_melody_question\n    return await ai_melody_service.generate_melody_question(melody_question_request)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 42, in generate_melody_question\n    correct_melody = await self._generate_ai_melody(request)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 110, in _generate_ai_melody\n    melody = self._parse_ai_response(response, request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 217, in _parse_ai_response\n    melody_data = json.loads(response[\"choices\"][0][\"message\"][\"content\"])\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 355, in raw_decode\n    raise JSONDecodeError(\"Expecting value\", s, err.value) from None\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n", "module": "melody_api", "function": "generate_ai_melody_question", "line": 52}
{"timestamp": "2025-04-22T07:40:55.704553", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "1e204bca-b949-4d74-98f8-aec3dd03e116", "path": "/api/v1/melody/generate/ai", "method": "POST"}
{"timestamp": "2025-04-22T07:41:01.324094", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-22T07:49:37.974207", "level": "INFO", "message": "Initializing RhythmService", "module": "rhythm_service", "function": "__init__", "line": 15}
{"timestamp": "2025-04-22T07:49:37.974342", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T07:49:37.974460", "level": "INFO", "message": "Generated 5 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T07:49:37.974534", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T07:49:37.974642", "level": "INFO", "message": "Generated 13 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T07:49:37.974707", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T07:49:37.974853", "level": "INFO", "message": "Generated 34 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T07:49:37.974934", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5, 0.25, 1.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T07:49:37.975139", "level": "INFO", "message": "Generated 60 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T07:49:37.975249", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5, 0.25, 1.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T07:49:37.976520", "level": "INFO", "message": "Generated 610 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T07:49:37.976589", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5, 0.25, 1.5], max_combinations=10000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T07:49:37.988928", "level": "INFO", "message": "Generated 6236 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T07:49:37.989029", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T07:49:37.989109", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T07:49:37.989178", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T07:49:37.989264", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T07:49:37.989333", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T07:49:37.989415", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T07:49:37.989483", "level": "INFO", "message": "Rhythm patterns initialized", "module": "rhythm_service", "function": "__init__", "line": 40}
{"timestamp": "2025-04-22T07:49:37.995018", "level": "INFO", "message": "AIMelodyService initialized with DeepSeek API configuration", "module": "ai_melody_service", "function": "__init__", "line": 33}
{"timestamp": "2025-04-22T07:49:38.142263", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T07:49:38.147816", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T07:49:38.161719", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T07:49:38.164609", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T07:49:38.165803", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T07:49:38.166782", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T07:49:38.168319", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T07:49:38.169351", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T07:49:38.170893", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T07:49:38.171021", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T07:49:38.171546", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T07:49:38.171626", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T07:49:38.173489", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T07:49:38.173581", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T07:49:38.174203", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T07:49:38.174305", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T07:49:38.180671", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T07:49:38.180838", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T07:49:38.185134", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T07:49:44.247050", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "0ff41bab-5303-4962-8a47-2a65674a4949", "ip": "127.0.0.1", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T07:49:44.261905", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "0ff41bab-5303-4962-8a47-2a65674a4949", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T07:49:47.312170", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "74f3595c-3be2-4d17-adaa-20c1047c5178", "ip": "127.0.0.1", "path": "/api/v1/melody/generate/ai", "method": "POST"}
{"timestamp": "2025-04-22T07:49:47.316540", "level": "INFO", "message": "Generating melody question with parameters: {'difficulty': <RhythmDifficulty.LOW: 'low'>, 'time_signature': <TimeSignature.TWO_FOUR: '2/4'>, 'measures_count': <MeasureCount.FOUR: 4>, 'tempo': <Tempo.EIGHTY: 80>, 'tonality': 1, 'tonality_choice': 1}", "module": "ai_melody_service", "function": "generate_melody_question", "line": 38}
{"timestamp": "2025-04-22T07:49:47.316673", "level": "INFO", "message": "Starting AI melody generation", "module": "ai_melody_service", "function": "_generate_ai_melody", "line": 98}
{"timestamp": "2025-04-22T07:49:47.316759", "level": "DEBUG", "message": "Building melody prompt", "module": "ai_melody_service", "function": "_build_melody_prompt", "line": 119}
{"timestamp": "2025-04-22T07:49:47.316991", "level": "DEBUG", "message": "Generated prompt: \n        4\n        1. 2/4\n        2. 80bpm\n        3. low,:['', '']\n        4. C\n        5. \n        \n        \n        1. \n        2. 2/4\n        3. \n        4. \n        5. \n        \n        JSON\n        {\n            \"measures\": [  //measures 4\n                [\n                    {\n                        \"notes\": [ //notes \n                            {\n                                \"duration\": 0.5,  // 0.510.250.1250.751.5\n                                \"is_rest\": false,  // \n                                \"is_dotted\": false,  // \n                                \"tied_to_next\": false,  // \n                                \"pitch\": \"C2\",  // \n                            }\n                        ]\n                    }\n                ]\n            ],\n            \"time_signature\": \"TimeSignature.TWO_FOUR\",\n            \"tempo\": Tempo.EIGHTY\n        }\n\n        \n        1. \n        2. \n        3. \n        4. JSON\n        5. false\"false\"\n        6. \n        \n        ", "module": "ai_melody_service", "function": "_build_melody_prompt", "line": 176}
{"timestamp": "2025-04-22T07:49:47.317092", "level": "DEBUG", "message": "Generated prompt: \n        4\n        1. 2/4\n        2. 80bpm\n        3. low,:['', '']\n        4. C\n        5. \n        \n        \n        1. \n        2. 2/4\n        3. \n        4. \n        5. \n        \n        JSON\n        {\n            \"measures\": [  //measures 4\n                [\n                    {\n                        \"notes\": [ //notes \n                            {\n                                \"duration\": 0.5,  // 0.510.250.1250.751.5\n                                \"is_rest\": false,  // \n                                \"is_dotted\": false,  // \n                                \"tied_to_next\": false,  // \n                                \"pitch\": \"C2\",  // \n                            }\n                        ]\n                    }\n                ]\n            ],\n            \"time_signature\": \"TimeSignature.TWO_FOUR\",\n            \"tempo\": Tempo.EIGHTY\n        }\n\n        \n        1. \n        2. \n        3. \n        4. JSON\n        5. false\"false\"\n        6. \n        \n        ", "module": "ai_melody_service", "function": "_generate_ai_melody", "line": 102}
{"timestamp": "2025-04-22T07:49:50.736852", "level": "INFO", "message": "Calling DeepSeek API", "module": "ai_melody_service", "function": "_call_deepseek_api", "line": 181}
{"timestamp": "2025-04-22T07:49:50.737916", "level": "DEBUG", "message": "API request data: {\"model\": \"deepseek-chat\", \"messages\": [{\"role\": \"user\", \"content\": \"\\n        4\\n        1. 2/4\\n        2. 80bpm\\n        3. low,:['', '']\\n        4. C\\n        5. \\n        \\n        \\n        1. \\n        2. 2/4\\n        3. \\n        4. \\n        5. \\n        \\n        JSON\\n        {\\n            \\\"measures\\\": [  //measures 4\\n                [\\n                    {\\n                        \\\"notes\\\": [ //notes \\n                            {\\n                                \\\"duration\\\": 0.5,  // 0.510.250.1250.751.5\\n                                \\\"is_rest\\\": false,  // \\n                                \\\"is_dotted\\\": false,  // \\n                                \\\"tied_to_next\\\": false,  // \\n                                \\\"pitch\\\": \\\"C2\\\",  // \\n                            }\\n                        ]\\n                    }\\n                ]\\n            ],\\n            \\\"time_signature\\\": \\\"TimeSignature.TWO_FOUR\\\",\\n            \\\"tempo\\\": Tempo.EIGHTY\\n        }\\n\\n        \\n        1. \\n        2. \\n        3. \\n        4. JSON\\n        5. false\\\"false\\\"\\n        6. \\n        \\n        \"}], \"temperature\": 0.5, \"max_tokens\": 5000, \"stream\": false, \"top_p\": 0.9}", "module": "ai_melody_service", "function": "_call_deepseek_api", "line": 196}
{"timestamp": "2025-04-22T07:50:27.901924", "level": "INFO", "message": "Successfully received response from DeepSeek API", "module": "ai_melody_service", "function": "_call_deepseek_api", "line": 208}
{"timestamp": "2025-04-22T07:50:32.572531", "level": "INFO", "message": "Successfully received response from DeepSeek API", "module": "ai_melody_service", "function": "_generate_ai_melody", "line": 106}
{"timestamp": "2025-04-22T07:50:34.356917", "level": "INFO", "message": "Parsing AI response", "module": "ai_melody_service", "function": "_parse_ai_response", "line": 215}
{"timestamp": "2025-04-22T08:04:57.634353", "level": "INFO", "message": "Initializing RhythmService", "module": "rhythm_service", "function": "__init__", "line": 15}
{"timestamp": "2025-04-22T08:04:57.634477", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:04:57.634589", "level": "INFO", "message": "Generated 5 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:04:57.634661", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:04:57.634769", "level": "INFO", "message": "Generated 13 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:04:57.634838", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:04:57.635064", "level": "INFO", "message": "Generated 34 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:04:57.635148", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5, 0.25, 1.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:04:57.635344", "level": "INFO", "message": "Generated 60 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:04:57.635411", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5, 0.25, 1.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:04:57.636738", "level": "INFO", "message": "Generated 610 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:04:57.636808", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5, 0.25, 1.5], max_combinations=10000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:04:57.649565", "level": "INFO", "message": "Generated 6236 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:04:57.649657", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:04:57.649748", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:04:57.649818", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:04:57.649898", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:04:57.649964", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:04:57.650040", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:04:57.650105", "level": "INFO", "message": "Rhythm patterns initialized", "module": "rhythm_service", "function": "__init__", "line": 40}
{"timestamp": "2025-04-22T08:04:57.656223", "level": "INFO", "message": "AIMelodyService initialized with DeepSeek API configuration", "module": "ai_melody_service", "function": "__init__", "line": 33}
{"timestamp": "2025-04-22T08:04:57.813068", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T08:04:57.819113", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T08:04:57.834049", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T08:04:57.837415", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T08:04:57.838752", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T08:04:57.839825", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T08:04:57.841521", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T08:04:57.842714", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T08:04:57.844379", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T08:04:57.844478", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T08:04:57.845004", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T08:04:57.845080", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T08:04:57.847085", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T08:04:57.847170", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T08:04:57.847753", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T08:04:57.847819", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T08:04:57.854025", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T08:04:57.854153", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T08:04:57.858267", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T08:05:02.923451", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "cf7a4a3d-054d-4ab6-8a41-becc76097cbf", "ip": "127.0.0.1", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T08:05:02.937591", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "cf7a4a3d-054d-4ab6-8a41-becc76097cbf", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T08:05:05.059573", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "195ab71f-306f-46ce-9c1b-000153da2584", "ip": "127.0.0.1", "path": "/api/v1/melody/generate/ai", "method": "POST"}
{"timestamp": "2025-04-22T08:05:05.063560", "level": "INFO", "message": "Generating melody question with parameters: {'difficulty': <RhythmDifficulty.LOW: 'low'>, 'time_signature': <TimeSignature.TWO_FOUR: '2/4'>, 'measures_count': <MeasureCount.FOUR: 4>, 'tempo': <Tempo.EIGHTY: 80>, 'tonality': 1, 'tonality_choice': 1}", "module": "ai_melody_service", "function": "generate_melody_question", "line": 38}
{"timestamp": "2025-04-22T08:05:05.063661", "level": "INFO", "message": "Starting AI melody generation", "module": "ai_melody_service", "function": "_generate_ai_melody", "line": 98}
{"timestamp": "2025-04-22T08:05:05.063728", "level": "INFO", "message": "Successfully received response from DeepSeek API", "module": "ai_melody_service", "function": "_generate_ai_melody", "line": 106}
{"timestamp": "2025-04-22T08:05:05.063806", "level": "INFO", "message": "Parsing AI response", "module": "ai_melody_service", "function": "_parse_ai_response", "line": 214}
{"timestamp": "2025-04-22T08:05:22.050540", "level": "ERROR", "message": "Error parsing AI response: Expecting value: line 2 column 13 (char 13)", "module": "ai_melody_service", "function": "_parse_ai_response", "line": 381, "exception": {"type": "JSONDecodeError", "message": "Expecting value: line 2 column 13 (char 13)", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 340, in _parse_ai_response\n    melody_data = json.loads(data)\n                  ^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 355, in raw_decode\n    raise JSONDecodeError(\"Expecting value\", s, err.value) from None\njson.decoder.JSONDecodeError: Expecting value: line 2 column 13 (char 13)"}}
{"timestamp": "2025-04-22T08:05:24.284957", "level": "ERROR", "message": "Error generating AI melody: Expecting value: line 2 column 13 (char 13)", "module": "ai_melody_service", "function": "_generate_ai_melody", "line": 115, "exception": {"type": "JSONDecodeError", "message": "Expecting value: line 2 column 13 (char 13)", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 110, in _generate_ai_melody\n    melody = self._parse_ai_response({}, request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 340, in _parse_ai_response\n    melody_data = json.loads(data)\n                  ^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 355, in raw_decode\n    raise JSONDecodeError(\"Expecting value\", s, err.value) from None\njson.decoder.JSONDecodeError: Expecting value: line 2 column 13 (char 13)"}}
{"timestamp": "2025-04-22T08:05:24.290874", "level": "ERROR", "message": "Error generating AI melody question: Expecting value: line 2 column 13 (char 13)", "module": "ai_melody_service", "function": "generate_melody_question", "line": 92, "exception": {"type": "JSONDecodeError", "message": "Expecting value: line 2 column 13 (char 13)", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 41, in generate_melody_question\n    correct_melody = await self._generate_ai_melody(request)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 110, in _generate_ai_melody\n    melody = self._parse_ai_response({}, request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 340, in _parse_ai_response\n    melody_data = json.loads(data)\n                  ^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 355, in raw_decode\n    raise JSONDecodeError(\"Expecting value\", s, err.value) from None\njson.decoder.JSONDecodeError: Expecting value: line 2 column 13 (char 13)"}}
{"timestamp": "2025-04-22T08:05:24.296240", "level": "ERROR", "message": "Error in generate_ai_melody_question : Expecting value: line 2 column 13 (char 13)\nTraceback: Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/api/v1/melody_api.py\", line 49, in generate_ai_melody_question\n    return await ai_melody_service.generate_melody_question(melody_question_request)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 41, in generate_melody_question\n    correct_melody = await self._generate_ai_melody(request)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 110, in _generate_ai_melody\n    melody = self._parse_ai_response({}, request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 340, in _parse_ai_response\n    melody_data = json.loads(data)\n                  ^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 355, in raw_decode\n    raise JSONDecodeError(\"Expecting value\", s, err.value) from None\njson.decoder.JSONDecodeError: Expecting value: line 2 column 13 (char 13)\n", "module": "melody_api", "function": "generate_ai_melody_question", "line": 52}
{"timestamp": "2025-04-22T08:05:24.298765", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "195ab71f-306f-46ce-9c1b-000153da2584", "path": "/api/v1/melody/generate/ai", "method": "POST"}
{"timestamp": "2025-04-22T08:05:24.398462", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-22T08:05:40.723148", "level": "INFO", "message": "Initializing RhythmService", "module": "rhythm_service", "function": "__init__", "line": 15}
{"timestamp": "2025-04-22T08:05:40.723301", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:05:40.723453", "level": "INFO", "message": "Generated 5 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:05:40.723531", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:05:40.723647", "level": "INFO", "message": "Generated 13 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:05:40.723715", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:05:40.723871", "level": "INFO", "message": "Generated 34 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:05:40.723960", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5, 0.25, 1.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:05:40.724168", "level": "INFO", "message": "Generated 60 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:05:40.724236", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5, 0.25, 1.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:05:40.725644", "level": "INFO", "message": "Generated 610 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:05:40.725724", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5, 0.25, 1.5], max_combinations=10000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:05:40.738410", "level": "INFO", "message": "Generated 6236 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:05:40.738523", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:05:40.738624", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:05:40.738693", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:05:40.738775", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:05:40.738843", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:05:40.738925", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:05:40.738994", "level": "INFO", "message": "Rhythm patterns initialized", "module": "rhythm_service", "function": "__init__", "line": 40}
{"timestamp": "2025-04-22T08:05:40.745609", "level": "INFO", "message": "AIMelodyService initialized with DeepSeek API configuration", "module": "ai_melody_service", "function": "__init__", "line": 33}
{"timestamp": "2025-04-22T08:05:40.895634", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T08:05:40.901406", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T08:05:40.916079", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T08:05:40.919066", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T08:05:40.920181", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T08:05:40.921194", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T08:05:40.923113", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T08:05:40.924677", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T08:05:40.926628", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T08:05:40.926730", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T08:05:40.927499", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T08:05:40.927581", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T08:05:40.929561", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T08:05:40.929641", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T08:05:40.930226", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T08:05:40.930290", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T08:05:40.936635", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T08:05:40.936856", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T08:05:40.941602", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T08:05:43.126349", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "4d35e8b9-2e3c-4d94-9b0f-cf8fb0110b67", "ip": "127.0.0.1", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T08:05:43.143833", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "4d35e8b9-2e3c-4d94-9b0f-cf8fb0110b67", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T08:05:44.930198", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "a2e41f24-9414-48a6-bbd5-b460ccf25237", "ip": "127.0.0.1", "path": "/api/v1/melody/generate/ai", "method": "POST"}
{"timestamp": "2025-04-22T08:05:44.934321", "level": "INFO", "message": "Generating melody question with parameters: {'difficulty': <RhythmDifficulty.LOW: 'low'>, 'time_signature': <TimeSignature.TWO_FOUR: '2/4'>, 'measures_count': <MeasureCount.FOUR: 4>, 'tempo': <Tempo.EIGHTY: 80>, 'tonality': 1, 'tonality_choice': 1}", "module": "ai_melody_service", "function": "generate_melody_question", "line": 38}
{"timestamp": "2025-04-22T08:05:44.934431", "level": "INFO", "message": "Starting AI melody generation", "module": "ai_melody_service", "function": "_generate_ai_melody", "line": 98}
{"timestamp": "2025-04-22T08:05:44.934503", "level": "INFO", "message": "Successfully received response from DeepSeek API", "module": "ai_melody_service", "function": "_generate_ai_melody", "line": 106}
{"timestamp": "2025-04-22T08:05:44.934585", "level": "INFO", "message": "Parsing AI response", "module": "ai_melody_service", "function": "_parse_ai_response", "line": 214}
{"timestamp": "2025-04-22T08:05:49.082476", "level": "DEBUG", "message": "Parsed melody data: {\"measures\": [[{\"notes\": [{\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"C4\"}, {\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"D4\"}, {\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"E4\"}, {\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"G4\"}]}], [{\"notes\": [{\"duration\": 1, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"E4\"}, {\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"D4\"}, {\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"C4\"}]}], [{\"notes\": [{\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"E4\"}, {\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"G4\"}, {\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"A4\"}, {\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"G4\"}]}], [{\"notes\": [{\"duration\": 1, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"E4\"}, {\"duration\": 1, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"C4\"}]}]]}", "module": "ai_melody_service", "function": "_parse_ai_response", "line": 339}
{"timestamp": "2025-04-22T08:06:03.975246", "level": "INFO", "message": "Initializing RhythmService", "module": "rhythm_service", "function": "__init__", "line": 15}
{"timestamp": "2025-04-22T08:06:03.975375", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:06:03.975496", "level": "INFO", "message": "Generated 5 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:06:03.975596", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:06:03.975719", "level": "INFO", "message": "Generated 13 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:06:03.975786", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:06:03.975951", "level": "INFO", "message": "Generated 34 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:06:03.976028", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5, 0.25, 1.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:06:03.976220", "level": "INFO", "message": "Generated 60 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:06:03.976286", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5, 0.25, 1.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:06:03.977571", "level": "INFO", "message": "Generated 610 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:06:03.977641", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5, 0.25, 1.5], max_combinations=10000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:06:03.990119", "level": "INFO", "message": "Generated 6236 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:06:03.990257", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:06:03.990341", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:06:03.990408", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:06:03.990483", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:06:03.990556", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:06:03.990631", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:06:03.990695", "level": "INFO", "message": "Rhythm patterns initialized", "module": "rhythm_service", "function": "__init__", "line": 40}
{"timestamp": "2025-04-22T08:06:03.995035", "level": "INFO", "message": "AIMelodyService initialized with DeepSeek API configuration", "module": "ai_melody_service", "function": "__init__", "line": 33}
{"timestamp": "2025-04-22T08:06:04.143058", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T08:06:04.148268", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T08:06:04.162907", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T08:06:04.165866", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T08:06:04.167028", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T08:06:04.167986", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T08:06:04.169447", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T08:06:04.170517", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T08:06:04.172181", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T08:06:04.172288", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T08:06:04.172822", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T08:06:04.172913", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T08:06:04.174811", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T08:06:04.174905", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T08:06:04.175454", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T08:06:04.175526", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T08:06:04.181728", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T08:06:04.181853", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T08:06:04.186079", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T08:06:07.005316", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "912af3ec-99d5-4ba6-be51-f76b2b084705", "ip": "127.0.0.1", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T08:06:07.019555", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "912af3ec-99d5-4ba6-be51-f76b2b084705", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T08:06:08.946252", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "42aa73f5-3ee8-4528-a8c5-300c82996633", "ip": "127.0.0.1", "path": "/api/v1/melody/generate/ai", "method": "POST"}
{"timestamp": "2025-04-22T08:06:08.950368", "level": "INFO", "message": "Generating melody question with parameters: {'difficulty': <RhythmDifficulty.LOW: 'low'>, 'time_signature': <TimeSignature.TWO_FOUR: '2/4'>, 'measures_count': <MeasureCount.FOUR: 4>, 'tempo': <Tempo.EIGHTY: 80>, 'tonality': 1, 'tonality_choice': 1}", "module": "ai_melody_service", "function": "generate_melody_question", "line": 38}
{"timestamp": "2025-04-22T08:06:08.950467", "level": "INFO", "message": "Starting AI melody generation", "module": "ai_melody_service", "function": "_generate_ai_melody", "line": 98}
{"timestamp": "2025-04-22T08:06:08.950533", "level": "INFO", "message": "Successfully received response from DeepSeek API", "module": "ai_melody_service", "function": "_generate_ai_melody", "line": 106}
{"timestamp": "2025-04-22T08:06:08.950611", "level": "INFO", "message": "Parsing AI response", "module": "ai_melody_service", "function": "_parse_ai_response", "line": 214}
{"timestamp": "2025-04-22T08:06:12.113670", "level": "DEBUG", "message": "Parsed melody data: {\"measures\": [[{\"notes\": [{\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"C4\"}, {\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"D4\"}, {\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"E4\"}, {\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"G4\"}]}], [{\"notes\": [{\"duration\": 1, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"E4\"}, {\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"D4\"}, {\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"C4\"}]}], [{\"notes\": [{\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"E4\"}, {\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"G4\"}, {\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"A4\"}, {\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"G4\"}]}], [{\"notes\": [{\"duration\": 1, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"E4\"}, {\"duration\": 1, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"C4\"}]}]]}", "module": "ai_melody_service", "function": "_parse_ai_response", "line": 339}
{"timestamp": "2025-04-22T08:06:16.042418", "level": "ERROR", "message": "Error parsing AI response: 1 validation error for MelodyNotePitch\npitch\n  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[<app.models.pitch.Pitch ...ject at 0x7734d2fd0250>], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.10/v/model_attributes_type", "module": "ai_melody_service", "function": "_parse_ai_response", "line": 379, "exception": {"type": "ValidationError", "message": "1 validation error for MelodyNotePitch\npitch\n  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[<app.models.pitch.Pitch ...ject at 0x7734d2fd0250>], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.10/v/model_attributes_type", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 357, in _parse_ai_response\n    melody_note = MelodyNotePitch(\n                  ^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/pydantic/main.py\", line 214, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\npydantic_core._pydantic_core.ValidationError: 1 validation error for MelodyNotePitch\npitch\n  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[<app.models.pitch.Pitch ...ject at 0x7734d2fd0250>], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.10/v/model_attributes_type"}}
{"timestamp": "2025-04-22T08:06:16.044867", "level": "ERROR", "message": "Error generating AI melody: 1 validation error for MelodyNotePitch\npitch\n  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[<app.models.pitch.Pitch ...ject at 0x7734d2fd0250>], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.10/v/model_attributes_type", "module": "ai_melody_service", "function": "_generate_ai_melody", "line": 115, "exception": {"type": "ValidationError", "message": "1 validation error for MelodyNotePitch\npitch\n  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[<app.models.pitch.Pitch ...ject at 0x7734d2fd0250>], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.10/v/model_attributes_type", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 110, in _generate_ai_melody\n    melody = self._parse_ai_response({}, request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 357, in _parse_ai_response\n    melody_note = MelodyNotePitch(\n                  ^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/pydantic/main.py\", line 214, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\npydantic_core._pydantic_core.ValidationError: 1 validation error for MelodyNotePitch\npitch\n  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[<app.models.pitch.Pitch ...ject at 0x7734d2fd0250>], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.10/v/model_attributes_type"}}
{"timestamp": "2025-04-22T08:06:16.048069", "level": "ERROR", "message": "Error generating AI melody question: 1 validation error for MelodyNotePitch\npitch\n  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[<app.models.pitch.Pitch ...ject at 0x7734d2fd0250>], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.10/v/model_attributes_type", "module": "ai_melody_service", "function": "generate_melody_question", "line": 92, "exception": {"type": "ValidationError", "message": "1 validation error for MelodyNotePitch\npitch\n  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[<app.models.pitch.Pitch ...ject at 0x7734d2fd0250>], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.10/v/model_attributes_type", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 41, in generate_melody_question\n    correct_melody = await self._generate_ai_melody(request)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 110, in _generate_ai_melody\n    melody = self._parse_ai_response({}, request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 357, in _parse_ai_response\n    melody_note = MelodyNotePitch(\n                  ^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/pydantic/main.py\", line 214, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\npydantic_core._pydantic_core.ValidationError: 1 validation error for MelodyNotePitch\npitch\n  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[<app.models.pitch.Pitch ...ject at 0x7734d2fd0250>], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.10/v/model_attributes_type"}}
{"timestamp": "2025-04-22T08:06:16.050545", "level": "ERROR", "message": "Error in generate_ai_melody_question : 1 validation error for MelodyNotePitch\npitch\n  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[<app.models.pitch.Pitch ...ject at 0x7734d2fd0250>], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.10/v/model_attributes_type\nTraceback: Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/api/v1/melody_api.py\", line 49, in generate_ai_melody_question\n    return await ai_melody_service.generate_melody_question(melody_question_request)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 41, in generate_melody_question\n    correct_melody = await self._generate_ai_melody(request)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 110, in _generate_ai_melody\n    melody = self._parse_ai_response({}, request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 357, in _parse_ai_response\n    melody_note = MelodyNotePitch(\n                  ^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/pydantic/main.py\", line 214, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\npydantic_core._pydantic_core.ValidationError: 1 validation error for MelodyNotePitch\npitch\n  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[<app.models.pitch.Pitch ...ject at 0x7734d2fd0250>], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.10/v/model_attributes_type\n", "module": "melody_api", "function": "generate_ai_melody_question", "line": 52}
{"timestamp": "2025-04-22T08:06:16.052464", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "42aa73f5-3ee8-4528-a8c5-300c82996633", "path": "/api/v1/melody/generate/ai", "method": "POST"}
{"timestamp": "2025-04-22T08:06:27.690758", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "05fd8671-89c0-4c21-8c05-5ec7199ca5c4", "ip": "127.0.0.1", "path": "/api/v1/melody/generate/ai", "method": "POST"}
{"timestamp": "2025-04-22T08:06:27.694126", "level": "INFO", "message": "Generating melody question with parameters: {'difficulty': <RhythmDifficulty.LOW: 'low'>, 'time_signature': <TimeSignature.TWO_FOUR: '2/4'>, 'measures_count': <MeasureCount.FOUR: 4>, 'tempo': <Tempo.EIGHTY: 80>, 'tonality': 1, 'tonality_choice': 1}", "module": "ai_melody_service", "function": "generate_melody_question", "line": 38}
{"timestamp": "2025-04-22T08:06:27.694221", "level": "INFO", "message": "Starting AI melody generation", "module": "ai_melody_service", "function": "_generate_ai_melody", "line": 98}
{"timestamp": "2025-04-22T08:06:27.694286", "level": "INFO", "message": "Successfully received response from DeepSeek API", "module": "ai_melody_service", "function": "_generate_ai_melody", "line": 106}
{"timestamp": "2025-04-22T08:06:27.694356", "level": "INFO", "message": "Parsing AI response", "module": "ai_melody_service", "function": "_parse_ai_response", "line": 214}
{"timestamp": "2025-04-22T08:06:37.252763", "level": "DEBUG", "message": "Parsed melody data: {\"measures\": [[{\"notes\": [{\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"C4\"}, {\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"D4\"}, {\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"E4\"}, {\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"G4\"}]}], [{\"notes\": [{\"duration\": 1, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"E4\"}, {\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"D4\"}, {\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"C4\"}]}], [{\"notes\": [{\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"E4\"}, {\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"G4\"}, {\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"A4\"}, {\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"G4\"}]}], [{\"notes\": [{\"duration\": 1, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"E4\"}, {\"duration\": 1, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"C4\"}]}]]}", "module": "ai_melody_service", "function": "_parse_ai_response", "line": 339}
{"timestamp": "2025-04-22T08:07:36.759497", "level": "ERROR", "message": "Error parsing AI response: 1 validation error for MelodyNotePitch\npitch\n  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[<app.models.pitch.Pitch ...ject at 0x7734d2fd0250>], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.10/v/model_attributes_type", "module": "ai_melody_service", "function": "_parse_ai_response", "line": 379, "exception": {"type": "ValidationError", "message": "1 validation error for MelodyNotePitch\npitch\n  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[<app.models.pitch.Pitch ...ject at 0x7734d2fd0250>], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.10/v/model_attributes_type", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 357, in _parse_ai_response\n    melody_note = MelodyNotePitch(\n                  ^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/pydantic/main.py\", line 214, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\npydantic_core._pydantic_core.ValidationError: 1 validation error for MelodyNotePitch\npitch\n  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[<app.models.pitch.Pitch ...ject at 0x7734d2fd0250>], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.10/v/model_attributes_type"}}
{"timestamp": "2025-04-22T08:08:21.845702", "level": "ERROR", "message": "Error generating AI melody: 1 validation error for MelodyNotePitch\npitch\n  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[<app.models.pitch.Pitch ...ject at 0x7734d2fd0250>], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.10/v/model_attributes_type", "module": "ai_melody_service", "function": "_generate_ai_melody", "line": 115, "exception": {"type": "ValidationError", "message": "1 validation error for MelodyNotePitch\npitch\n  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[<app.models.pitch.Pitch ...ject at 0x7734d2fd0250>], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.10/v/model_attributes_type", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 110, in _generate_ai_melody\n    melody = self._parse_ai_response({}, request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 357, in _parse_ai_response\n    melody_note = MelodyNotePitch(\n                  ^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/pydantic/main.py\", line 214, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\npydantic_core._pydantic_core.ValidationError: 1 validation error for MelodyNotePitch\npitch\n  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[<app.models.pitch.Pitch ...ject at 0x7734d2fd0250>], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.10/v/model_attributes_type"}}
{"timestamp": "2025-04-22T08:08:21.854603", "level": "ERROR", "message": "Error generating AI melody question: 1 validation error for MelodyNotePitch\npitch\n  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[<app.models.pitch.Pitch ...ject at 0x7734d2fd0250>], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.10/v/model_attributes_type", "module": "ai_melody_service", "function": "generate_melody_question", "line": 92, "exception": {"type": "ValidationError", "message": "1 validation error for MelodyNotePitch\npitch\n  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[<app.models.pitch.Pitch ...ject at 0x7734d2fd0250>], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.10/v/model_attributes_type", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 41, in generate_melody_question\n    correct_melody = await self._generate_ai_melody(request)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 110, in _generate_ai_melody\n    melody = self._parse_ai_response({}, request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 357, in _parse_ai_response\n    melody_note = MelodyNotePitch(\n                  ^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/pydantic/main.py\", line 214, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\npydantic_core._pydantic_core.ValidationError: 1 validation error for MelodyNotePitch\npitch\n  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[<app.models.pitch.Pitch ...ject at 0x7734d2fd0250>], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.10/v/model_attributes_type"}}
{"timestamp": "2025-04-22T08:08:21.860927", "level": "ERROR", "message": "Error in generate_ai_melody_question : 1 validation error for MelodyNotePitch\npitch\n  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[<app.models.pitch.Pitch ...ject at 0x7734d2fd0250>], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.10/v/model_attributes_type\nTraceback: Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/api/v1/melody_api.py\", line 49, in generate_ai_melody_question\n    return await ai_melody_service.generate_melody_question(melody_question_request)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 41, in generate_melody_question\n    correct_melody = await self._generate_ai_melody(request)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 110, in _generate_ai_melody\n    melody = self._parse_ai_response({}, request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 357, in _parse_ai_response\n    melody_note = MelodyNotePitch(\n                  ^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/site-packages/pydantic/main.py\", line 214, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\npydantic_core._pydantic_core.ValidationError: 1 validation error for MelodyNotePitch\npitch\n  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[<app.models.pitch.Pitch ...ject at 0x7734d2fd0250>], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.10/v/model_attributes_type\n", "module": "melody_api", "function": "generate_ai_melody_question", "line": 52}
{"timestamp": "2025-04-22T08:08:21.892859", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "05fd8671-89c0-4c21-8c05-5ec7199ca5c4", "path": "/api/v1/melody/generate/ai", "method": "POST"}
{"timestamp": "2025-04-22T08:08:21.978893", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-22T08:09:05.308693", "level": "INFO", "message": "Initializing RhythmService", "module": "rhythm_service", "function": "__init__", "line": 15}
{"timestamp": "2025-04-22T08:09:05.308877", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:09:05.309005", "level": "INFO", "message": "Generated 5 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:09:05.309088", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:09:05.309202", "level": "INFO", "message": "Generated 13 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:09:05.309294", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:09:05.309456", "level": "INFO", "message": "Generated 34 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:09:05.309535", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5, 0.25, 1.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:09:05.309740", "level": "INFO", "message": "Generated 60 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:09:05.309810", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5, 0.25, 1.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:09:05.311228", "level": "INFO", "message": "Generated 610 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:09:05.311314", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5, 0.25, 1.5], max_combinations=10000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:09:05.325037", "level": "INFO", "message": "Generated 6236 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:09:05.325146", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:09:05.325231", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:09:05.325303", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:09:05.325381", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:09:05.325448", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:09:05.325546", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:09:05.325615", "level": "INFO", "message": "Rhythm patterns initialized", "module": "rhythm_service", "function": "__init__", "line": 40}
{"timestamp": "2025-04-22T08:09:05.332001", "level": "INFO", "message": "AIMelodyService initialized with DeepSeek API configuration", "module": "ai_melody_service", "function": "__init__", "line": 33}
{"timestamp": "2025-04-22T08:09:05.479481", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T08:09:05.485848", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T08:09:05.500407", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T08:09:05.503447", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T08:09:05.504692", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T08:09:05.505662", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T08:09:05.507265", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T08:09:05.508397", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T08:09:05.510396", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T08:09:05.510545", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T08:09:05.511111", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T08:09:05.511208", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T08:09:05.513557", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T08:09:05.513720", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T08:09:05.514444", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T08:09:05.514542", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T08:09:05.521295", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T08:09:05.521483", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T08:09:05.525796", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T08:09:09.410563", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "d410aec1-07f2-46b4-a808-bc51eb86fa54", "ip": "127.0.0.1", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T08:09:09.426212", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "d410aec1-07f2-46b4-a808-bc51eb86fa54", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T08:09:10.735682", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "10fca857-d1f2-470c-a3b1-2e5c6ef04812", "ip": "127.0.0.1", "path": "/api/v1/melody/generate/ai", "method": "POST"}
{"timestamp": "2025-04-22T08:09:10.739770", "level": "INFO", "message": "Generating melody question with parameters: {'difficulty': <RhythmDifficulty.LOW: 'low'>, 'time_signature': <TimeSignature.TWO_FOUR: '2/4'>, 'measures_count': <MeasureCount.FOUR: 4>, 'tempo': <Tempo.EIGHTY: 80>, 'tonality': 1, 'tonality_choice': 1}", "module": "ai_melody_service", "function": "generate_melody_question", "line": 38}
{"timestamp": "2025-04-22T08:09:10.739900", "level": "INFO", "message": "Starting AI melody generation", "module": "ai_melody_service", "function": "_generate_ai_melody", "line": 98}
{"timestamp": "2025-04-22T08:09:10.739982", "level": "INFO", "message": "Successfully received response from DeepSeek API", "module": "ai_melody_service", "function": "_generate_ai_melody", "line": 106}
{"timestamp": "2025-04-22T08:09:10.740069", "level": "INFO", "message": "Parsing AI response", "module": "ai_melody_service", "function": "_parse_ai_response", "line": 214}
{"timestamp": "2025-04-22T08:09:10.740234", "level": "DEBUG", "message": "Parsed melody data: {\"measures\": [[{\"notes\": [{\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"C4\"}, {\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"D4\"}, {\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"E4\"}, {\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"G4\"}]}], [{\"notes\": [{\"duration\": 1, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"E4\"}, {\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"D4\"}, {\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"C4\"}]}], [{\"notes\": [{\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"E4\"}, {\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"G4\"}, {\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"A4\"}, {\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"G4\"}]}], [{\"notes\": [{\"duration\": 1, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"E4\"}, {\"duration\": 1, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"C4\"}]}]]}", "module": "ai_melody_service", "function": "_parse_ai_response", "line": 339}
{"timestamp": "2025-04-22T08:09:24.293730", "level": "INFO", "message": "Successfully created MelodyScorePitch object", "module": "ai_melody_service", "function": "_parse_ai_response", "line": 376}
{"timestamp": "2025-04-22T08:09:24.294201", "level": "INFO", "message": "Successfully parsed AI response into melody", "module": "ai_melody_service", "function": "_generate_ai_melody", "line": 111}
{"timestamp": "2025-04-22T08:09:24.294530", "level": "INFO", "message": "Successfully generated correct melody", "module": "ai_melody_service", "function": "generate_melody_question", "line": 42}
{"timestamp": "2025-04-22T08:09:24.310574", "level": "INFO", "message": "Generated 4 wrong options using systematic method", "module": "ai_melody_service", "function": "generate_melody_question", "line": 46}
{"timestamp": "2025-04-22T08:09:24.312002", "level": "ERROR", "message": "Error generating AI melody question: 'AIMelodyService' object has no attribute '_is_unique_melody'", "module": "ai_melody_service", "function": "generate_melody_question", "line": 92, "exception": {"type": "AttributeError", "message": "'AIMelodyService' object has no attribute '_is_unique_melody'", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 51, in generate_melody_question\n    if self._is_unique_melody(wrong_melody, unique_wrong_options) and self._is_unique_melody(wrong_melody, [correct_melody]):\n       ^^^^^^^^^^^^^^^^^^^^^^\nAttributeError: 'AIMelodyService' object has no attribute '_is_unique_melody'"}}
{"timestamp": "2025-04-22T08:09:24.314398", "level": "ERROR", "message": "Error in generate_ai_melody_question : 'AIMelodyService' object has no attribute '_is_unique_melody'\nTraceback: Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/api/v1/melody_api.py\", line 49, in generate_ai_melody_question\n    return await ai_melody_service.generate_melody_question(melody_question_request)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 51, in generate_melody_question\n    if self._is_unique_melody(wrong_melody, unique_wrong_options) and self._is_unique_melody(wrong_melody, [correct_melody]):\n       ^^^^^^^^^^^^^^^^^^^^^^\nAttributeError: 'AIMelodyService' object has no attribute '_is_unique_melody'\n", "module": "melody_api", "function": "generate_ai_melody_question", "line": 52}
{"timestamp": "2025-04-22T08:09:24.321208", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "10fca857-d1f2-470c-a3b1-2e5c6ef04812", "path": "/api/v1/melody/generate/ai", "method": "POST"}
{"timestamp": "2025-04-22T08:10:53.422935", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-22T08:10:55.787063", "level": "INFO", "message": "Initializing RhythmService", "module": "rhythm_service", "function": "__init__", "line": 15}
{"timestamp": "2025-04-22T08:10:55.787201", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:10:55.787327", "level": "INFO", "message": "Generated 5 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:10:55.787405", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:10:55.787518", "level": "INFO", "message": "Generated 13 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:10:55.787587", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:10:55.787747", "level": "INFO", "message": "Generated 34 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:10:55.787829", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5, 0.25, 1.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:10:55.788039", "level": "INFO", "message": "Generated 60 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:10:55.788111", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5, 0.25, 1.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:10:55.789462", "level": "INFO", "message": "Generated 610 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:10:55.789538", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5, 0.25, 1.5], max_combinations=10000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:10:55.802574", "level": "INFO", "message": "Generated 6236 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:10:55.802684", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:10:55.802785", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:10:55.802860", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:10:55.802946", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:10:55.803017", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:10:55.803099", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:10:55.803169", "level": "INFO", "message": "Rhythm patterns initialized", "module": "rhythm_service", "function": "__init__", "line": 40}
{"timestamp": "2025-04-22T08:10:55.809620", "level": "INFO", "message": "AIMelodyService initialized with DeepSeek API configuration", "module": "ai_melody_service", "function": "__init__", "line": 33}
{"timestamp": "2025-04-22T08:10:55.956587", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T08:10:55.962313", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T08:10:55.977966", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T08:10:55.983155", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T08:10:55.985299", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T08:10:55.987028", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T08:10:55.989774", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T08:10:55.991645", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T08:10:55.995081", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T08:10:55.995332", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T08:10:55.996480", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T08:10:55.996640", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T08:10:55.999811", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T08:10:55.999921", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T08:10:56.000735", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T08:10:56.000822", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T08:10:56.011631", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T08:10:56.011860", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T08:10:56.020884", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T08:11:02.146605", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-22T08:11:04.501115", "level": "INFO", "message": "Initializing RhythmService", "module": "rhythm_service", "function": "__init__", "line": 15}
{"timestamp": "2025-04-22T08:11:04.501278", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:11:04.501447", "level": "INFO", "message": "Generated 5 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:11:04.501544", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:11:04.501660", "level": "INFO", "message": "Generated 13 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:11:04.501726", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:11:04.501877", "level": "INFO", "message": "Generated 34 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:11:04.501966", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5, 0.25, 1.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:11:04.502166", "level": "INFO", "message": "Generated 60 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:11:04.502230", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5, 0.25, 1.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:11:04.503531", "level": "INFO", "message": "Generated 610 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:11:04.503600", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5, 0.25, 1.5], max_combinations=10000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:11:04.515670", "level": "INFO", "message": "Generated 6236 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:11:04.515758", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:11:04.515845", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:11:04.515914", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:11:04.515990", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:11:04.516053", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:11:04.516127", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:11:04.516188", "level": "INFO", "message": "Rhythm patterns initialized", "module": "rhythm_service", "function": "__init__", "line": 40}
{"timestamp": "2025-04-22T08:11:04.522692", "level": "INFO", "message": "AIMelodyService initialized with DeepSeek API configuration", "module": "ai_melody_service", "function": "__init__", "line": 33}
{"timestamp": "2025-04-22T08:11:04.682153", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T08:11:04.687619", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T08:11:04.702174", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T08:11:04.705743", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T08:11:04.707244", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T08:11:04.708457", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T08:11:04.710153", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T08:11:04.711295", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T08:11:04.713021", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T08:11:04.713124", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T08:11:04.713659", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T08:11:04.713733", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T08:11:04.715696", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T08:11:04.715786", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T08:11:04.716412", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T08:11:04.716496", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T08:11:04.722818", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T08:11:04.722963", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T08:11:04.727445", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T08:11:22.442884", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "a372e88d-53d7-4c53-97e0-c0d897a73d5b", "ip": "127.0.0.1", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T08:11:22.457024", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "a372e88d-53d7-4c53-97e0-c0d897a73d5b", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T08:11:24.230562", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "1da947b0-1a2f-4429-95d9-0b3c8c63ad57", "ip": "127.0.0.1", "path": "/api/v1/melody/generate/ai", "method": "POST"}
{"timestamp": "2025-04-22T08:11:24.234749", "level": "INFO", "message": "Generating melody question with parameters: {'difficulty': <RhythmDifficulty.LOW: 'low'>, 'time_signature': <TimeSignature.TWO_FOUR: '2/4'>, 'measures_count': <MeasureCount.FOUR: 4>, 'tempo': <Tempo.EIGHTY: 80>, 'tonality': 1, 'tonality_choice': 1}", "module": "ai_melody_service", "function": "generate_melody_question", "line": 38}
{"timestamp": "2025-04-22T08:11:24.234869", "level": "INFO", "message": "Starting AI melody generation", "module": "ai_melody_service", "function": "_generate_ai_melody", "line": 98}
{"timestamp": "2025-04-22T08:11:24.234954", "level": "INFO", "message": "Successfully received response from DeepSeek API", "module": "ai_melody_service", "function": "_generate_ai_melody", "line": 106}
{"timestamp": "2025-04-22T08:11:24.235039", "level": "INFO", "message": "Parsing AI response", "module": "ai_melody_service", "function": "_parse_ai_response", "line": 214}
{"timestamp": "2025-04-22T08:11:24.235191", "level": "DEBUG", "message": "Parsed melody data: {\"measures\": [[{\"notes\": [{\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"C4\"}, {\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"D4\"}, {\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"E4\"}, {\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"G4\"}]}], [{\"notes\": [{\"duration\": 1, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"E4\"}, {\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"D4\"}, {\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"C4\"}]}], [{\"notes\": [{\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"E4\"}, {\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"G4\"}, {\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"A4\"}, {\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"G4\"}]}], [{\"notes\": [{\"duration\": 1, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"E4\"}, {\"duration\": 1, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"C4\"}]}]]}", "module": "ai_melody_service", "function": "_parse_ai_response", "line": 339}
{"timestamp": "2025-04-22T08:11:24.237306", "level": "INFO", "message": "Successfully created MelodyScorePitch object", "module": "ai_melody_service", "function": "_parse_ai_response", "line": 376}
{"timestamp": "2025-04-22T08:11:24.237401", "level": "INFO", "message": "Successfully parsed AI response into melody", "module": "ai_melody_service", "function": "_generate_ai_melody", "line": 111}
{"timestamp": "2025-04-22T08:11:24.237485", "level": "INFO", "message": "Successfully generated correct melody", "module": "ai_melody_service", "function": "generate_melody_question", "line": 42}
{"timestamp": "2025-04-22T08:11:24.244234", "level": "INFO", "message": "Generated 4 wrong options using systematic method", "module": "ai_melody_service", "function": "generate_melody_question", "line": 46}
{"timestamp": "2025-04-22T08:11:24.244426", "level": "INFO", "message": "Found 3 unique wrong options", "module": "ai_melody_service", "function": "generate_melody_question", "line": 55}
{"timestamp": "2025-04-22T08:11:24.244512", "level": "INFO", "message": "Added basic variations, total unique wrong options: 3", "module": "ai_melody_service", "function": "generate_melody_question", "line": 70}
{"timestamp": "2025-04-22T08:11:24.244602", "level": "INFO", "message": "Randomized all options", "module": "ai_melody_service", "function": "generate_melody_question", "line": 75}
{"timestamp": "2025-04-22T08:11:24.244797", "level": "INFO", "message": "Correct answer is option D", "module": "ai_melody_service", "function": "generate_melody_question", "line": 79}
{"timestamp": "2025-04-22T08:11:24.244897", "level": "INFO", "message": "Successfully created melody question response", "module": "ai_melody_service", "function": "generate_melody_question", "line": 89}
{"timestamp": "2025-04-22T08:11:24.245567", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "1da947b0-1a2f-4429-95d9-0b3c8c63ad57", "path": "/api/v1/melody/generate/ai", "method": "POST"}
{"timestamp": "2025-04-22T08:12:38.044241", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-22T08:12:40.241203", "level": "INFO", "message": "Initializing RhythmService", "module": "rhythm_service", "function": "__init__", "line": 15}
{"timestamp": "2025-04-22T08:12:40.241358", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:12:40.241549", "level": "INFO", "message": "Generated 5 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:12:40.241630", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:12:40.241741", "level": "INFO", "message": "Generated 13 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:12:40.241810", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:12:40.241971", "level": "INFO", "message": "Generated 34 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:12:40.242077", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5, 0.25, 1.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:12:40.242281", "level": "INFO", "message": "Generated 60 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:12:40.242346", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5, 0.25, 1.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:12:40.243721", "level": "INFO", "message": "Generated 610 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:12:40.243795", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5, 0.25, 1.5], max_combinations=10000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:12:40.256647", "level": "INFO", "message": "Generated 6236 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:12:40.256743", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:12:40.256827", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:12:40.256902", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:12:40.256983", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:12:40.257048", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:12:40.257125", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:12:40.257191", "level": "INFO", "message": "Rhythm patterns initialized", "module": "rhythm_service", "function": "__init__", "line": 40}
{"timestamp": "2025-04-22T08:12:40.263398", "level": "INFO", "message": "AIMelodyService initialized with DeepSeek API configuration", "module": "ai_melody_service", "function": "__init__", "line": 33}
{"timestamp": "2025-04-22T08:12:40.414786", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T08:12:40.420719", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T08:12:40.435529", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T08:12:40.438811", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T08:12:40.440432", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T08:12:40.441587", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T08:12:40.443232", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T08:12:40.444464", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T08:12:40.446190", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T08:12:40.446317", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T08:12:40.446879", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T08:12:40.446990", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T08:12:40.449014", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T08:12:40.449096", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T08:12:40.449677", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T08:12:40.449743", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T08:12:40.456066", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T08:12:40.456216", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T08:12:40.460876", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T08:12:51.914243", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-22T08:12:54.111681", "level": "INFO", "message": "Initializing RhythmService", "module": "rhythm_service", "function": "__init__", "line": 15}
{"timestamp": "2025-04-22T08:12:54.111837", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:12:54.111950", "level": "INFO", "message": "Generated 5 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:12:54.112026", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:12:54.112132", "level": "INFO", "message": "Generated 13 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:12:54.112197", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:12:54.112353", "level": "INFO", "message": "Generated 34 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:12:54.112431", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5, 0.25, 1.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:12:54.112634", "level": "INFO", "message": "Generated 60 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:12:54.112700", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5, 0.25, 1.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:12:54.114049", "level": "INFO", "message": "Generated 610 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:12:54.114120", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5, 0.25, 1.5], max_combinations=10000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:12:54.126712", "level": "INFO", "message": "Generated 6236 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:12:54.126805", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:12:54.126889", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:12:54.126958", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:12:54.127036", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:12:54.127100", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:12:54.127178", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:12:54.127241", "level": "INFO", "message": "Rhythm patterns initialized", "module": "rhythm_service", "function": "__init__", "line": 40}
{"timestamp": "2025-04-22T08:12:54.133460", "level": "INFO", "message": "AIMelodyService initialized with DeepSeek API configuration", "module": "ai_melody_service", "function": "__init__", "line": 33}
{"timestamp": "2025-04-22T08:12:54.316090", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T08:12:54.327789", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T08:12:54.346706", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T08:12:54.350584", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T08:12:54.352072", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T08:12:54.353146", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T08:12:54.355500", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T08:12:54.356862", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T08:12:54.359038", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T08:12:54.359156", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T08:12:54.360032", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T08:12:54.360201", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T08:12:54.362873", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T08:12:54.362967", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T08:12:54.363553", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T08:12:54.363625", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T08:12:54.370849", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T08:12:54.371021", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T08:12:54.376674", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T08:12:57.292381", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-22T08:12:59.543813", "level": "INFO", "message": "Initializing RhythmService", "module": "rhythm_service", "function": "__init__", "line": 15}
{"timestamp": "2025-04-22T08:12:59.544046", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:12:59.544190", "level": "INFO", "message": "Generated 5 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:12:59.544267", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:12:59.544377", "level": "INFO", "message": "Generated 13 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:12:59.544444", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:12:59.544615", "level": "INFO", "message": "Generated 34 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:12:59.544693", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5, 0.25, 1.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:12:59.544904", "level": "INFO", "message": "Generated 60 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:12:59.544971", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5, 0.25, 1.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:12:59.546338", "level": "INFO", "message": "Generated 610 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:12:59.546417", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5, 0.25, 1.5], max_combinations=10000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:12:59.559697", "level": "INFO", "message": "Generated 6236 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:12:59.559817", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:12:59.559908", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:12:59.559980", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:12:59.560060", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:12:59.560126", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:12:59.560205", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:12:59.560273", "level": "INFO", "message": "Rhythm patterns initialized", "module": "rhythm_service", "function": "__init__", "line": 40}
{"timestamp": "2025-04-22T08:12:59.566607", "level": "INFO", "message": "AIMelodyService initialized with DeepSeek API configuration", "module": "ai_melody_service", "function": "__init__", "line": 33}
{"timestamp": "2025-04-22T08:12:59.723469", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T08:12:59.730615", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T08:12:59.745711", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T08:12:59.749124", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T08:12:59.750555", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T08:12:59.751710", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T08:12:59.753333", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T08:12:59.754482", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T08:12:59.756319", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T08:12:59.756433", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T08:12:59.757096", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T08:12:59.757176", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T08:12:59.759206", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T08:12:59.759290", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T08:12:59.759871", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T08:12:59.759943", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T08:12:59.766033", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T08:12:59.766154", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T08:12:59.770365", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T08:13:20.358084", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-22T08:13:22.637317", "level": "INFO", "message": "Initializing RhythmService", "module": "rhythm_service", "function": "__init__", "line": 15}
{"timestamp": "2025-04-22T08:13:22.637476", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:13:22.637601", "level": "INFO", "message": "Generated 5 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:13:22.637674", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:13:22.637785", "level": "INFO", "message": "Generated 13 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:13:22.637851", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:13:22.638024", "level": "INFO", "message": "Generated 34 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:13:22.638107", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5, 0.25, 1.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:13:22.638313", "level": "INFO", "message": "Generated 60 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:13:22.638387", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5, 0.25, 1.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:13:22.639743", "level": "INFO", "message": "Generated 610 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:13:22.639814", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5, 0.25, 1.5], max_combinations=10000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:13:22.652452", "level": "INFO", "message": "Generated 6236 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:13:22.652543", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:13:22.652625", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:13:22.652693", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:13:22.652770", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:13:22.652836", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:13:22.652916", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:13:22.652982", "level": "INFO", "message": "Rhythm patterns initialized", "module": "rhythm_service", "function": "__init__", "line": 40}
{"timestamp": "2025-04-22T08:13:22.659358", "level": "INFO", "message": "AIMelodyService initialized with DeepSeek API configuration", "module": "ai_melody_service", "function": "__init__", "line": 33}
{"timestamp": "2025-04-22T08:13:22.818172", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T08:13:22.824725", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T08:13:22.839448", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T08:13:22.843328", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T08:13:22.844759", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T08:13:22.845821", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T08:13:22.847344", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T08:13:22.848312", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T08:13:22.849920", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T08:13:22.850020", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T08:13:22.850634", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T08:13:22.850713", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T08:13:22.852627", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T08:13:22.852713", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T08:13:22.853310", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T08:13:22.853376", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T08:13:22.859753", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T08:13:22.859895", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T08:13:22.864032", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T08:16:56.916714", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-22T08:17:00.980928", "level": "INFO", "message": "Initializing RhythmService", "module": "rhythm_service", "function": "__init__", "line": 15}
{"timestamp": "2025-04-22T08:17:00.981084", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:17:00.981242", "level": "INFO", "message": "Generated 5 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:17:00.981322", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:17:00.981436", "level": "INFO", "message": "Generated 13 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:17:00.981504", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:17:00.981657", "level": "INFO", "message": "Generated 34 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:17:00.981735", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5, 0.25, 1.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:17:00.981950", "level": "INFO", "message": "Generated 60 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:17:00.982030", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5, 0.25, 1.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:17:00.983345", "level": "INFO", "message": "Generated 610 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:17:00.983413", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5, 0.25, 1.5], max_combinations=10000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:17:00.995658", "level": "INFO", "message": "Generated 6236 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:17:00.995755", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:17:00.995838", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:17:00.995913", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:17:00.995991", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:17:00.996058", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:17:00.996136", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:17:00.996202", "level": "INFO", "message": "Rhythm patterns initialized", "module": "rhythm_service", "function": "__init__", "line": 40}
{"timestamp": "2025-04-22T08:17:01.000541", "level": "INFO", "message": "AIMelodyService initialized with DeepSeek API configuration", "module": "ai_melody_service", "function": "__init__", "line": 33}
{"timestamp": "2025-04-22T08:17:01.171480", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T08:17:01.177345", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T08:17:01.192945", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T08:17:01.196503", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T08:17:01.198127", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T08:17:01.199329", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T08:17:01.201030", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T08:17:01.202213", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T08:17:01.203876", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T08:17:01.203982", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T08:17:01.204674", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T08:17:01.204752", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T08:17:01.206680", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T08:17:01.206762", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T08:17:01.207352", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T08:17:01.207419", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T08:17:01.213912", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T08:17:01.214067", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T08:17:01.218654", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T08:18:20.686946", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "72fe44cd-18d7-4657-b5dd-4b825c55a9ce", "ip": "127.0.0.1", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T08:18:20.701921", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "72fe44cd-18d7-4657-b5dd-4b825c55a9ce", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T08:18:22.664530", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "35919a83-8502-4892-b44b-44473051a362", "ip": "127.0.0.1", "path": "/api/v1/melody/generate/ai", "method": "POST"}
{"timestamp": "2025-04-22T08:18:22.668633", "level": "INFO", "message": "Generating melody question with parameters: {'difficulty': <RhythmDifficulty.LOW: 'low'>, 'time_signature': <TimeSignature.TWO_FOUR: '2/4'>, 'measures_count': <MeasureCount.FOUR: 4>, 'tempo': <Tempo.EIGHTY: 80>, 'tonality': 1, 'tonality_choice': 1}", "module": "ai_melody_service", "function": "generate_melody_question", "line": 38}
{"timestamp": "2025-04-22T08:18:22.668731", "level": "INFO", "message": "Starting AI melody generation", "module": "ai_melody_service", "function": "_generate_ai_melody", "line": 98}
{"timestamp": "2025-04-22T08:18:22.668814", "level": "DEBUG", "message": "Building melody prompt", "module": "ai_melody_service", "function": "_build_melody_prompt", "line": 120}
{"timestamp": "2025-04-22T08:18:22.669028", "level": "DEBUG", "message": "Generated prompt: \n        4\n        1. 2/4\n        2. 80bpm\n        3. low,:['', '']\n        4. C\n        5. \n        \n        \n        1. \n        2. 2/4\n        3. \n        4. \n        5. \n        \n        JSON\n        {\n            \"measures\": [  //measures 4\n                [\n                    {\n                        \"notes\": [ //notes \n                            {\n                                \"duration\": 0.5,  // 0.510.250.1250.751.5\n                                \"is_rest\": false,  // \n                                \"is_dotted\": false,  // \n                                \"tied_to_next\": false,  // \n                                \"pitch\": \"C2\",  // \n                            }\n                        ]\n                    }\n                ]\n            ]\n        }\n\n        \n        1. \n        2. \n        3. \n        4. JSON\n        5. false\"false\"\n        6. \n        \n        ", "module": "ai_melody_service", "function": "_build_melody_prompt", "line": 175}
{"timestamp": "2025-04-22T08:18:22.669120", "level": "DEBUG", "message": "Generated prompt: \n        4\n        1. 2/4\n        2. 80bpm\n        3. low,:['', '']\n        4. C\n        5. \n        \n        \n        1. \n        2. 2/4\n        3. \n        4. \n        5. \n        \n        JSON\n        {\n            \"measures\": [  //measures 4\n                [\n                    {\n                        \"notes\": [ //notes \n                            {\n                                \"duration\": 0.5,  // 0.510.250.1250.751.5\n                                \"is_rest\": false,  // \n                                \"is_dotted\": false,  // \n                                \"tied_to_next\": false,  // \n                                \"pitch\": \"C2\",  // \n                            }\n                        ]\n                    }\n                ]\n            ]\n        }\n\n        \n        1. \n        2. \n        3. \n        4. JSON\n        5. false\"false\"\n        6. \n        \n        ", "module": "ai_melody_service", "function": "_generate_ai_melody", "line": 102}
{"timestamp": "2025-04-22T08:18:22.669199", "level": "INFO", "message": "Calling DeepSeek API", "module": "ai_melody_service", "function": "_call_deepseek_api", "line": 180}
{"timestamp": "2025-04-22T08:18:30.452737", "level": "DEBUG", "message": "API request data: {\"model\": \"deepseek-chat\", \"messages\": [{\"role\": \"user\", \"content\": \"\\n        4\\n        1. 2/4\\n        2. 80bpm\\n        3. low,:['', '']\\n        4. C\\n        5. \\n        \\n        \\n        1. \\n        2. 2/4\\n        3. \\n        4. \\n        5. \\n        \\n        JSON\\n        {\\n            \\\"measures\\\": [  //measures 4\\n                [\\n                    {\\n                        \\\"notes\\\": [ //notes \\n                            {\\n                                \\\"duration\\\": 0.5,  // 0.510.250.1250.751.5\\n                                \\\"is_rest\\\": false,  // \\n                                \\\"is_dotted\\\": false,  // \\n                                \\\"tied_to_next\\\": false,  // \\n                                \\\"pitch\\\": \\\"C2\\\",  // \\n                            }\\n                        ]\\n                    }\\n                ]\\n            ]\\n        }\\n\\n        \\n        1. \\n        2. \\n        3. \\n        4. JSON\\n        5. false\\\"false\\\"\\n        6. \\n        \\n        \"}], \"temperature\": 0.5, \"max_tokens\": 5000, \"stream\": false, \"top_p\": 0.9}", "module": "ai_melody_service", "function": "_call_deepseek_api", "line": 195}
{"timestamp": "2025-04-22T08:19:09.839381", "level": "INFO", "message": "Successfully received response from DeepSeek API", "module": "ai_melody_service", "function": "_call_deepseek_api", "line": 207}
{"timestamp": "2025-04-22T08:19:09.842250", "level": "INFO", "message": "Successfully received response from DeepSeek API", "module": "ai_melody_service", "function": "_generate_ai_melody", "line": 106}
{"timestamp": "2025-04-22T08:19:09.842740", "level": "INFO", "message": "Parsing AI response", "module": "ai_melody_service", "function": "_parse_ai_response", "line": 214}
{"timestamp": "2025-04-22T08:19:09.852477", "level": "ERROR", "message": "Error parsing AI response: Expecting value: line 1 column 1 (char 0)", "module": "ai_melody_service", "function": "_parse_ai_response", "line": 379, "exception": {"type": "JSONDecodeError", "message": "Expecting value: line 1 column 1 (char 0)", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 216, in _parse_ai_response\n    melody_data = json.loads(response[\"choices\"][0][\"message\"][\"content\"])\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 355, in raw_decode\n    raise JSONDecodeError(\"Expecting value\", s, err.value) from None\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)"}}
{"timestamp": "2025-04-22T08:19:09.856688", "level": "ERROR", "message": "Error generating AI melody: Expecting value: line 1 column 1 (char 0)", "module": "ai_melody_service", "function": "_generate_ai_melody", "line": 115, "exception": {"type": "JSONDecodeError", "message": "Expecting value: line 1 column 1 (char 0)", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 109, in _generate_ai_melody\n    melody = self._parse_ai_response(response, request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 216, in _parse_ai_response\n    melody_data = json.loads(response[\"choices\"][0][\"message\"][\"content\"])\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 355, in raw_decode\n    raise JSONDecodeError(\"Expecting value\", s, err.value) from None\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)"}}
{"timestamp": "2025-04-22T08:19:09.859191", "level": "ERROR", "message": "Error generating AI melody question: Expecting value: line 1 column 1 (char 0)", "module": "ai_melody_service", "function": "generate_melody_question", "line": 92, "exception": {"type": "JSONDecodeError", "message": "Expecting value: line 1 column 1 (char 0)", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 41, in generate_melody_question\n    correct_melody = await self._generate_ai_melody(request)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 109, in _generate_ai_melody\n    melody = self._parse_ai_response(response, request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 216, in _parse_ai_response\n    melody_data = json.loads(response[\"choices\"][0][\"message\"][\"content\"])\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 355, in raw_decode\n    raise JSONDecodeError(\"Expecting value\", s, err.value) from None\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)"}}
{"timestamp": "2025-04-22T08:19:09.860889", "level": "ERROR", "message": "Error in generate_ai_melody_question : Expecting value: line 1 column 1 (char 0)\nTraceback: Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/api/v1/melody_api.py\", line 49, in generate_ai_melody_question\n    return await ai_melody_service.generate_melody_question(melody_question_request)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 41, in generate_melody_question\n    correct_melody = await self._generate_ai_melody(request)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 109, in _generate_ai_melody\n    melody = self._parse_ai_response(response, request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 216, in _parse_ai_response\n    melody_data = json.loads(response[\"choices\"][0][\"message\"][\"content\"])\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 355, in raw_decode\n    raise JSONDecodeError(\"Expecting value\", s, err.value) from None\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n", "module": "melody_api", "function": "generate_ai_melody_question", "line": 52}
{"timestamp": "2025-04-22T08:19:09.867744", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "35919a83-8502-4892-b44b-44473051a362", "path": "/api/v1/melody/generate/ai", "method": "POST"}
{"timestamp": "2025-04-22T08:27:50.560912", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-22T08:27:52.740128", "level": "INFO", "message": "Initializing RhythmService", "module": "rhythm_service", "function": "__init__", "line": 15}
{"timestamp": "2025-04-22T08:27:52.740278", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:27:52.740400", "level": "INFO", "message": "Generated 5 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:27:52.740499", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:27:52.740615", "level": "INFO", "message": "Generated 13 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:27:52.740682", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:27:52.740836", "level": "INFO", "message": "Generated 34 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:27:52.740931", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5, 0.25, 1.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:27:52.741140", "level": "INFO", "message": "Generated 60 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:27:52.741209", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5, 0.25, 1.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:27:52.742548", "level": "INFO", "message": "Generated 610 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:27:52.742627", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5, 0.25, 1.5], max_combinations=10000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:27:52.755129", "level": "INFO", "message": "Generated 6236 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:27:52.755216", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:27:52.755323", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:27:52.755392", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:27:52.755471", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:27:52.755537", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:27:52.755611", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:27:52.755678", "level": "INFO", "message": "Rhythm patterns initialized", "module": "rhythm_service", "function": "__init__", "line": 40}
{"timestamp": "2025-04-22T08:27:52.761517", "level": "INFO", "message": "AIMelodyService initialized with DeepSeek API configuration", "module": "ai_melody_service", "function": "__init__", "line": 33}
{"timestamp": "2025-04-22T08:27:52.901117", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T08:27:52.906976", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T08:27:52.921243", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T08:27:52.924266", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T08:27:52.925534", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T08:27:52.926621", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T08:27:52.928150", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T08:27:52.929276", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T08:27:52.930931", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T08:27:52.931056", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T08:27:52.931559", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T08:27:52.931636", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T08:27:52.933505", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T08:27:52.933611", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T08:27:52.934186", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T08:27:52.934268", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T08:27:52.940458", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T08:27:52.940601", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T08:27:52.944865", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T08:27:56.765777", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-22T08:27:59.089855", "level": "INFO", "message": "Initializing RhythmService", "module": "rhythm_service", "function": "__init__", "line": 15}
{"timestamp": "2025-04-22T08:27:59.090015", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:27:59.090140", "level": "INFO", "message": "Generated 5 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:27:59.090211", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:27:59.090320", "level": "INFO", "message": "Generated 13 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:27:59.090385", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:27:59.090538", "level": "INFO", "message": "Generated 34 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:27:59.090616", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5, 0.25, 1.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:27:59.090816", "level": "INFO", "message": "Generated 60 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:27:59.090881", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5, 0.25, 1.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:27:59.092272", "level": "INFO", "message": "Generated 610 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:27:59.092351", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5, 0.25, 1.5], max_combinations=10000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:27:59.105011", "level": "INFO", "message": "Generated 6236 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:27:59.105094", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:27:59.105172", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:27:59.105238", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:27:59.105315", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:27:59.105379", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:27:59.105453", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:27:59.105518", "level": "INFO", "message": "Rhythm patterns initialized", "module": "rhythm_service", "function": "__init__", "line": 40}
{"timestamp": "2025-04-22T08:27:59.111578", "level": "INFO", "message": "AIMelodyService initialized with DeepSeek API configuration", "module": "ai_melody_service", "function": "__init__", "line": 33}
{"timestamp": "2025-04-22T08:27:59.266616", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T08:27:59.276442", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T08:27:59.291032", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T08:27:59.294230", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T08:27:59.295703", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T08:27:59.296837", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T08:27:59.298339", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T08:27:59.299436", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T08:27:59.301062", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T08:27:59.301161", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T08:27:59.301687", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T08:27:59.301762", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T08:27:59.303703", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T08:27:59.303789", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T08:27:59.304388", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T08:27:59.304458", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T08:27:59.310582", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T08:27:59.310705", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T08:27:59.314847", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T08:28:02.117927", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "fbcd0353-a801-4ef0-af3e-aa3bc3770f44", "ip": "127.0.0.1", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T08:28:02.131842", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "fbcd0353-a801-4ef0-af3e-aa3bc3770f44", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T08:28:06.097179", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "916b6005-e2f8-477a-90b5-36efd4aed2f8", "ip": "127.0.0.1", "path": "/api/v1/melody/generate/ai", "method": "POST"}
{"timestamp": "2025-04-22T08:28:06.101412", "level": "INFO", "message": "Generating melody question with parameters: {'difficulty': <RhythmDifficulty.LOW: 'low'>, 'time_signature': <TimeSignature.TWO_FOUR: '2/4'>, 'measures_count': <MeasureCount.FOUR: 4>, 'tempo': <Tempo.EIGHTY: 80>, 'tonality': 1, 'tonality_choice': 1}", "module": "ai_melody_service", "function": "generate_melody_question", "line": 38}
{"timestamp": "2025-04-22T08:28:06.101515", "level": "INFO", "message": "Starting AI melody generation", "module": "ai_melody_service", "function": "_generate_ai_melody", "line": 98}
{"timestamp": "2025-04-22T08:28:06.101623", "level": "DEBUG", "message": "Building melody prompt", "module": "ai_melody_service", "function": "_build_melody_prompt", "line": 120}
{"timestamp": "2025-04-22T08:28:06.101848", "level": "DEBUG", "message": "Generated prompt: \n        4\n        1. 2/4\n        2. 80bpm\n        3. low,:['', '']\n        4. C\n        5. \n        \n        \n        1. \n        2. 2/4\n        3. \n        4. \n        5. \n        \n        JSON\n        {\n            \"measures\": [  //measures 4\n                [\n                    {\n                        \"notes\": [ //notes \n                            {\n                                \"duration\": 0.5,  // 0.510.250.1250.751.5\n                                \"is_rest\": false,  // \n                                \"is_dotted\": false,  // \n                                \"tied_to_next\": false,  // \n                                \"pitch\": \"C2\",  // \n                            }\n                        ]\n                    }\n                ]\n            ]\n        }\n\n        \n        1. \n        2. \n        3. \n        4. JSON\n        5. false\"false\"\n        6. \n        \n        ", "module": "ai_melody_service", "function": "_build_melody_prompt", "line": 175}
{"timestamp": "2025-04-22T08:28:06.101972", "level": "DEBUG", "message": "Generated prompt: \n        4\n        1. 2/4\n        2. 80bpm\n        3. low,:['', '']\n        4. C\n        5. \n        \n        \n        1. \n        2. 2/4\n        3. \n        4. \n        5. \n        \n        JSON\n        {\n            \"measures\": [  //measures 4\n                [\n                    {\n                        \"notes\": [ //notes \n                            {\n                                \"duration\": 0.5,  // 0.510.250.1250.751.5\n                                \"is_rest\": false,  // \n                                \"is_dotted\": false,  // \n                                \"tied_to_next\": false,  // \n                                \"pitch\": \"C2\",  // \n                            }\n                        ]\n                    }\n                ]\n            ]\n        }\n\n        \n        1. \n        2. \n        3. \n        4. JSON\n        5. false\"false\"\n        6. \n        \n        ", "module": "ai_melody_service", "function": "_generate_ai_melody", "line": 102}
{"timestamp": "2025-04-22T08:28:06.102059", "level": "INFO", "message": "Calling DeepSeek API", "module": "ai_melody_service", "function": "_call_deepseek_api", "line": 180}
{"timestamp": "2025-04-22T08:28:06.102187", "level": "DEBUG", "message": "API request data: {\"model\": \"deepseek-chat\", \"messages\": [{\"role\": \"user\", \"content\": \"\\n        4\\n        1. 2/4\\n        2. 80bpm\\n        3. low,:['', '']\\n        4. C\\n        5. \\n        \\n        \\n        1. \\n        2. 2/4\\n        3. \\n        4. \\n        5. \\n        \\n        JSON\\n        {\\n            \\\"measures\\\": [  //measures 4\\n                [\\n                    {\\n                        \\\"notes\\\": [ //notes \\n                            {\\n                                \\\"duration\\\": 0.5,  // 0.510.250.1250.751.5\\n                                \\\"is_rest\\\": false,  // \\n                                \\\"is_dotted\\\": false,  // \\n                                \\\"tied_to_next\\\": false,  // \\n                                \\\"pitch\\\": \\\"C2\\\",  // \\n                            }\\n                        ]\\n                    }\\n                ]\\n            ]\\n        }\\n\\n        \\n        1. \\n        2. \\n        3. \\n        4. JSON\\n        5. false\\\"false\\\"\\n        6. \\n        \\n        \"}], \"temperature\": 0.5, \"max_tokens\": 5000, \"stream\": false, \"top_p\": 0.9}", "module": "ai_melody_service", "function": "_call_deepseek_api", "line": 195}
{"timestamp": "2025-04-22T08:28:40.419907", "level": "INFO", "message": "Successfully received response from DeepSeek API", "module": "ai_melody_service", "function": "_call_deepseek_api", "line": 207}
{"timestamp": "2025-04-22T08:28:40.421660", "level": "INFO", "message": "Successfully received response from DeepSeek API", "module": "ai_melody_service", "function": "_generate_ai_melody", "line": 106}
{"timestamp": "2025-04-22T08:28:40.422004", "level": "INFO", "message": "Parsing AI response", "module": "ai_melody_service", "function": "_parse_ai_response", "line": 214}
{"timestamp": "2025-04-22T08:28:40.422438", "level": "DEBUG", "message": "Parsed melody data: {\"measures\": [[{\"notes\": [{\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"C4\"}, {\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"D4\"}, {\"duration\": 1, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"E4\"}]}], [{\"notes\": [{\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"F4\"}, {\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"E4\"}, {\"duration\": 1, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"D4\"}]}], [{\"notes\": [{\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"C4\"}, {\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"D4\"}, {\"duration\": 1, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"E4\"}]}], [{\"notes\": [{\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"D4\"}, {\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"G4\"}, {\"duration\": 1, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"C4\"}]}]]}", "module": "ai_melody_service", "function": "_parse_ai_response", "line": 341}
{"timestamp": "2025-04-22T08:28:40.428325", "level": "INFO", "message": "Successfully created MelodyScorePitch object", "module": "ai_melody_service", "function": "_parse_ai_response", "line": 378}
{"timestamp": "2025-04-22T08:28:40.428637", "level": "INFO", "message": "Successfully parsed AI response into melody", "module": "ai_melody_service", "function": "_generate_ai_melody", "line": 111}
{"timestamp": "2025-04-22T08:28:40.428901", "level": "INFO", "message": "Successfully generated correct melody", "module": "ai_melody_service", "function": "generate_melody_question", "line": 42}
{"timestamp": "2025-04-22T08:28:40.434438", "level": "INFO", "message": "Generated 4 wrong options using systematic method", "module": "ai_melody_service", "function": "generate_melody_question", "line": 46}
{"timestamp": "2025-04-22T08:28:40.434641", "level": "INFO", "message": "Found 3 unique wrong options", "module": "ai_melody_service", "function": "generate_melody_question", "line": 55}
{"timestamp": "2025-04-22T08:28:40.434765", "level": "INFO", "message": "Added basic variations, total unique wrong options: 3", "module": "ai_melody_service", "function": "generate_melody_question", "line": 70}
{"timestamp": "2025-04-22T08:28:40.434914", "level": "INFO", "message": "Randomized all options", "module": "ai_melody_service", "function": "generate_melody_question", "line": 75}
{"timestamp": "2025-04-22T08:28:40.435147", "level": "INFO", "message": "Correct answer is option C", "module": "ai_melody_service", "function": "generate_melody_question", "line": 79}
{"timestamp": "2025-04-22T08:28:40.435284", "level": "INFO", "message": "Successfully created melody question response", "module": "ai_melody_service", "function": "generate_melody_question", "line": 89}
{"timestamp": "2025-04-22T08:28:40.436307", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "916b6005-e2f8-477a-90b5-36efd4aed2f8", "path": "/api/v1/melody/generate/ai", "method": "POST"}
{"timestamp": "2025-04-22T08:51:25.298151", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-22T08:51:27.478832", "level": "INFO", "message": "Initializing RhythmService", "module": "rhythm_service", "function": "__init__", "line": 15}
{"timestamp": "2025-04-22T08:51:27.478990", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:51:27.479105", "level": "INFO", "message": "Generated 5 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:51:27.479176", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:51:27.479283", "level": "INFO", "message": "Generated 13 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:51:27.479350", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:51:27.479507", "level": "INFO", "message": "Generated 34 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:51:27.479608", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5, 0.25, 1.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:51:27.479805", "level": "INFO", "message": "Generated 60 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:51:27.479876", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5, 0.25, 1.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:51:27.481260", "level": "INFO", "message": "Generated 610 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:51:27.481331", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5, 0.25, 1.5], max_combinations=10000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:51:27.493786", "level": "INFO", "message": "Generated 6236 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:51:27.493896", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:51:27.493974", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:51:27.494039", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:51:27.494113", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:51:27.494175", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:51:27.494248", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:51:27.494310", "level": "INFO", "message": "Rhythm patterns initialized", "module": "rhythm_service", "function": "__init__", "line": 40}
{"timestamp": "2025-04-22T08:51:27.499894", "level": "INFO", "message": "AIMelodyService initialized with DeepSeek API configuration", "module": "ai_melody_service", "function": "__init__", "line": 34}
{"timestamp": "2025-04-22T08:51:27.637721", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T08:51:27.644480", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T08:51:27.659235", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T08:51:27.662230", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T08:51:27.663414", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T08:51:27.664429", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T08:51:27.665997", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T08:51:27.667043", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T08:51:27.668609", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T08:51:27.668714", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T08:51:27.669266", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T08:51:27.669348", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T08:51:27.671223", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T08:51:27.671307", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T08:51:27.671868", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T08:51:27.671939", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T08:51:27.677878", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T08:51:27.678018", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T08:51:27.682066", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T08:51:32.663893", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "e9332100-782f-499a-97e9-46a5c0bd614e", "ip": "127.0.0.1", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T08:51:32.681423", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "e9332100-782f-499a-97e9-46a5c0bd614e", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T08:51:34.709535", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "bbce2f99-cde5-41b0-846f-dc89dbe82fb7", "ip": "127.0.0.1", "path": "/api/v1/melody/generate", "method": "POST"}
{"timestamp": "2025-04-22T08:51:34.715594", "level": "INFO", "message": "Generating rhythm with difficulty=RhythmDifficulty.LOW, time_signature=TimeSignature.TWO_FOUR, measures_count=4", "module": "rhythm_service", "function": "generate_rhythm", "line": 251}
{"timestamp": "2025-04-22T08:51:34.715764", "level": "INFO", "message": "Selected 5 patterns for the given parameters", "module": "rhythm_service", "function": "generate_rhythm", "line": 255}
{"timestamp": "2025-04-22T08:51:34.715919", "level": "INFO", "message": "Selected 4 patterns for measures", "module": "rhythm_service", "function": "generate_rhythm", "line": 271}
{"timestamp": "2025-04-22T08:51:34.716129", "level": "INFO", "message": "Successfully created rhythm measures", "module": "rhythm_service", "function": "generate_rhythm", "line": 281}
{"timestamp": "2025-04-22T08:51:34.723594", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "bbce2f99-cde5-41b0-846f-dc89dbe82fb7", "path": "/api/v1/melody/generate", "method": "POST"}
{"timestamp": "2025-04-22T08:51:39.684326", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "b0aa9c33-5c73-47b3-b28c-db1f0e277d10", "ip": "127.0.0.1", "path": "/api/v1/melody/generate/ai", "method": "POST"}
{"timestamp": "2025-04-22T08:51:39.688218", "level": "INFO", "message": "Generating melody question with parameters: {'difficulty': <RhythmDifficulty.LOW: 'low'>, 'time_signature': <TimeSignature.TWO_FOUR: '2/4'>, 'measures_count': <MeasureCount.FOUR: 4>, 'tempo': <Tempo.EIGHTY: 80>, 'tonality': 1, 'tonality_choice': 1}", "module": "ai_melody_service", "function": "generate_melody_question", "line": 39}
{"timestamp": "2025-04-22T08:51:39.688410", "level": "INFO", "message": "Starting AI melody generation", "module": "ai_melody_service", "function": "_generate_ai_melody", "line": 99}
{"timestamp": "2025-04-22T08:51:39.688560", "level": "DEBUG", "message": "Building melody prompt", "module": "ai_melody_service", "function": "_build_melody_prompt", "line": 121}
{"timestamp": "2025-04-22T08:51:39.688771", "level": "DEBUG", "message": "Generated prompt: \n        4\n        1. 2/4\n        2. 80bpm\n        3. low,:['', '']\n        4. C\n        5. \n        \n        \n        1. \n        2. 2/4\n        3. \n        4. \n        5. \n        \n        JSON\n        {\n            \"measures\": [  //measures 4\n                [\n                    {\n                        \"notes\": [ //notes \n                            {\n                                \"duration\": 0.5,  // 0.510.250.1250.751.5\n                                \"is_rest\": false,  // \n                                \"is_dotted\": false,  // \n                                \"tied_to_next\": false,  // \n                                \"pitch\": \"C2\",  // \n                            }\n                        ]\n                    }\n                ]\n            ]\n        }\n\n        \n        1. \n        2. \n        3. \n        4. JSON\n        5. false\"false\"\n        6. \n        \n        ", "module": "ai_melody_service", "function": "_build_melody_prompt", "line": 176}
{"timestamp": "2025-04-22T08:51:39.688931", "level": "DEBUG", "message": "Generated prompt: \n        4\n        1. 2/4\n        2. 80bpm\n        3. low,:['', '']\n        4. C\n        5. \n        \n        \n        1. \n        2. 2/4\n        3. \n        4. \n        5. \n        \n        JSON\n        {\n            \"measures\": [  //measures 4\n                [\n                    {\n                        \"notes\": [ //notes \n                            {\n                                \"duration\": 0.5,  // 0.510.250.1250.751.5\n                                \"is_rest\": false,  // \n                                \"is_dotted\": false,  // \n                                \"tied_to_next\": false,  // \n                                \"pitch\": \"C2\",  // \n                            }\n                        ]\n                    }\n                ]\n            ]\n        }\n\n        \n        1. \n        2. \n        3. \n        4. JSON\n        5. false\"false\"\n        6. \n        \n        ", "module": "ai_melody_service", "function": "_generate_ai_melody", "line": 103}
{"timestamp": "2025-04-22T08:51:39.689102", "level": "INFO", "message": "Calling DeepSeek API", "module": "ai_melody_service", "function": "_call_deepseek_api", "line": 181}
{"timestamp": "2025-04-22T08:51:39.691433", "level": "ERROR", "message": "Error generating AI melody: type object 'datetime.time' has no attribute 'time'", "module": "ai_melody_service", "function": "_generate_ai_melody", "line": 116, "exception": {"type": "AttributeError", "message": "type object 'datetime.time' has no attribute 'time'", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 106, in _generate_ai_melody\n    response = await self._call_deepseek_api(prompt)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 182, in _call_deepseek_api\n    start_time = time.time()\n                 ^^^^^^^^^\nAttributeError: type object 'datetime.time' has no attribute 'time'"}}
{"timestamp": "2025-04-22T08:51:39.692486", "level": "ERROR", "message": "Error generating AI melody question: type object 'datetime.time' has no attribute 'time'", "module": "ai_melody_service", "function": "generate_melody_question", "line": 93, "exception": {"type": "AttributeError", "message": "type object 'datetime.time' has no attribute 'time'", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 42, in generate_melody_question\n    correct_melody = await self._generate_ai_melody(request)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 106, in _generate_ai_melody\n    response = await self._call_deepseek_api(prompt)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 182, in _call_deepseek_api\n    start_time = time.time()\n                 ^^^^^^^^^\nAttributeError: type object 'datetime.time' has no attribute 'time'"}}
{"timestamp": "2025-04-22T08:51:39.693594", "level": "ERROR", "message": "Error in generate_ai_melody_question : type object 'datetime.time' has no attribute 'time'\nTraceback: Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/api/v1/melody_api.py\", line 49, in generate_ai_melody_question\n    return await ai_melody_service.generate_melody_question(melody_question_request)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 42, in generate_melody_question\n    correct_melody = await self._generate_ai_melody(request)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 106, in _generate_ai_melody\n    response = await self._call_deepseek_api(prompt)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 182, in _call_deepseek_api\n    start_time = time.time()\n                 ^^^^^^^^^\nAttributeError: type object 'datetime.time' has no attribute 'time'\n", "module": "melody_api", "function": "generate_ai_melody_question", "line": 52}
{"timestamp": "2025-04-22T08:51:39.694812", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "b0aa9c33-5c73-47b3-b28c-db1f0e277d10", "path": "/api/v1/melody/generate/ai", "method": "POST"}
{"timestamp": "2025-04-22T08:52:07.566678", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-22T08:52:09.913985", "level": "INFO", "message": "Initializing RhythmService", "module": "rhythm_service", "function": "__init__", "line": 15}
{"timestamp": "2025-04-22T08:52:09.914130", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:52:09.914261", "level": "INFO", "message": "Generated 5 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:52:09.914345", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:52:09.914458", "level": "INFO", "message": "Generated 13 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:52:09.914526", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:52:09.914732", "level": "INFO", "message": "Generated 34 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:52:09.914818", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5, 0.25, 1.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:52:09.915020", "level": "INFO", "message": "Generated 60 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:52:09.915087", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5, 0.25, 1.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:52:09.916439", "level": "INFO", "message": "Generated 610 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:52:09.916513", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5, 0.25, 1.5], max_combinations=10000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:52:09.929345", "level": "INFO", "message": "Generated 6236 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:52:09.929431", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:52:09.929510", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:52:09.929578", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:52:09.929663", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:52:09.929728", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:52:09.929805", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:52:09.929870", "level": "INFO", "message": "Rhythm patterns initialized", "module": "rhythm_service", "function": "__init__", "line": 40}
{"timestamp": "2025-04-22T08:52:09.935822", "level": "INFO", "message": "AIMelodyService initialized with DeepSeek API configuration", "module": "ai_melody_service", "function": "__init__", "line": 33}
{"timestamp": "2025-04-22T08:52:10.092981", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T08:52:10.104036", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T08:52:10.124640", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T08:52:10.129629", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T08:52:10.131857", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T08:52:10.133226", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T08:52:10.135397", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T08:52:10.137227", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T08:52:10.140015", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T08:52:10.140200", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T08:52:10.141192", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T08:52:10.141344", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T08:52:10.144610", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T08:52:10.144767", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T08:52:10.145647", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T08:52:10.145777", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T08:52:10.153848", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T08:52:10.153999", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T08:52:10.161349", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T08:52:31.146576", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-22T08:52:33.310555", "level": "INFO", "message": "Initializing RhythmService", "module": "rhythm_service", "function": "__init__", "line": 15}
{"timestamp": "2025-04-22T08:52:33.310701", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:52:33.310837", "level": "INFO", "message": "Generated 5 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:52:33.310929", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:52:33.311057", "level": "INFO", "message": "Generated 13 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:52:33.311135", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:52:33.311295", "level": "INFO", "message": "Generated 34 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:52:33.311377", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5, 0.25, 1.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:52:33.311580", "level": "INFO", "message": "Generated 60 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:52:33.311648", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5, 0.25, 1.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:52:33.313134", "level": "INFO", "message": "Generated 610 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:52:33.313212", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5, 0.25, 1.5], max_combinations=10000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:52:33.325469", "level": "INFO", "message": "Generated 6236 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:52:33.325630", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:52:33.325767", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:52:33.325882", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:52:33.326034", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:52:33.326114", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:52:33.326227", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:52:33.326297", "level": "INFO", "message": "Rhythm patterns initialized", "module": "rhythm_service", "function": "__init__", "line": 40}
{"timestamp": "2025-04-22T08:52:33.332881", "level": "INFO", "message": "AIMelodyService initialized with DeepSeek API configuration", "module": "ai_melody_service", "function": "__init__", "line": 34}
{"timestamp": "2025-04-22T08:52:33.486648", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T08:52:33.492400", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T08:52:33.507474", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T08:52:33.511009", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T08:52:33.512629", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T08:52:33.514012", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T08:52:33.515741", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T08:52:33.516937", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T08:52:33.518619", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T08:52:33.518719", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T08:52:33.519358", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T08:52:33.519439", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T08:52:33.521408", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T08:52:33.521491", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T08:52:33.522138", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T08:52:33.522208", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T08:52:33.528370", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T08:52:33.528527", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T08:52:33.532979", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T08:52:33.536954", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "99357e97-4a8b-4fca-842c-786f3a4c87aa", "ip": "127.0.0.1", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T08:52:33.550836", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "99357e97-4a8b-4fca-842c-786f3a4c87aa", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T08:52:34.543680", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "c1a6316d-e64a-4b1b-b685-505acfd412f4", "ip": "127.0.0.1", "path": "/api/v1/melody/generate/ai", "method": "POST"}
{"timestamp": "2025-04-22T08:52:34.548325", "level": "INFO", "message": "Generating melody question with parameters: {'difficulty': <RhythmDifficulty.LOW: 'low'>, 'time_signature': <TimeSignature.TWO_FOUR: '2/4'>, 'measures_count': <MeasureCount.FOUR: 4>, 'tempo': <Tempo.EIGHTY: 80>, 'tonality': 1, 'tonality_choice': 1}", "module": "ai_melody_service", "function": "generate_melody_question", "line": 39}
{"timestamp": "2025-04-22T08:52:34.548458", "level": "INFO", "message": "Starting AI melody generation", "module": "ai_melody_service", "function": "_generate_ai_melody", "line": 99}
{"timestamp": "2025-04-22T08:52:34.548538", "level": "DEBUG", "message": "Building melody prompt", "module": "ai_melody_service", "function": "_build_melody_prompt", "line": 121}
{"timestamp": "2025-04-22T08:52:34.548753", "level": "DEBUG", "message": "Generated prompt: \n        4\n        1. 2/4\n        2. 80bpm\n        3. low,:['', '']\n        4. C\n        5. \n        \n        \n        1. \n        2. 2/4\n        3. \n        4. \n        5. \n        \n        JSON\n        {\n            \"measures\": [  //measures 4\n                [\n                    {\n                        \"notes\": [ //notes \n                            {\n                                \"duration\": 0.5,  // 0.510.250.1250.751.5\n                                \"is_rest\": false,  // \n                                \"is_dotted\": false,  // \n                                \"tied_to_next\": false,  // \n                                \"pitch\": \"C2\",  // \n                            }\n                        ]\n                    }\n                ]\n            ]\n        }\n\n        \n        1. \n        2. \n        3. \n        4. JSON\n        5. false\"false\"\n        6. \n        \n        ", "module": "ai_melody_service", "function": "_build_melody_prompt", "line": 176}
{"timestamp": "2025-04-22T08:52:34.548866", "level": "DEBUG", "message": "Generated prompt: \n        4\n        1. 2/4\n        2. 80bpm\n        3. low,:['', '']\n        4. C\n        5. \n        \n        \n        1. \n        2. 2/4\n        3. \n        4. \n        5. \n        \n        JSON\n        {\n            \"measures\": [  //measures 4\n                [\n                    {\n                        \"notes\": [ //notes \n                            {\n                                \"duration\": 0.5,  // 0.510.250.1250.751.5\n                                \"is_rest\": false,  // \n                                \"is_dotted\": false,  // \n                                \"tied_to_next\": false,  // \n                                \"pitch\": \"C2\",  // \n                            }\n                        ]\n                    }\n                ]\n            ]\n        }\n\n        \n        1. \n        2. \n        3. \n        4. JSON\n        5. false\"false\"\n        6. \n        \n        ", "module": "ai_melody_service", "function": "_generate_ai_melody", "line": 103}
{"timestamp": "2025-04-22T08:52:34.548952", "level": "INFO", "message": "Calling DeepSeek API", "module": "ai_melody_service", "function": "_call_deepseek_api", "line": 181}
{"timestamp": "2025-04-22T08:52:34.549071", "level": "DEBUG", "message": "API request data: {\"model\": \"deepseek-chat\", \"messages\": [{\"role\": \"user\", \"content\": \"\\n        4\\n        1. 2/4\\n        2. 80bpm\\n        3. low,:['', '']\\n        4. C\\n        5. \\n        \\n        \\n        1. \\n        2. 2/4\\n        3. \\n        4. \\n        5. \\n        \\n        JSON\\n        {\\n            \\\"measures\\\": [  //measures 4\\n                [\\n                    {\\n                        \\\"notes\\\": [ //notes \\n                            {\\n                                \\\"duration\\\": 0.5,  // 0.510.250.1250.751.5\\n                                \\\"is_rest\\\": false,  // \\n                                \\\"is_dotted\\\": false,  // \\n                                \\\"tied_to_next\\\": false,  // \\n                                \\\"pitch\\\": \\\"C2\\\",  // \\n                            }\\n                        ]\\n                    }\\n                ]\\n            ]\\n        }\\n\\n        \\n        1. \\n        2. \\n        3. \\n        4. JSON\\n        5. false\\\"false\\\"\\n        6. \\n        \\n        \"}], \"temperature\": 0.5, \"max_tokens\": 5000, \"stream\": false, \"top_p\": 0.9}", "module": "ai_melody_service", "function": "_call_deepseek_api", "line": 197}
{"timestamp": "2025-04-22T08:53:11.178833", "level": "INFO", "message": "Successfully received response from DeepSeek API. Time cost=36.62939691543579", "module": "ai_melody_service", "function": "_call_deepseek_api", "line": 209}
{"timestamp": "2025-04-22T08:53:11.180709", "level": "INFO", "message": "Successfully received response from DeepSeek API", "module": "ai_melody_service", "function": "_generate_ai_melody", "line": 107}
{"timestamp": "2025-04-22T08:53:11.181033", "level": "INFO", "message": "Parsing AI response", "module": "ai_melody_service", "function": "_parse_ai_response", "line": 216}
{"timestamp": "2025-04-22T08:53:11.181635", "level": "DEBUG", "message": "Parsed melody data: {\"measures\": [[{\"notes\": [{\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"C4\"}, {\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"D4\"}, {\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"E4\"}, {\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"G4\"}]}], [{\"notes\": [{\"duration\": 1, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"E4\"}, {\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"D4\"}, {\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"C4\"}]}], [{\"notes\": [{\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"D4\"}, {\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"E4\"}, {\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"F4\"}, {\"duration\": 0.5, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"G4\"}]}], [{\"notes\": [{\"duration\": 1, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"E4\"}, {\"duration\": 1, \"is_rest\": false, \"is_dotted\": false, \"tied_to_next\": false, \"pitch\": \"C4\"}]}]]}", "module": "ai_melody_service", "function": "_parse_ai_response", "line": 343}
{"timestamp": "2025-04-22T08:53:11.189297", "level": "INFO", "message": "Successfully created MelodyScorePitch object", "module": "ai_melody_service", "function": "_parse_ai_response", "line": 380}
{"timestamp": "2025-04-22T08:53:11.189576", "level": "INFO", "message": "Successfully parsed AI response into melody", "module": "ai_melody_service", "function": "_generate_ai_melody", "line": 112}
{"timestamp": "2025-04-22T08:53:11.189802", "level": "INFO", "message": "Successfully generated correct melody", "module": "ai_melody_service", "function": "generate_melody_question", "line": 43}
{"timestamp": "2025-04-22T08:53:11.194465", "level": "INFO", "message": "Generated 4 wrong options using systematic method", "module": "ai_melody_service", "function": "generate_melody_question", "line": 47}
{"timestamp": "2025-04-22T08:53:11.194625", "level": "INFO", "message": "Found 3 unique wrong options", "module": "ai_melody_service", "function": "generate_melody_question", "line": 56}
{"timestamp": "2025-04-22T08:53:11.194742", "level": "INFO", "message": "Added basic variations, total unique wrong options: 3", "module": "ai_melody_service", "function": "generate_melody_question", "line": 71}
{"timestamp": "2025-04-22T08:53:11.194862", "level": "INFO", "message": "Randomized all options", "module": "ai_melody_service", "function": "generate_melody_question", "line": 76}
{"timestamp": "2025-04-22T08:53:11.195029", "level": "INFO", "message": "Correct answer is option B", "module": "ai_melody_service", "function": "generate_melody_question", "line": 80}
{"timestamp": "2025-04-22T08:53:11.195143", "level": "INFO", "message": "Successfully created melody question response", "module": "ai_melody_service", "function": "generate_melody_question", "line": 90}
{"timestamp": "2025-04-22T08:53:11.195997", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "c1a6316d-e64a-4b1b-b685-505acfd412f4", "path": "/api/v1/melody/generate/ai", "method": "POST"}
{"timestamp": "2025-04-22T08:56:45.640553", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-22T08:56:47.820899", "level": "INFO", "message": "Initializing RhythmService", "module": "rhythm_service", "function": "__init__", "line": 15}
{"timestamp": "2025-04-22T08:56:47.821037", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:56:47.821149", "level": "INFO", "message": "Generated 5 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:56:47.821222", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:56:47.821346", "level": "INFO", "message": "Generated 13 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:56:47.821437", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:56:47.821610", "level": "INFO", "message": "Generated 34 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:56:47.821695", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5, 0.25, 1.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:56:47.821895", "level": "INFO", "message": "Generated 60 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:56:47.821964", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5, 0.25, 1.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:56:47.823288", "level": "INFO", "message": "Generated 610 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:56:47.823366", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5, 0.25, 1.5], max_combinations=10000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:56:47.835317", "level": "INFO", "message": "Generated 6236 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:56:47.835425", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:56:47.835515", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:56:47.835584", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:56:47.835662", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:56:47.835728", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:56:47.835805", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:56:47.835868", "level": "INFO", "message": "Rhythm patterns initialized", "module": "rhythm_service", "function": "__init__", "line": 40}
{"timestamp": "2025-04-22T08:56:47.841439", "level": "INFO", "message": "AIMelodyService initialized with DeepSeek API configuration", "module": "ai_melody_service", "function": "__init__", "line": 34}
{"timestamp": "2025-04-22T08:56:47.982625", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T08:56:47.989066", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T08:56:48.005218", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T08:56:48.010523", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T08:56:48.012921", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T08:56:48.015898", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T08:56:48.021632", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T08:56:48.025462", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T08:56:48.032061", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T08:56:48.032422", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T08:56:48.034234", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T08:56:48.034447", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T08:56:48.038497", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T08:56:48.038639", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T08:56:48.039593", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T08:56:48.039688", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T08:56:48.046370", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T08:56:48.046493", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T08:56:48.050733", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T08:56:59.035399", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "9598a840-1ddf-4578-9fcd-0972c91be036", "ip": "127.0.0.1", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T08:56:59.050154", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "9598a840-1ddf-4578-9fcd-0972c91be036", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T08:57:00.833485", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "6e919cd4-9074-4426-8479-2a7237cc523e", "ip": "127.0.0.1", "path": "/api/v1/melody/generate/ai", "method": "POST"}
{"timestamp": "2025-04-22T08:57:00.837826", "level": "INFO", "message": "Generating melody question with parameters: {'difficulty': <RhythmDifficulty.LOW: 'low'>, 'time_signature': <TimeSignature.TWO_FOUR: '2/4'>, 'measures_count': <MeasureCount.FOUR: 4>, 'tempo': <Tempo.EIGHTY: 80>, 'tonality': 1, 'tonality_choice': 1}", "module": "ai_melody_service", "function": "generate_melody_question", "line": 39}
{"timestamp": "2025-04-22T08:57:00.837938", "level": "INFO", "message": "Starting AI melody generation", "module": "ai_melody_service", "function": "_generate_ai_melody", "line": 99}
{"timestamp": "2025-04-22T08:57:00.838021", "level": "DEBUG", "message": "Building melody prompt", "module": "ai_melody_service", "function": "_build_melody_prompt", "line": 121}
{"timestamp": "2025-04-22T08:57:00.838249", "level": "DEBUG", "message": "Generated prompt: \n        4\n        1. 2/4\n        2. 80bpm\n        3. low,:['', '']\n        4. C\n        5. \n        \n        \n        1. \n        2. 2/4\n        3. \n        4. \n        5. \n        \n        JSON\n        {\n            \"measures\": [  //measures 4\n                [\n                    {\n                        \"notes\": [ //notes \n                            {\n                                \"duration\": 0.5,  // 0.510.250.1250.751.5\n                                \"is_rest\": false,  // \n                                \"is_dotted\": false,  // \n                                \"tied_to_next\": false,  // \n                                \"pitch\": \"C2\",  // \n                            }\n                        ]\n                    }\n                ]\n            ]\n        }\n\n        \n        1. \n        2. \n        3. \n        4. JSON\n        5. false\"false\"\n        6. \n        \n        ", "module": "ai_melody_service", "function": "_build_melody_prompt", "line": 176}
{"timestamp": "2025-04-22T08:57:00.838346", "level": "DEBUG", "message": "Generated prompt: \n        4\n        1. 2/4\n        2. 80bpm\n        3. low,:['', '']\n        4. C\n        5. \n        \n        \n        1. \n        2. 2/4\n        3. \n        4. \n        5. \n        \n        JSON\n        {\n            \"measures\": [  //measures 4\n                [\n                    {\n                        \"notes\": [ //notes \n                            {\n                                \"duration\": 0.5,  // 0.510.250.1250.751.5\n                                \"is_rest\": false,  // \n                                \"is_dotted\": false,  // \n                                \"tied_to_next\": false,  // \n                                \"pitch\": \"C2\",  // \n                            }\n                        ]\n                    }\n                ]\n            ]\n        }\n\n        \n        1. \n        2. \n        3. \n        4. JSON\n        5. false\"false\"\n        6. \n        \n        ", "module": "ai_melody_service", "function": "_generate_ai_melody", "line": 103}
{"timestamp": "2025-04-22T08:57:00.838426", "level": "INFO", "message": "Calling DeepSeek API", "module": "ai_melody_service", "function": "_call_deepseek_api", "line": 181}
{"timestamp": "2025-04-22T08:57:00.838540", "level": "DEBUG", "message": "API request data: {\"model\": \"deepseek-chat\", \"messages\": [{\"role\": \"user\", \"content\": \"\\n        4\\n        1. 2/4\\n        2. 80bpm\\n        3. low,:['', '']\\n        4. C\\n        5. \\n        \\n        \\n        1. \\n        2. 2/4\\n        3. \\n        4. \\n        5. \\n        \\n        JSON\\n        {\\n            \\\"measures\\\": [  //measures 4\\n                [\\n                    {\\n                        \\\"notes\\\": [ //notes \\n                            {\\n                                \\\"duration\\\": 0.5,  // 0.510.250.1250.751.5\\n                                \\\"is_rest\\\": false,  // \\n                                \\\"is_dotted\\\": false,  // \\n                                \\\"tied_to_next\\\": false,  // \\n                                \\\"pitch\\\": \\\"C2\\\",  // \\n                            }\\n                        ]\\n                    }\\n                ]\\n            ]\\n        }\\n\\n        \\n        1. \\n        2. \\n        3. \\n        4. JSON\\n        5. false\\\"false\\\"\\n        6. \\n        \\n        \"}], \"temperature\": 0.5, \"max_tokens\": 500, \"stream\": false, \"top_p\": 0.9}", "module": "ai_melody_service", "function": "_call_deepseek_api", "line": 197}
{"timestamp": "2025-04-22T08:57:27.387728", "level": "INFO", "message": "Successfully received response from DeepSeek API. Time cost=26.548769235610962", "module": "ai_melody_service", "function": "_call_deepseek_api", "line": 209}
{"timestamp": "2025-04-22T08:57:27.389708", "level": "INFO", "message": "Successfully received response from DeepSeek API", "module": "ai_melody_service", "function": "_generate_ai_melody", "line": 107}
{"timestamp": "2025-04-22T08:57:27.390176", "level": "INFO", "message": "Parsing AI response", "module": "ai_melody_service", "function": "_parse_ai_response", "line": 216}
{"timestamp": "2025-04-22T08:57:27.396265", "level": "ERROR", "message": "Error parsing AI response: Unterminated string starting at: line 90 column 25 (char 2784)", "module": "ai_melody_service", "function": "_parse_ai_response", "line": 383, "exception": {"type": "JSONDecodeError", "message": "Unterminated string starting at: line 90 column 25 (char 2784)", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 220, in _parse_ai_response\n    melody_data = json.loads(cleaned_content)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 353, in raw_decode\n    obj, end = self.scan_once(s, idx)\n               ^^^^^^^^^^^^^^^^^^^^^^\njson.decoder.JSONDecodeError: Unterminated string starting at: line 90 column 25 (char 2784)"}}
{"timestamp": "2025-04-22T08:57:27.400569", "level": "ERROR", "message": "Error generating AI melody: Unterminated string starting at: line 90 column 25 (char 2784)", "module": "ai_melody_service", "function": "_generate_ai_melody", "line": 116, "exception": {"type": "JSONDecodeError", "message": "Unterminated string starting at: line 90 column 25 (char 2784)", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 110, in _generate_ai_melody\n    melody = self._parse_ai_response(response, request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 220, in _parse_ai_response\n    melody_data = json.loads(cleaned_content)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 353, in raw_decode\n    obj, end = self.scan_once(s, idx)\n               ^^^^^^^^^^^^^^^^^^^^^^\njson.decoder.JSONDecodeError: Unterminated string starting at: line 90 column 25 (char 2784)"}}
{"timestamp": "2025-04-22T08:57:27.403389", "level": "ERROR", "message": "Error generating AI melody question: Unterminated string starting at: line 90 column 25 (char 2784)", "module": "ai_melody_service", "function": "generate_melody_question", "line": 93, "exception": {"type": "JSONDecodeError", "message": "Unterminated string starting at: line 90 column 25 (char 2784)", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 42, in generate_melody_question\n    correct_melody = await self._generate_ai_melody(request)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 110, in _generate_ai_melody\n    melody = self._parse_ai_response(response, request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 220, in _parse_ai_response\n    melody_data = json.loads(cleaned_content)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 353, in raw_decode\n    obj, end = self.scan_once(s, idx)\n               ^^^^^^^^^^^^^^^^^^^^^^\njson.decoder.JSONDecodeError: Unterminated string starting at: line 90 column 25 (char 2784)"}}
{"timestamp": "2025-04-22T08:57:27.405266", "level": "ERROR", "message": "Error in generate_ai_melody_question : Unterminated string starting at: line 90 column 25 (char 2784)\nTraceback: Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/api/v1/melody_api.py\", line 49, in generate_ai_melody_question\n    return await ai_melody_service.generate_melody_question(melody_question_request)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 42, in generate_melody_question\n    correct_melody = await self._generate_ai_melody(request)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 110, in _generate_ai_melody\n    melody = self._parse_ai_response(response, request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 220, in _parse_ai_response\n    melody_data = json.loads(cleaned_content)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 353, in raw_decode\n    obj, end = self.scan_once(s, idx)\n               ^^^^^^^^^^^^^^^^^^^^^^\njson.decoder.JSONDecodeError: Unterminated string starting at: line 90 column 25 (char 2784)\n", "module": "melody_api", "function": "generate_ai_melody_question", "line": 52}
{"timestamp": "2025-04-22T08:57:27.406590", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "6e919cd4-9074-4426-8479-2a7237cc523e", "path": "/api/v1/melody/generate/ai", "method": "POST"}
{"timestamp": "2025-04-22T08:58:19.538915", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-22T08:58:21.744453", "level": "INFO", "message": "Initializing RhythmService", "module": "rhythm_service", "function": "__init__", "line": 15}
{"timestamp": "2025-04-22T08:58:21.744610", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:58:21.744754", "level": "INFO", "message": "Generated 5 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:58:21.744870", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:58:21.745012", "level": "INFO", "message": "Generated 13 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:58:21.745098", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:58:21.745258", "level": "INFO", "message": "Generated 34 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:58:21.745353", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5, 0.25, 1.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:58:21.745544", "level": "INFO", "message": "Generated 60 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:58:21.745609", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5, 0.25, 1.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:58:21.746923", "level": "INFO", "message": "Generated 610 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:58:21.747007", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5, 0.25, 1.5], max_combinations=10000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:58:21.759181", "level": "INFO", "message": "Generated 6236 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:58:21.759297", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:58:21.759379", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:58:21.759448", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:58:21.759534", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:58:21.759599", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:58:21.759677", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:58:21.759742", "level": "INFO", "message": "Rhythm patterns initialized", "module": "rhythm_service", "function": "__init__", "line": 40}
{"timestamp": "2025-04-22T08:58:21.765940", "level": "INFO", "message": "AIMelodyService initialized with DeepSeek API configuration", "module": "ai_melody_service", "function": "__init__", "line": 34}
{"timestamp": "2025-04-22T08:58:21.914598", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T08:58:21.923103", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T08:58:21.937644", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T08:58:21.941022", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T08:58:21.942337", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T08:58:21.943460", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T08:58:21.945065", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T08:58:21.946219", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T08:58:21.947951", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T08:58:21.948077", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T08:58:21.948763", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T08:58:21.948855", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T08:58:21.951053", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T08:58:21.951181", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T08:58:21.951757", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T08:58:21.951848", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T08:58:21.958167", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T08:58:21.958338", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T08:58:21.962620", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T08:58:25.838410", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "a4a9ce9e-b355-4f2e-a06e-91fc7de7b7e8", "ip": "127.0.0.1", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T08:58:25.852080", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "a4a9ce9e-b355-4f2e-a06e-91fc7de7b7e8", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T08:58:27.672198", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "377a1395-8bfc-46e6-93ee-399bd57dffa2", "ip": "127.0.0.1", "path": "/api/v1/melody/generate/ai", "method": "POST"}
{"timestamp": "2025-04-22T08:58:27.676262", "level": "INFO", "message": "Generating melody question with parameters: {'difficulty': <RhythmDifficulty.LOW: 'low'>, 'time_signature': <TimeSignature.TWO_FOUR: '2/4'>, 'measures_count': <MeasureCount.FOUR: 4>, 'tempo': <Tempo.EIGHTY: 80>, 'tonality': 1, 'tonality_choice': 1}", "module": "ai_melody_service", "function": "generate_melody_question", "line": 39}
{"timestamp": "2025-04-22T08:58:27.676388", "level": "INFO", "message": "Starting AI melody generation", "module": "ai_melody_service", "function": "_generate_ai_melody", "line": 99}
{"timestamp": "2025-04-22T08:58:27.676467", "level": "DEBUG", "message": "Building melody prompt", "module": "ai_melody_service", "function": "_build_melody_prompt", "line": 121}
{"timestamp": "2025-04-22T08:58:27.676684", "level": "DEBUG", "message": "Generated prompt: \n        4\n        1. 2/4\n        2. 80bpm\n        3. low,:['', '']\n        4. C\n        5. \n        \n        \n        1. \n        2. 2/4\n        3. \n        4. \n        5. \n        \n        JSON\n        {\n            \"measures\": [  //measures 4\n                [\n                    {\n                        \"notes\": [ //notes \n                            {\n                                \"duration\": 0.5,  // 0.510.250.1250.751.5\n                                \"is_rest\": false,  // \n                                \"is_dotted\": false,  // \n                                \"tied_to_next\": false,  // \n                                \"pitch\": \"C2\",  // \n                            }\n                        ]\n                    }\n                ]\n            ]\n        }\n\n        \n        1. \n        2. \n        3. \n        4. JSON\n        5. false\"false\"\n        6. \n        \n        ", "module": "ai_melody_service", "function": "_build_melody_prompt", "line": 176}
{"timestamp": "2025-04-22T08:58:27.676779", "level": "DEBUG", "message": "Generated prompt: \n        4\n        1. 2/4\n        2. 80bpm\n        3. low,:['', '']\n        4. C\n        5. \n        \n        \n        1. \n        2. 2/4\n        3. \n        4. \n        5. \n        \n        JSON\n        {\n            \"measures\": [  //measures 4\n                [\n                    {\n                        \"notes\": [ //notes \n                            {\n                                \"duration\": 0.5,  // 0.510.250.1250.751.5\n                                \"is_rest\": false,  // \n                                \"is_dotted\": false,  // \n                                \"tied_to_next\": false,  // \n                                \"pitch\": \"C2\",  // \n                            }\n                        ]\n                    }\n                ]\n            ]\n        }\n\n        \n        1. \n        2. \n        3. \n        4. JSON\n        5. false\"false\"\n        6. \n        \n        ", "module": "ai_melody_service", "function": "_generate_ai_melody", "line": 103}
{"timestamp": "2025-04-22T08:58:27.676860", "level": "INFO", "message": "Calling DeepSeek API", "module": "ai_melody_service", "function": "_call_deepseek_api", "line": 181}
{"timestamp": "2025-04-22T08:58:27.676983", "level": "DEBUG", "message": "API request data: {\"model\": \"deepseek-chat\", \"messages\": [{\"role\": \"user\", \"content\": \"\\n        4\\n        1. 2/4\\n        2. 80bpm\\n        3. low,:['', '']\\n        4. C\\n        5. \\n        \\n        \\n        1. \\n        2. 2/4\\n        3. \\n        4. \\n        5. \\n        \\n        JSON\\n        {\\n            \\\"measures\\\": [  //measures 4\\n                [\\n                    {\\n                        \\\"notes\\\": [ //notes \\n                            {\\n                                \\\"duration\\\": 0.5,  // 0.510.250.1250.751.5\\n                                \\\"is_rest\\\": false,  // \\n                                \\\"is_dotted\\\": false,  // \\n                                \\\"tied_to_next\\\": false,  // \\n                                \\\"pitch\\\": \\\"C2\\\",  // \\n                            }\\n                        ]\\n                    }\\n                ]\\n            ]\\n        }\\n\\n        \\n        1. \\n        2. \\n        3. \\n        4. JSON\\n        5. false\\\"false\\\"\\n        6. \\n        \\n        \"}], \"temperature\": 0.5, \"max_tokens\": 500, \"stream\": false, \"top_p\": 0.9}", "module": "ai_melody_service", "function": "_call_deepseek_api", "line": 197}
{"timestamp": "2025-04-22T08:58:54.221646", "level": "INFO", "message": "Successfully received response from DeepSeek API. Time cost=26.544163703918457", "module": "ai_melody_service", "function": "_call_deepseek_api", "line": 209}
{"timestamp": "2025-04-22T08:58:54.224360", "level": "INFO", "message": "Successfully received response from DeepSeek API", "module": "ai_melody_service", "function": "_generate_ai_melody", "line": 107}
{"timestamp": "2025-04-22T08:58:54.224865", "level": "INFO", "message": "Parsing AI response", "module": "ai_melody_service", "function": "_parse_ai_response", "line": 216}
{"timestamp": "2025-04-22T08:58:54.225405", "level": "INFO", "message": "content=```json\n{\n    \"measures\": [\n        [\n            {\n                \"notes\": [\n                    {\n                        \"duration\": 0.5,\n                        \"is_rest\": false,\n                        \"is_dotted\": false,\n                        \"tied_to_next\": false,\n                        \"pitch\": \"C4\"\n                    },\n                    {\n                        \"duration\": 0.5,\n                        \"is_rest\": false,\n                        \"is_dotted\": false,\n                        \"tied_to_next\": false,\n                        \"pitch\": \"D4\"\n                    },\n                    {\n                        \"duration\": 0.5,\n                        \"is_rest\": false,\n                        \"is_dotted\": false,\n                        \"tied_to_next\": false,\n                        \"pitch\": \"E4\"\n                    },\n                    {\n                        \"duration\": 0.5,\n                        \"is_rest\": false,\n                        \"is_dotted\": false,\n                        \"tied_to_next\": false,\n                        \"pitch\": \"D4\"\n                    }\n                ]\n            }\n        ],\n        [\n            {\n                \"notes\": [\n                    {\n                        \"duration\": 1,\n                        \"is_rest\": false,\n                        \"is_dotted\": false,\n                        \"tied_to_next\": false,\n                        \"pitch\": \"C4\"\n                    },\n                    {\n                        \"duration\": 0.5,\n                        \"is_rest\": false,\n                        \"is_dotted\": false,\n                        \"tied_to_next\": false,\n                        \"pitch\": \"E4\"\n                    },\n                    {\n                        \"duration\": 0.5,\n                        \"is_rest\": false,\n                        \"is_dotted\": false,\n                        \"tied_to_next\": false,\n                        \"pitch\": \"G4\"\n                    }\n                ]\n            }\n        ],\n        [\n            {\n                \"notes\": [\n                    {\n                        \"duration\": 0.5,\n                        \"is_rest\": false,\n                        \"is_dotted\": false,\n                        \"tied_to_next\": false,\n                        \"pitch\": \"F4\"\n                    },\n                    {\n                        \"duration\": 0.5,\n                        \"is_rest\": false,\n                        \"is_dotted\": false,\n                        \"tied_to_next\": false,\n                        \"pitch\": \"E4\"\n                    },\n                    {\n                        \"duration\": 0.5,\n                        \"is_rest\": false,\n                        \"is_dotted\": false,\n                        \"tied", "module": "ai_melody_service", "function": "_parse_ai_response", "line": 219}
{"timestamp": "2025-04-22T08:58:54.234170", "level": "ERROR", "message": "Error parsing AI response: Unterminated string starting at: line 85 column 25 (char 2741)", "module": "ai_melody_service", "function": "_parse_ai_response", "line": 384, "exception": {"type": "JSONDecodeError", "message": "Unterminated string starting at: line 85 column 25 (char 2741)", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 221, in _parse_ai_response\n    melody_data = json.loads(cleaned_content)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 353, in raw_decode\n    obj, end = self.scan_once(s, idx)\n               ^^^^^^^^^^^^^^^^^^^^^^\njson.decoder.JSONDecodeError: Unterminated string starting at: line 85 column 25 (char 2741)"}}
{"timestamp": "2025-04-22T08:58:54.237706", "level": "ERROR", "message": "Error generating AI melody: Unterminated string starting at: line 85 column 25 (char 2741)", "module": "ai_melody_service", "function": "_generate_ai_melody", "line": 116, "exception": {"type": "JSONDecodeError", "message": "Unterminated string starting at: line 85 column 25 (char 2741)", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 110, in _generate_ai_melody\n    melody = self._parse_ai_response(response, request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 221, in _parse_ai_response\n    melody_data = json.loads(cleaned_content)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 353, in raw_decode\n    obj, end = self.scan_once(s, idx)\n               ^^^^^^^^^^^^^^^^^^^^^^\njson.decoder.JSONDecodeError: Unterminated string starting at: line 85 column 25 (char 2741)"}}
{"timestamp": "2025-04-22T08:58:54.240124", "level": "ERROR", "message": "Error generating AI melody question: Unterminated string starting at: line 85 column 25 (char 2741)", "module": "ai_melody_service", "function": "generate_melody_question", "line": 93, "exception": {"type": "JSONDecodeError", "message": "Unterminated string starting at: line 85 column 25 (char 2741)", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 42, in generate_melody_question\n    correct_melody = await self._generate_ai_melody(request)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 110, in _generate_ai_melody\n    melody = self._parse_ai_response(response, request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 221, in _parse_ai_response\n    melody_data = json.loads(cleaned_content)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 353, in raw_decode\n    obj, end = self.scan_once(s, idx)\n               ^^^^^^^^^^^^^^^^^^^^^^\njson.decoder.JSONDecodeError: Unterminated string starting at: line 85 column 25 (char 2741)"}}
{"timestamp": "2025-04-22T08:58:54.241782", "level": "ERROR", "message": "Error in generate_ai_melody_question : Unterminated string starting at: line 85 column 25 (char 2741)\nTraceback: Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/api/v1/melody_api.py\", line 49, in generate_ai_melody_question\n    return await ai_melody_service.generate_melody_question(melody_question_request)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 42, in generate_melody_question\n    correct_melody = await self._generate_ai_melody(request)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 110, in _generate_ai_melody\n    melody = self._parse_ai_response(response, request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 221, in _parse_ai_response\n    melody_data = json.loads(cleaned_content)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/dev/anaconda3/envs/shengyibaodian/lib/python3.11/json/decoder.py\", line 353, in raw_decode\n    obj, end = self.scan_once(s, idx)\n               ^^^^^^^^^^^^^^^^^^^^^^\njson.decoder.JSONDecodeError: Unterminated string starting at: line 85 column 25 (char 2741)\n", "module": "melody_api", "function": "generate_ai_melody_question", "line": 52}
{"timestamp": "2025-04-22T08:58:54.243036", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "377a1395-8bfc-46e6-93ee-399bd57dffa2", "path": "/api/v1/melody/generate/ai", "method": "POST"}
{"timestamp": "2025-04-22T08:59:43.464078", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-22T08:59:45.685062", "level": "INFO", "message": "Initializing RhythmService", "module": "rhythm_service", "function": "__init__", "line": 15}
{"timestamp": "2025-04-22T08:59:45.685219", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:59:45.685334", "level": "INFO", "message": "Generated 5 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:59:45.685411", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:59:45.685534", "level": "INFO", "message": "Generated 13 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:59:45.685603", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:59:45.685758", "level": "INFO", "message": "Generated 34 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:59:45.685838", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5, 0.25, 1.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:59:45.686045", "level": "INFO", "message": "Generated 60 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:59:45.686115", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5, 0.25, 1.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:59:45.687463", "level": "INFO", "message": "Generated 610 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:59:45.687541", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5, 0.25, 1.5], max_combinations=10000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:59:45.700100", "level": "INFO", "message": "Generated 6236 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:59:45.700191", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:59:45.700282", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:59:45.700353", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:59:45.700431", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:59:45.700499", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T08:59:45.700578", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T08:59:45.700646", "level": "INFO", "message": "Rhythm patterns initialized", "module": "rhythm_service", "function": "__init__", "line": 40}
{"timestamp": "2025-04-22T08:59:45.706510", "level": "INFO", "message": "AIMelodyService initialized with DeepSeek API configuration", "module": "ai_melody_service", "function": "__init__", "line": 34}
{"timestamp": "2025-04-22T08:59:45.846210", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T08:59:45.851939", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T08:59:45.865345", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T08:59:45.868175", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T08:59:45.869319", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T08:59:45.870314", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T08:59:45.871801", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T08:59:45.872864", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T08:59:45.874414", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T08:59:45.874526", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T08:59:45.875023", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T08:59:45.875105", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T08:59:45.876947", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T08:59:45.877045", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T08:59:45.877626", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T08:59:45.877693", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T08:59:45.883327", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T08:59:45.883457", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T08:59:45.887470", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T09:01:49.704764", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-22T09:01:51.729758", "level": "INFO", "message": "Initializing RhythmService", "module": "rhythm_service", "function": "__init__", "line": 15}
{"timestamp": "2025-04-22T09:01:51.729889", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:01:51.730004", "level": "INFO", "message": "Generated 5 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:01:51.730072", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:01:51.730187", "level": "INFO", "message": "Generated 13 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:01:51.730252", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:01:51.730407", "level": "INFO", "message": "Generated 34 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:01:51.730489", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5, 0.25, 1.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:01:51.730692", "level": "INFO", "message": "Generated 60 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:01:51.730759", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5, 0.25, 1.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:01:51.732100", "level": "INFO", "message": "Generated 610 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:01:51.732175", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5, 0.25, 1.5], max_combinations=10000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:01:51.744702", "level": "INFO", "message": "Generated 6236 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:01:51.744808", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:01:51.744895", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:01:51.744968", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:01:51.745046", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:01:51.745134", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:01:51.745211", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:01:51.745279", "level": "INFO", "message": "Rhythm patterns initialized", "module": "rhythm_service", "function": "__init__", "line": 40}
{"timestamp": "2025-04-22T09:01:51.751036", "level": "INFO", "message": "AIMelodyService initialized with DeepSeek API configuration", "module": "ai_melody_service", "function": "__init__", "line": 34}
{"timestamp": "2025-04-22T09:01:51.885982", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T09:01:51.891846", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T09:01:51.905466", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T09:01:51.908232", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T09:01:51.909321", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T09:01:51.910248", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T09:01:51.911674", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T09:01:51.912619", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T09:01:51.914083", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T09:01:51.914192", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T09:01:51.914704", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T09:01:51.914793", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T09:01:51.916547", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T09:01:51.916642", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T09:01:51.917214", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T09:01:51.917279", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T09:01:51.923055", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T09:01:51.923192", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T09:01:51.927033", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T09:02:54.679312", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-22T09:02:56.875657", "level": "INFO", "message": "Initializing RhythmService", "module": "rhythm_service", "function": "__init__", "line": 15}
{"timestamp": "2025-04-22T09:02:56.875792", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:02:56.875946", "level": "INFO", "message": "Generated 5 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:02:56.876024", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:02:56.876144", "level": "INFO", "message": "Generated 13 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:02:56.876215", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:02:56.876403", "level": "INFO", "message": "Generated 34 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:02:56.876506", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5, 0.25, 1.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:02:56.876708", "level": "INFO", "message": "Generated 60 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:02:56.876777", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5, 0.25, 1.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:02:56.878158", "level": "INFO", "message": "Generated 610 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:02:56.878232", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5, 0.25, 1.5], max_combinations=10000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:02:56.890984", "level": "INFO", "message": "Generated 6236 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:02:56.891078", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:02:56.891161", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:02:56.891229", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:02:56.891306", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:02:56.891372", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:02:56.891448", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:02:56.891512", "level": "INFO", "message": "Rhythm patterns initialized", "module": "rhythm_service", "function": "__init__", "line": 40}
{"timestamp": "2025-04-22T09:04:32.797062", "level": "INFO", "message": "Initializing RhythmService", "module": "rhythm_service", "function": "__init__", "line": 15}
{"timestamp": "2025-04-22T09:04:32.797237", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:04:32.797365", "level": "INFO", "message": "Generated 5 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:04:32.797452", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:04:32.797575", "level": "INFO", "message": "Generated 13 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:04:32.797647", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:04:32.797815", "level": "INFO", "message": "Generated 34 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:04:32.797907", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5, 0.25, 1.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:04:32.798127", "level": "INFO", "message": "Generated 60 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:04:32.798198", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5, 0.25, 1.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:04:32.799603", "level": "INFO", "message": "Generated 610 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:04:32.799708", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5, 0.25, 1.5], max_combinations=10000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:04:32.812667", "level": "INFO", "message": "Generated 6236 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:04:32.812790", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:04:32.812892", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:04:32.812973", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:04:32.813067", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:04:32.813160", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:04:32.813250", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:04:32.813321", "level": "INFO", "message": "Rhythm patterns initialized", "module": "rhythm_service", "function": "__init__", "line": 40}
{"timestamp": "2025-04-22T09:05:54.930615", "level": "INFO", "message": "Initializing RhythmService", "module": "rhythm_service", "function": "__init__", "line": 15}
{"timestamp": "2025-04-22T09:05:54.930799", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:05:54.930952", "level": "INFO", "message": "Generated 5 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:05:54.931055", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:05:54.931232", "level": "INFO", "message": "Generated 13 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:05:54.931334", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:05:54.931598", "level": "INFO", "message": "Generated 34 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:05:54.931702", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5, 0.25, 1.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:05:54.931918", "level": "INFO", "message": "Generated 60 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:05:54.931994", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5, 0.25, 1.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:05:54.933357", "level": "INFO", "message": "Generated 610 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:05:54.933439", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5, 0.25, 1.5], max_combinations=10000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:05:54.945949", "level": "INFO", "message": "Generated 6236 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:05:54.946058", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:05:54.946142", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:05:54.946218", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:05:54.946299", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:05:54.946374", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:05:54.946456", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:05:54.946524", "level": "INFO", "message": "Rhythm patterns initialized", "module": "rhythm_service", "function": "__init__", "line": 40}
{"timestamp": "2025-04-22T09:05:54.952431", "level": "INFO", "message": "AIMelodyService initialized with DeepSeek API configuration", "module": "ai_melody_service", "function": "__init__", "line": 34}
{"timestamp": "2025-04-22T09:05:55.092464", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T09:05:55.098295", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T09:05:55.112167", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T09:05:55.115027", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T09:05:55.116267", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T09:05:55.117313", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T09:05:55.118858", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T09:05:55.119948", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T09:05:55.121383", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T09:05:55.121485", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T09:05:55.121991", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T09:05:55.122070", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T09:05:55.123818", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T09:05:55.123902", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T09:05:55.124493", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T09:05:55.124557", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T09:05:55.130287", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T09:05:55.130428", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T09:05:55.134467", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T09:06:54.199865", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-22T09:06:56.413792", "level": "INFO", "message": "Initializing RhythmService", "module": "rhythm_service", "function": "__init__", "line": 15}
{"timestamp": "2025-04-22T09:06:56.413943", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:06:56.414076", "level": "INFO", "message": "Generated 5 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:06:56.414150", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:06:56.414259", "level": "INFO", "message": "Generated 13 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:06:56.414321", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:06:56.414468", "level": "INFO", "message": "Generated 34 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:06:56.414545", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5, 0.25, 1.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:06:56.414739", "level": "INFO", "message": "Generated 60 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:06:56.414805", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5, 0.25, 1.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:06:56.416154", "level": "INFO", "message": "Generated 610 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:06:56.416225", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5, 0.25, 1.5], max_combinations=10000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:06:56.428654", "level": "INFO", "message": "Generated 6236 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:06:56.428732", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:06:56.428811", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:06:56.428879", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:06:56.428960", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:06:56.429026", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:06:56.429103", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:06:56.429167", "level": "INFO", "message": "Rhythm patterns initialized", "module": "rhythm_service", "function": "__init__", "line": 40}
{"timestamp": "2025-04-22T09:06:56.434898", "level": "INFO", "message": "AIMelodyService initialized with DeepSeek API configuration", "module": "ai_melody_service", "function": "__init__", "line": 34}
{"timestamp": "2025-04-22T09:06:56.572504", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T09:06:56.578261", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T09:06:56.591963", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T09:06:56.594757", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T09:06:56.595893", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T09:06:56.596858", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T09:06:56.598316", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T09:06:56.599394", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T09:06:56.600914", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T09:06:56.601029", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T09:06:56.601510", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T09:06:56.601584", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T09:06:56.603386", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T09:06:56.603479", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T09:06:56.604034", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T09:06:56.604116", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T09:06:56.609889", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T09:06:56.610026", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T09:06:56.613874", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T09:07:03.655355", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "77420573-dc96-4957-8a48-d1dc5224c497", "ip": "127.0.0.1", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T09:07:03.669181", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "77420573-dc96-4957-8a48-d1dc5224c497", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T09:07:39.090005", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-22T09:07:41.366752", "level": "INFO", "message": "Initializing RhythmService", "module": "rhythm_service", "function": "__init__", "line": 15}
{"timestamp": "2025-04-22T09:07:41.366874", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:07:41.366992", "level": "INFO", "message": "Generated 5 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:07:41.367067", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:07:41.367177", "level": "INFO", "message": "Generated 13 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:07:41.367242", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:07:41.367396", "level": "INFO", "message": "Generated 34 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:07:41.367474", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5, 0.25, 1.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:07:41.367673", "level": "INFO", "message": "Generated 60 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:07:41.367739", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5, 0.25, 1.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:07:41.369154", "level": "INFO", "message": "Generated 610 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:07:41.369231", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5, 0.25, 1.5], max_combinations=10000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:07:41.381978", "level": "INFO", "message": "Generated 6236 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:07:41.382062", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:07:41.382142", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:07:41.382210", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:07:41.382287", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:07:41.382353", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:07:41.382438", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:07:41.382504", "level": "INFO", "message": "Rhythm patterns initialized", "module": "rhythm_service", "function": "__init__", "line": 40}
{"timestamp": "2025-04-22T09:07:41.388341", "level": "INFO", "message": "AIMelodyService initialized with DeepSeek API configuration", "module": "ai_melody_service", "function": "__init__", "line": 34}
{"timestamp": "2025-04-22T09:07:41.520547", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T09:07:41.526165", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T09:07:41.539758", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T09:07:41.542468", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T09:07:41.543611", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T09:07:41.544666", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T09:07:41.546219", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T09:07:41.547300", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T09:07:41.548784", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T09:07:41.548911", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T09:07:41.549492", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T09:07:41.549572", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T09:07:41.551384", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T09:07:41.551483", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T09:07:41.552044", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T09:07:41.552110", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T09:07:41.557881", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T09:07:41.558030", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T09:07:41.561904", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T09:07:48.092068", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-22T09:07:50.569910", "level": "INFO", "message": "Initializing RhythmService", "module": "rhythm_service", "function": "__init__", "line": 15}
{"timestamp": "2025-04-22T09:07:50.570037", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:07:50.570166", "level": "INFO", "message": "Generated 5 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:07:50.570248", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:07:50.570358", "level": "INFO", "message": "Generated 13 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:07:50.570424", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:07:50.570576", "level": "INFO", "message": "Generated 34 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:07:50.570655", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5, 0.25, 1.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:07:50.570853", "level": "INFO", "message": "Generated 60 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:07:50.570924", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5, 0.25, 1.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:07:50.572296", "level": "INFO", "message": "Generated 610 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:07:50.572370", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5, 0.25, 1.5], max_combinations=10000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:07:50.585266", "level": "INFO", "message": "Generated 6236 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:07:50.585367", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:07:50.585451", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:07:50.585520", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:07:50.585599", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:07:50.585665", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:07:50.585751", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:07:50.585818", "level": "INFO", "message": "Rhythm patterns initialized", "module": "rhythm_service", "function": "__init__", "line": 40}
{"timestamp": "2025-04-22T09:07:50.592183", "level": "INFO", "message": "AIMelodyService initialized with DeepSeek API configuration", "module": "ai_melody_service", "function": "__init__", "line": 34}
{"timestamp": "2025-04-22T09:07:50.752813", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T09:07:50.761749", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T09:07:50.777180", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T09:07:50.780596", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T09:07:50.782004", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T09:07:50.783181", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T09:07:50.784832", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T09:07:50.785906", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T09:07:50.787561", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T09:07:50.787660", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T09:07:50.788548", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T09:07:50.788727", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T09:07:50.792288", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T09:07:50.792393", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T09:07:50.792978", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T09:07:50.793049", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T09:07:50.801452", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T09:07:50.801593", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T09:07:50.808022", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T09:07:52.193488", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "3624e893-8a49-4d95-9429-c0d231398b86", "ip": "127.0.0.1", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T09:07:52.210246", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "3624e893-8a49-4d95-9429-c0d231398b86", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T09:07:58.006906", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "f4f4cbd4-7b25-489c-bf76-0476067a2bc0", "ip": "127.0.0.1", "path": "/api/v1/melody/generate/ai", "method": "POST"}
{"timestamp": "2025-04-22T09:07:58.011361", "level": "INFO", "message": "Generating melody question with parameters: {'difficulty': <RhythmDifficulty.LOW: 'low'>, 'time_signature': <TimeSignature.TWO_FOUR: '2/4'>, 'measures_count': <MeasureCount.FOUR: 4>, 'tempo': <Tempo.EIGHTY: 80>, 'tonality': 1, 'tonality_choice': 1}", "module": "ai_melody_service", "function": "generate_melody_question", "line": 39}
{"timestamp": "2025-04-22T09:07:58.011513", "level": "INFO", "message": "Starting AI melody generation", "module": "ai_melody_service", "function": "_generate_ai_melody", "line": 99}
{"timestamp": "2025-04-22T09:07:58.011605", "level": "DEBUG", "message": "Building melody prompt", "module": "ai_melody_service", "function": "_build_melody_prompt", "line": 121}
{"timestamp": "2025-04-22T09:07:58.011860", "level": "DEBUG", "message": "Generated prompt: \n        4\n        1. 2/4\n        2. 80bpm\n        3. low,:['', '']\n        4. C\n        5. \n        \n        \n        1. \n        2. 2/4\n        3. \n        4. \n        5. \n        \n        JSON\n        {\n            \"measures\": [  //measures 4\n                [\n                    {\n                        \"notes\": [ //notes \n                            {\n                                \"duration\": 0.5,  // 0.510.250.1250.751.5\n                                \"is_rest\": false,  // ,boolean falsefalse truetrue\n                                \"is_dotted\": false,  // ,boolean  falsefalse truetrue\n                                \"tied_to_next\": false,  // ,boolean  falsefalse truetrue\n                                \"pitch\": \"C2\",  // \n                            }\n                        ]\n                    }\n                ]\n            ]\n        }\n\n        \n        1. \n        2. \n        3. \n        4. JSON\n        5. false\"false\"\n        6. \n        \n        ", "module": "ai_melody_service", "function": "_build_melody_prompt", "line": 176}
{"timestamp": "2025-04-22T09:07:58.011977", "level": "DEBUG", "message": "Generated prompt: \n        4\n        1. 2/4\n        2. 80bpm\n        3. low,:['', '']\n        4. C\n        5. \n        \n        \n        1. \n        2. 2/4\n        3. \n        4. \n        5. \n        \n        JSON\n        {\n            \"measures\": [  //measures 4\n                [\n                    {\n                        \"notes\": [ //notes \n                            {\n                                \"duration\": 0.5,  // 0.510.250.1250.751.5\n                                \"is_rest\": false,  // ,boolean falsefalse truetrue\n                                \"is_dotted\": false,  // ,boolean  falsefalse truetrue\n                                \"tied_to_next\": false,  // ,boolean  falsefalse truetrue\n                                \"pitch\": \"C2\",  // \n                            }\n                        ]\n                    }\n                ]\n            ]\n        }\n\n        \n        1. \n        2. \n        3. \n        4. JSON\n        5. false\"false\"\n        6. \n        \n        ", "module": "ai_melody_service", "function": "_generate_ai_melody", "line": 103}
{"timestamp": "2025-04-22T09:07:58.012066", "level": "INFO", "message": "Calling DeepSeek API", "module": "ai_melody_service", "function": "_call_deepseek_api", "line": 181}
{"timestamp": "2025-04-22T09:07:58.012187", "level": "DEBUG", "message": "API request data: {'model': 'deepseek-chat', 'messages': [{'role': 'user', 'content': '\\n        4\\n        1. 2/4\\n        2. 80bpm\\n        3. low,:[\\'\\', \\'\\']\\n        4. C\\n        5. \\n        \\n        \\n        1. \\n        2. 2/4\\n        3. \\n        4. \\n        5. \\n        \\n        JSON\\n        {\\n            \"measures\": [  //measures 4\\n                [\\n                    {\\n                        \"notes\": [ //notes \\n                            {\\n                                \"duration\": 0.5,  // 0.510.250.1250.751.5\\n                                \"is_rest\": false,  // ,boolean falsefalse truetrue\\n                                \"is_dotted\": false,  // ,boolean  falsefalse truetrue\\n                                \"tied_to_next\": false,  // ,boolean  falsefalse truetrue\\n                                \"pitch\": \"C2\",  // \\n                            }\\n                        ]\\n                    }\\n                ]\\n            ]\\n        }\\n\\n        \\n        1. \\n        2. \\n        3. \\n        4. JSON\\n        5. false\"false\"\\n        6. \\n        \\n        '}], 'temperature': 0.5, 'max_tokens': 5000, 'stream': False, 'top_p': 0.9}", "module": "ai_melody_service", "function": "_call_deepseek_api", "line": 197}
{"timestamp": "2025-04-22T09:08:20.065098", "level": "INFO", "message": "Successfully received response from DeepSeek API. Time cost=22.052399158477783", "module": "ai_melody_service", "function": "_call_deepseek_api", "line": 209}
{"timestamp": "2025-04-22T09:08:20.067578", "level": "INFO", "message": "Successfully received response from DeepSeek API", "module": "ai_melody_service", "function": "_generate_ai_melody", "line": 107}
{"timestamp": "2025-04-22T09:08:20.068096", "level": "INFO", "message": "Parsing AI response", "module": "ai_melody_service", "function": "_parse_ai_response", "line": 216}
{"timestamp": "2025-04-22T09:08:20.068560", "level": "INFO", "message": "content=```json\n{\n    \"measures\": [\n        [\n            {\n                \"notes\": [\n                    {\n                        \"duration\": 0.5,\n                        \"pitch\": \"C4\"\n                    },\n                    {\n                        \"duration\": 0.5,\n                        \"pitch\": \"D4\"\n                    },\n                    {\n                        \"duration\": 0.5,\n                        \"pitch\": \"E4\"\n                    },\n                    {\n                        \"duration\": 0.5,\n                        \"pitch\": \"D4\"\n                    }\n                ]\n            }\n        ],\n        [\n            {\n                \"notes\": [\n                    {\n                        \"duration\": 0.5,\n                        \"pitch\": \"E4\"\n                    },\n                    {\n                        \"duration\": 0.5,\n                        \"pitch\": \"F4\"\n                    },\n                    {\n                        \"duration\": 0.5,\n                        \"pitch\": \"G4\"\n                    },\n                    {\n                        \"duration\": 0.5,\n                        \"pitch\": \"F4\"\n                    }\n                ]\n            }\n        ],\n        [\n            {\n                \"notes\": [\n                    {\n                        \"duration\": 0.5,\n                        \"pitch\": \"E4\"\n                    },\n                    {\n                        \"duration\": 0.5,\n                        \"pitch\": \"D4\"\n                    },\n                    {\n                        \"duration\": 0.5,\n                        \"pitch\": \"C4\"\n                    },\n                    {\n                        \"duration\": 0.5,\n                        \"pitch\": \"D4\"\n                    }\n                ]\n            }\n        ],\n        [\n            {\n                \"notes\": [\n                    {\n                        \"duration\": 1,\n                        \"pitch\": \"E4\"\n                    },\n                    {\n                        \"duration\": 1,\n                        \"pitch\": \"C4\"\n                    }\n                ]\n            }\n        ]\n    ]\n}\n```", "module": "ai_melody_service", "function": "_parse_ai_response", "line": 219}
{"timestamp": "2025-04-22T09:08:20.069291", "level": "DEBUG", "message": "Parsed melody data: {\"measures\": [[{\"notes\": [{\"duration\": 0.5, \"pitch\": \"C4\"}, {\"duration\": 0.5, \"pitch\": \"D4\"}, {\"duration\": 0.5, \"pitch\": \"E4\"}, {\"duration\": 0.5, \"pitch\": \"D4\"}]}], [{\"notes\": [{\"duration\": 0.5, \"pitch\": \"E4\"}, {\"duration\": 0.5, \"pitch\": \"F4\"}, {\"duration\": 0.5, \"pitch\": \"G4\"}, {\"duration\": 0.5, \"pitch\": \"F4\"}]}], [{\"notes\": [{\"duration\": 0.5, \"pitch\": \"E4\"}, {\"duration\": 0.5, \"pitch\": \"D4\"}, {\"duration\": 0.5, \"pitch\": \"C4\"}, {\"duration\": 0.5, \"pitch\": \"D4\"}]}], [{\"notes\": [{\"duration\": 1, \"pitch\": \"E4\"}, {\"duration\": 1, \"pitch\": \"C4\"}]}]]}", "module": "ai_melody_service", "function": "_parse_ai_response", "line": 344}
{"timestamp": "2025-04-22T09:08:20.074832", "level": "ERROR", "message": "Error parsing AI response: 'is_rest'", "module": "ai_melody_service", "function": "_parse_ai_response", "line": 384, "exception": {"type": "KeyError", "message": "'is_rest'", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 365, in _parse_ai_response\n    is_rest = False if note_data[\"is_rest\"] is None else True,\n                       ~~~~~~~~~^^^^^^^^^^^\nKeyError: 'is_rest'"}}
{"timestamp": "2025-04-22T09:08:20.080069", "level": "ERROR", "message": "Error generating AI melody: 'is_rest'", "module": "ai_melody_service", "function": "_generate_ai_melody", "line": 116, "exception": {"type": "KeyError", "message": "'is_rest'", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 110, in _generate_ai_melody\n    melody = self._parse_ai_response(response, request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 365, in _parse_ai_response\n    is_rest = False if note_data[\"is_rest\"] is None else True,\n                       ~~~~~~~~~^^^^^^^^^^^\nKeyError: 'is_rest'"}}
{"timestamp": "2025-04-22T09:08:20.082128", "level": "ERROR", "message": "Error generating AI melody question: 'is_rest'", "module": "ai_melody_service", "function": "generate_melody_question", "line": 93, "exception": {"type": "KeyError", "message": "'is_rest'", "traceback": "Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 42, in generate_melody_question\n    correct_melody = await self._generate_ai_melody(request)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 110, in _generate_ai_melody\n    melody = self._parse_ai_response(response, request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 365, in _parse_ai_response\n    is_rest = False if note_data[\"is_rest\"] is None else True,\n                       ~~~~~~~~~^^^^^^^^^^^\nKeyError: 'is_rest'"}}
{"timestamp": "2025-04-22T09:08:20.083648", "level": "ERROR", "message": "Error in generate_ai_melody_question : 'is_rest'\nTraceback: Traceback (most recent call last):\n  File \"/home/yu/gitdev/shengyibaodian/app/api/v1/melody_api.py\", line 49, in generate_ai_melody_question\n    return await ai_melody_service.generate_melody_question(melody_question_request)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 42, in generate_melody_question\n    correct_melody = await self._generate_ai_melody(request)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 110, in _generate_ai_melody\n    melody = self._parse_ai_response(response, request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/yu/gitdev/shengyibaodian/app/services/ai_melody_service.py\", line 365, in _parse_ai_response\n    is_rest = False if note_data[\"is_rest\"] is None else True,\n                       ~~~~~~~~~^^^^^^^^^^^\nKeyError: 'is_rest'\n", "module": "melody_api", "function": "generate_ai_melody_question", "line": 52}
{"timestamp": "2025-04-22T09:08:20.084998", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "f4f4cbd4-7b25-489c-bf76-0476067a2bc0", "path": "/api/v1/melody/generate/ai", "method": "POST"}
{"timestamp": "2025-04-22T09:23:31.781547", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-22T09:27:26.436559", "level": "INFO", "message": "Initializing RhythmService", "module": "rhythm_service", "function": "__init__", "line": 15}
{"timestamp": "2025-04-22T09:27:26.436638", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:27:26.436708", "level": "INFO", "message": "Generated 5 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:27:26.436752", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:27:26.436802", "level": "INFO", "message": "Generated 13 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:27:26.436835", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:27:26.436896", "level": "INFO", "message": "Generated 34 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:27:26.436946", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5, 0.25, 1.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:27:26.437013", "level": "INFO", "message": "Generated 60 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:27:26.437044", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5, 0.25, 1.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:27:26.437426", "level": "INFO", "message": "Generated 610 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:27:26.437466", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5, 0.25, 1.5], max_combinations=10000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:27:26.441058", "level": "INFO", "message": "Generated 6236 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:27:26.441136", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:27:26.441218", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:27:26.441273", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:27:26.441329", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:27:26.441372", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-22T09:27:26.441429", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-22T09:27:26.441476", "level": "INFO", "message": "Rhythm patterns initialized", "module": "rhythm_service", "function": "__init__", "line": 40}
{"timestamp": "2025-04-22T09:27:26.445539", "level": "INFO", "message": "AIMelodyService initialized with DeepSeek API configuration", "module": "ai_melody_service", "function": "__init__", "line": 34}
{"timestamp": "2025-04-22T09:27:26.489206", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 33}
{"timestamp": "2025-04-22T09:27:26.492733", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 39}
{"timestamp": "2025-04-22T09:27:26.498860", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-22T09:27:26.499913", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-22T09:27:26.500515", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-22T09:27:26.501073", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-22T09:27:26.501898", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-22T09:27:26.502469", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-22T09:27:26.503849", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-22T09:27:26.503905", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2025-04-22T09:27:26.504232", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-22T09:27:26.504270", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 51}
{"timestamp": "2025-04-22T09:27:26.505247", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-22T09:27:26.505287", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 54}
{"timestamp": "2025-04-22T09:27:26.505445", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-22T09:27:26.505483", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 57}
{"timestamp": "2025-04-22T09:27:26.507346", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-22T09:27:26.507402", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 60}
{"timestamp": "2025-04-22T09:27:26.508494", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-22T09:27:37.693251", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "fce95e17-d70a-411c-a376-680dc494c773", "ip": "127.0.0.1", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T09:27:37.697835", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "fce95e17-d70a-411c-a376-680dc494c773", "path": "/api/v1/auth/wechat-login", "method": "POST"}
{"timestamp": "2025-04-22T09:27:39.756848", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "bd40eb89-de15-4d35-819f-e144dc8c07c8", "ip": "127.0.0.1", "path": "/api/v1/melody/generate/ai", "method": "POST"}
{"timestamp": "2025-04-22T09:27:39.759496", "level": "INFO", "message": "Generating melody question with parameters: {'difficulty': <RhythmDifficulty.LOW: 'low'>, 'time_signature': <TimeSignature.TWO_FOUR: '2/4'>, 'measures_count': <MeasureCount.FOUR: 4>, 'tempo': <Tempo.EIGHTY: 80>, 'tonality': 1, 'tonality_choice': 1}", "module": "ai_melody_service", "function": "generate_melody_question", "line": 39}
{"timestamp": "2025-04-22T09:27:39.759557", "level": "INFO", "message": "Starting AI melody generation", "module": "ai_melody_service", "function": "_generate_ai_melody", "line": 99}
{"timestamp": "2025-04-22T09:27:39.759593", "level": "DEBUG", "message": "Building melody prompt", "module": "ai_melody_service", "function": "_build_melody_prompt", "line": 121}
{"timestamp": "2025-04-22T09:27:39.759673", "level": "DEBUG", "message": "Generated prompt: \n        4\n        1. 2/4\n        2. 80bpm\n        3. low,:['', '']\n        4. C\n        5. \n        \n        \n        1. \n        2. 2/4\n        3. \n        4. \n        5. \n        \n        JSON\n        {\n            \"measures\": [  //measures 4\n                [\n                    {\n                        \"notes\": [ //notes \n                            {\n                                \"duration\": 0.5,  // 0.510.250.1250.751.5\n                                \"is_rest\": false,  // ,boolean falsefalse truetrue\n                                \"is_dotted\": false,  // ,boolean  falsefalse truetrue\n                                \"tied_to_next\": false,  // ,boolean  falsefalse truetrue\n                                \"pitch\": \"C2\",  // \n                            }\n                        ]\n                    }\n                ]\n            ]\n        }\n\n        \n        1. \n        2. \n        3. \n        4. JSON\n        5. false\"false\"\n        6. \n        \n        ", "module": "ai_melody_service", "function": "_build_melody_prompt", "line": 176}
{"timestamp": "2025-04-22T09:27:39.759730", "level": "DEBUG", "message": "Generated prompt: \n        4\n        1. 2/4\n        2. 80bpm\n        3. low,:['', '']\n        4. C\n        5. \n        \n        \n        1. \n        2. 2/4\n        3. \n        4. \n        5. \n        \n        JSON\n        {\n            \"measures\": [  //measures 4\n                [\n                    {\n                        \"notes\": [ //notes \n                            {\n                                \"duration\": 0.5,  // 0.510.250.1250.751.5\n                                \"is_rest\": false,  // ,boolean falsefalse truetrue\n                                \"is_dotted\": false,  // ,boolean  falsefalse truetrue\n                                \"tied_to_next\": false,  // ,boolean  falsefalse truetrue\n                                \"pitch\": \"C2\",  // \n                            }\n                        ]\n                    }\n                ]\n            ]\n        }\n\n        \n        1. \n        2. \n        3. \n        4. JSON\n        5. false\"false\"\n        6. \n        \n        ", "module": "ai_melody_service", "function": "_generate_ai_melody", "line": 103}
{"timestamp": "2025-04-22T09:27:39.759765", "level": "INFO", "message": "Calling DeepSeek API", "module": "ai_melody_service", "function": "_call_deepseek_api", "line": 181}
{"timestamp": "2025-04-22T09:27:39.759832", "level": "DEBUG", "message": "API request data: {'model': 'deepseek-chat', 'messages': [{'role': 'user', 'content': '\\n        4\\n        1. 2/4\\n        2. 80bpm\\n        3. low,:[\\'\\', \\'\\']\\n        4. C\\n        5. \\n        \\n        \\n        1. \\n        2. 2/4\\n        3. \\n        4. \\n        5. \\n        \\n        JSON\\n        {\\n            \"measures\": [  //measures 4\\n                [\\n                    {\\n                        \"notes\": [ //notes \\n                            {\\n                                \"duration\": 0.5,  // 0.510.250.1250.751.5\\n                                \"is_rest\": false,  // ,boolean falsefalse truetrue\\n                                \"is_dotted\": false,  // ,boolean  falsefalse truetrue\\n                                \"tied_to_next\": false,  // ,boolean  falsefalse truetrue\\n                                \"pitch\": \"C2\",  // \\n                            }\\n                        ]\\n                    }\\n                ]\\n            ]\\n        }\\n\\n        \\n        1. \\n        2. \\n        3. \\n        4. JSON\\n        5. false\"false\"\\n        6. \\n        \\n        '}], 'temperature': 0.5, 'max_tokens': 5000, 'stream': False, 'top_p': 0.9}", "module": "ai_melody_service", "function": "_call_deepseek_api", "line": 197}
{"timestamp": "2025-04-22T09:27:58.301352", "level": "INFO", "message": "Successfully received response from DeepSeek API. Time cost=18.54127049446106", "module": "ai_melody_service", "function": "_call_deepseek_api", "line": 209}
{"timestamp": "2025-04-22T09:27:58.302148", "level": "INFO", "message": "Successfully received response from DeepSeek API", "module": "ai_melody_service", "function": "_generate_ai_melody", "line": 107}
{"timestamp": "2025-04-22T09:27:58.302374", "level": "INFO", "message": "Parsing AI response", "module": "ai_melody_service", "function": "_parse_ai_response", "line": 216}
{"timestamp": "2025-04-22T09:27:58.302717", "level": "INFO", "message": "content=```json\n{\n    \"measures\": [\n        [\n            {\n                \"notes\": [\n                    {\n                        \"duration\": 0.5,\n                        \"pitch\": \"C4\"\n                    },\n                    {\n                        \"duration\": 0.5,\n                        \"pitch\": \"D4\"\n                    },\n                    {\n                        \"duration\": 0.5,\n                        \"pitch\": \"E4\"\n                    },\n                    {\n                        \"duration\": 0.5,\n                        \"pitch\": \"C4\"\n                    }\n                ]\n            }\n        ],\n        [\n            {\n                \"notes\": [\n                    {\n                        \"duration\": 0.5,\n                        \"pitch\": \"E4\"\n                    },\n                    {\n                        \"duration\": 0.5,\n                        \"pitch\": \"F4\"\n                    },\n                    {\n                        \"duration\": 1,\n                        \"pitch\": \"G4\"\n                    }\n                ]\n            }\n        ],\n        [\n            {\n                \"notes\": [\n                    {\n                        \"duration\": 0.5,\n                        \"pitch\": \"G4\"\n                    },\n                    {\n                        \"duration\": 0.5,\n                        \"pitch\": \"A4\"\n                    },\n                    {\n                        \"duration\": 0.5,\n                        \"pitch\": \"G4\"\n                    },\n                    {\n                        \"duration\": 0.5,\n                        \"pitch\": \"F4\"\n                    }\n                ]\n            }\n        ],\n        [\n            {\n                \"notes\": [\n                    {\n                        \"duration\": 0.5,\n                        \"pitch\": \"E4\"\n                    },\n                    {\n                        \"duration\": 0.5,\n                        \"pitch\": \"D4\"\n                    },\n                    {\n                        \"duration\": 1,\n                        \"pitch\": \"C4\"\n                    }\n                ]\n            }\n        ]\n    ]\n}\n```", "module": "ai_melody_service", "function": "_parse_ai_response", "line": 219}
{"timestamp": "2025-04-22T09:27:58.303193", "level": "DEBUG", "message": "Parsed melody data: {\"measures\": [[{\"notes\": [{\"duration\": 0.5, \"pitch\": \"C4\"}, {\"duration\": 0.5, \"pitch\": \"D4\"}, {\"duration\": 0.5, \"pitch\": \"E4\"}, {\"duration\": 0.5, \"pitch\": \"C4\"}]}], [{\"notes\": [{\"duration\": 0.5, \"pitch\": \"E4\"}, {\"duration\": 0.5, \"pitch\": \"F4\"}, {\"duration\": 1, \"pitch\": \"G4\"}]}], [{\"notes\": [{\"duration\": 0.5, \"pitch\": \"G4\"}, {\"duration\": 0.5, \"pitch\": \"A4\"}, {\"duration\": 0.5, \"pitch\": \"G4\"}, {\"duration\": 0.5, \"pitch\": \"F4\"}]}], [{\"notes\": [{\"duration\": 0.5, \"pitch\": \"E4\"}, {\"duration\": 0.5, \"pitch\": \"D4\"}, {\"duration\": 1, \"pitch\": \"C4\"}]}]]}", "module": "ai_melody_service", "function": "_parse_ai_response", "line": 344}
{"timestamp": "2025-04-22T09:27:58.305160", "level": "INFO", "message": "Successfully created MelodyScorePitch object", "module": "ai_melody_service", "function": "_parse_ai_response", "line": 381}
{"timestamp": "2025-04-22T09:27:58.305272", "level": "INFO", "message": "Successfully parsed AI response into melody", "module": "ai_melody_service", "function": "_generate_ai_melody", "line": 112}
{"timestamp": "2025-04-22T09:27:58.305369", "level": "INFO", "message": "Successfully generated correct melody", "module": "ai_melody_service", "function": "generate_melody_question", "line": 43}
{"timestamp": "2025-04-22T09:27:58.306215", "level": "INFO", "message": "Generated 4 wrong options using systematic method", "module": "ai_melody_service", "function": "generate_melody_question", "line": 47}
{"timestamp": "2025-04-22T09:27:58.306272", "level": "INFO", "message": "Found 3 unique wrong options", "module": "ai_melody_service", "function": "generate_melody_question", "line": 56}
{"timestamp": "2025-04-22T09:27:58.306304", "level": "INFO", "message": "Added basic variations, total unique wrong options: 3", "module": "ai_melody_service", "function": "generate_melody_question", "line": 71}
{"timestamp": "2025-04-22T09:27:58.306340", "level": "INFO", "message": "Randomized all options", "module": "ai_melody_service", "function": "generate_melody_question", "line": 76}
{"timestamp": "2025-04-22T09:27:58.306379", "level": "INFO", "message": "Correct answer is option A", "module": "ai_melody_service", "function": "generate_melody_question", "line": 80}
{"timestamp": "2025-04-22T09:27:58.306438", "level": "INFO", "message": "Successfully created melody question response", "module": "ai_melody_service", "function": "generate_melody_question", "line": 90}
{"timestamp": "2025-04-22T09:27:58.306936", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "bd40eb89-de15-4d35-819f-e144dc8c07c8", "path": "/api/v1/melody/generate/ai", "method": "POST"}
{"timestamp": "2025-04-22T09:29:18.634013", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 71}
{"timestamp": "2025-04-25T03:44:25.174563", "level": "INFO", "message": "Initializing RhythmService", "module": "rhythm_service", "function": "__init__", "line": 15}
{"timestamp": "2025-04-25T03:44:25.174664", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-25T03:44:25.174735", "level": "INFO", "message": "Generated 5 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-25T03:44:25.174776", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-25T03:44:25.174829", "level": "INFO", "message": "Generated 13 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-25T03:44:25.174859", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-25T03:44:25.174916", "level": "INFO", "message": "Generated 34 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-25T03:44:25.174960", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5, 0.25, 1.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-25T03:44:25.175025", "level": "INFO", "message": "Generated 60 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-25T03:44:25.175054", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5, 0.25, 1.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-25T03:44:25.175833", "level": "INFO", "message": "Generated 610 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-25T03:44:25.175875", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5, 0.25, 1.5], max_combinations=10000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-25T03:44:25.178430", "level": "INFO", "message": "Generated 6236 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-25T03:44:25.178471", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-25T03:44:25.178507", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-25T03:44:25.178553", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-25T03:44:25.178588", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-25T03:44:25.178614", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-25T03:44:25.178647", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-25T03:44:25.178681", "level": "INFO", "message": "Rhythm patterns initialized", "module": "rhythm_service", "function": "__init__", "line": 40}
{"timestamp": "2025-04-25T03:44:25.181457", "level": "INFO", "message": "AIMelodyService initialized with DeepSeek API configuration", "module": "ai_melody_service", "function": "__init__", "line": 34}
{"timestamp": "2025-04-25T03:44:25.327111", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 34}
{"timestamp": "2025-04-25T03:44:25.330970", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 40}
{"timestamp": "2025-04-25T03:44:25.340481", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-25T03:44:25.343701", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-25T03:44:25.344947", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-25T03:44:25.346228", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-25T03:44:25.347586", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-25T03:44:25.349205", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-25T03:44:25.350494", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-25T03:44:25.350537", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 49}
{"timestamp": "2025-04-25T03:44:25.350883", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-25T03:44:25.350916", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 52}
{"timestamp": "2025-04-25T03:44:25.352567", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-25T03:44:25.352608", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 55}
{"timestamp": "2025-04-25T03:44:25.352755", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-25T03:44:25.352783", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 58}
{"timestamp": "2025-04-25T03:44:25.354600", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-25T03:44:25.354651", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 61}
{"timestamp": "2025-04-25T03:44:25.355708", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-25T03:44:25.356576", "level": "INFO", "message": "Shutting down application...", "module": "main", "function": "lifespan", "line": 72}
{"timestamp": "2025-04-25T03:44:54.931628", "level": "INFO", "message": "Initializing RhythmService", "module": "rhythm_service", "function": "__init__", "line": 15}
{"timestamp": "2025-04-25T03:44:54.931719", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-25T03:44:54.931787", "level": "INFO", "message": "Generated 5 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-25T03:44:54.931826", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-25T03:44:54.931879", "level": "INFO", "message": "Generated 13 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-25T03:44:54.931911", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-25T03:44:54.931969", "level": "INFO", "message": "Generated 34 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-25T03:44:54.932013", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5, 0.25, 1.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-25T03:44:54.932079", "level": "INFO", "message": "Generated 60 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-25T03:44:54.932108", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5, 0.25, 1.5], max_combinations=1000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-25T03:44:54.932885", "level": "INFO", "message": "Generated 610 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-25T03:44:54.932928", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5, 0.25, 1.5], max_combinations=10000", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-25T03:44:54.935504", "level": "INFO", "message": "Generated 6236 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-25T03:44:54.935547", "level": "INFO", "message": "Generating rhythm combinations for beats=2, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-25T03:44:54.935604", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-25T03:44:54.935633", "level": "INFO", "message": "Generating rhythm combinations for beats=3, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-25T03:44:54.935666", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-25T03:44:54.935693", "level": "INFO", "message": "Generating rhythm combinations for beats=4, durations=[1, 0.5, 0.25, 0.125, 1.5, 0.75], max_combinations=1", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 58}
{"timestamp": "2025-04-25T03:44:54.935727", "level": "INFO", "message": "Generated 1 rhythm combinations", "module": "rhythm_service", "function": "_generate_rhythm_combinations", "line": 89}
{"timestamp": "2025-04-25T03:44:54.935760", "level": "INFO", "message": "Rhythm patterns initialized", "module": "rhythm_service", "function": "__init__", "line": 40}
{"timestamp": "2025-04-25T03:44:54.937479", "level": "INFO", "message": "AIMelodyService initialized with DeepSeek API configuration", "module": "ai_melody_service", "function": "__init__", "line": 34}
{"timestamp": "2025-04-25T03:44:55.000760", "level": "INFO", "message": "Creating database tables...", "module": "main", "function": "lifespan", "line": 34}
{"timestamp": "2025-04-25T03:44:55.004692", "level": "INFO", "message": "Initializing database data...", "module": "main", "function": "lifespan", "line": 40}
{"timestamp": "2025-04-25T03:44:55.011148", "level": "INFO", "message": "VIP levels already initialized, skipping...", "module": "init_data", "function": "init_vip_levels", "line": 21}
{"timestamp": "2025-04-25T03:44:55.012170", "level": "INFO", "message": "Pitch already initialized, skipping...", "module": "init_data", "function": "init_pitches", "line": 75}
{"timestamp": "2025-04-25T03:44:55.012712", "level": "INFO", "message": "PitchIntervalType already initialized, skipping...", "module": "init_data", "function": "init_interval_type", "line": 256}
{"timestamp": "2025-04-25T03:44:55.013214", "level": "INFO", "message": "PitchConcordanceType already initialized, skipping...", "module": "init_data", "function": "init_concordance_type", "line": 272}
{"timestamp": "2025-04-25T03:44:55.013963", "level": "INFO", "message": "PitchInterval already initialized, skipping...", "module": "init_data", "function": "init_intervals", "line": 123}
{"timestamp": "2025-04-25T03:44:55.014515", "level": "INFO", "message": "PitchChordType already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord_type", "line": 288}
{"timestamp": "2025-04-25T03:44:55.015208", "level": "INFO", "message": "PitchChordTypeMapping already initialized, skipping...", "module": "init_data", "function": "init_pitch_chord", "line": 304}
{"timestamp": "2025-04-25T03:44:55.015248", "level": "INFO", "message": "Loading VIP cache...", "module": "main", "function": "lifespan", "line": 49}
{"timestamp": "2025-04-25T03:44:55.015597", "level": "INFO", "message": "Successfully loaded 4 VIP levels into cache", "module": "vip_service", "function": "load_vip_cache", "line": 42}
{"timestamp": "2025-04-25T03:44:55.015644", "level": "INFO", "message": "Loading Pitch cache...", "module": "main", "function": "lifespan", "line": 52}
{"timestamp": "2025-04-25T03:44:55.017265", "level": "INFO", "message": "Successfully loaded 88 Pitch into cache", "module": "pitch_service", "function": "load_pitch_cache", "line": 56}
{"timestamp": "2025-04-25T03:44:55.017307", "level": "INFO", "message": "building Pitch Group cache...", "module": "main", "function": "lifespan", "line": 55}
{"timestamp": "2025-04-25T03:44:55.017465", "level": "INFO", "message": "Successfully build Pitch Group into cache", "module": "pitch_service", "function": "build_pitch_group_cache", "line": 79}
{"timestamp": "2025-04-25T03:44:55.017494", "level": "INFO", "message": "building Pitch Interval cache...", "module": "main", "function": "lifespan", "line": 58}
{"timestamp": "2025-04-25T03:44:55.019550", "level": "INFO", "message": "Successfully built Pitch Interval cache with 26 intervals", "module": "pitch_service", "function": "build_pitch_interval_cache", "line": 142}
{"timestamp": "2025-04-25T03:44:55.019609", "level": "INFO", "message": "building Pitch Chord cache...", "module": "main", "function": "lifespan", "line": 61}
{"timestamp": "2025-04-25T03:44:55.020848", "level": "INFO", "message": "Successfully built Pitch chord cache with 11 intervals", "module": "pitch_service", "function": "build_pitch_chord_cache", "line": 203}
{"timestamp": "2025-04-25T03:45:02.470806", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "a4f3f608-5f36-4c53-a48c-ca695c5b0598", "ip": "127.0.0.1", "path": "/", "method": "GET"}
{"timestamp": "2025-04-25T03:45:02.471380", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "a4f3f608-5f36-4c53-a48c-ca695c5b0598", "path": "/", "method": "GET"}
{"timestamp": "2025-04-25T03:45:02.492160", "level": "INFO", "message": "Request started", "module": "logging", "function": "dispatch", "line": 21, "request_id": "72717a8b-16ae-4032-8977-7599349cfa34", "ip": "127.0.0.1", "path": "/favicon.ico", "method": "GET"}
{"timestamp": "2025-04-25T03:45:02.492644", "level": "INFO", "message": "Request completed", "module": "logging", "function": "dispatch", "line": 38, "request_id": "72717a8b-16ae-4032-8977-7599349cfa34", "path": "/favicon.ico", "method": "GET"}
